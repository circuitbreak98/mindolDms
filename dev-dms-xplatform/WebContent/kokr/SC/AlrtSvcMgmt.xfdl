<?xml version="1.0" encoding="utf-8"?>
<FDL version="1.5">
  <TypeDefinition url="..\default_typedef.xml"/>
  <Form id="FRM0022M" classname="ProgramReg" inheritanceid="" position="absolute 0 0 1038 528" titletext="알람서비스관리" style="font:arial,11;" onload="Form_onload">
    <Layouts>
      <Layout>
        <Div id="Div00" taborder="16" text="Div00" position="absolute 0 356 649 390" anchor="left bottom">
          <Layouts>
            <Layout>
              <Static id="stc_subTitle01" text="알림서비스상세" class="sub_title" position="absolute 0 10 299 30" anchor="default"/>
            </Layout>
          </Layouts>
        </Div>
        <Static id="Static06" text="w&#13;&#10;20" class="tip_guide" visible="false" position2="absolute l:1017 w:21 t:43 h:349" positiontype="position2"/>
        <Div id="div_search" taborder="1" text="Div00" position="absolute 0 0 1017 40" class="bg_search" anchor="left top right">
          <Layouts>
            <Layout>
              <Static id="stc_alrtSvcNo" text="알림서비스번호" class="sta_WFSA_Label" position="absolute 15 9 113 29" tooltiptype="hover" tooltiptext="개설년도" anchor="default"/>
              <Static id="stc_alrtSvcNm" text="알림서비스명" class="sta_WFSA_Label" position="absolute 333 9 423 29" tooltiptype="hover" tooltiptext="개설학기" anchor="default"/>
              <Static id="stc_alrtWorkClCd" text="알림업무구분" class="sta_WFSA_Label" position="absolute 643 9 733 29" tooltiptype="hover" tooltiptext="대학구분" style="color:#666666ff;" anchor="default"/>
              <Combo id="cbo_alrtWorkClCd" taborder="2" innerdataset="@ds_SCC006" codecolumn="cmCdId" datacolumn="cmCdNm" type="search" position="absolute 731 9 918 29" onkeydown="div_search_cbo_alrtWorkClCd_onkeydown" anchor="default"/>
              <Edit id="edt_alrtSvcNm" taborder="1" position="absolute 420 9 613 29" onkeydown="div_search_edt_alrtSvcNo_onkeydown" imemode="hangul" anchor="default" validate="title:알림서비스명,maxlengthB:150"/>
              <Static id="Static03" text="w&#13;30" class="tip_guide" visible="false" position2="absolute l:303 w:30 t:2 h:42" positiontype="position2"/>
              <Static id="Static05" text="w&#13;30" class="tip_guide" visible="false" position2="absolute l:613 w:30 t:2 h:42" positiontype="position2"/>
              <Static id="Static08" text="w&#13;&#10;&#13;10" class="tip_guide" visible="false" position2="absolute l:105 w:10 t:2 h:42" positiontype="position2"/>
              <Static id="Static09" text="w&#13;&#10;&#13;10" class="tip_guide" visible="false" position2="absolute l:410 w:10 t:0 h:42" positiontype="position2"/>
              <Static id="Static10" text="w&#13;&#10;&#13;10" class="tip_guide" visible="false" position2="absolute l:721 w:10 t:-3 h:42" positiontype="position2"/>
              <Static id="Static12" text="w&#13;&#10;&#13;15" class="tip_guide" visible="false" position2="absolute l:0 w:15 t:10 h:42" positiontype="position2"/>
              <Edit id="edt_alrtSvcNo" taborder="0" position="absolute 115 9 303 29" onkeydown="div_search_edt_alrtSvcNo_onkeydown" inputtype="digit,alpha" anchor="default" maxlength="10" validate="title:알림서비스번호,maxlengthB:10" imemode="alpha"/>
            </Layout>
          </Layouts>
        </Div>
        <Static id="Static13" text="h33" class="tip_guide" visible="false" position2="absolute l:309 w:42 t:40 h:33" positiontype="position2"/>
        <Static id="stc_subTitle00" text="알림서비스" class="sub_title" position="absolute 0 50 267 70"/>
        <Static id="Static00" text="h10" class="tip_guide" visible="false" position2="absolute l:101 w:42 t:0 h:10" positiontype="position2"/>
        <Static id="Static11" text="h10" class="tip_guide" visible="false" position2="absolute l:961 w:42 t:40 h:10" positiontype="position2"/>
        <Static id="Static01" text="h3" class="tip_guide" visible="false" position2="absolute l:961 w:42 t:70 h:3" positiontype="position2"/>
        <Static id="Static02" text="h14" class="tip_guide" visible="false" position2="absolute l:-4 w:42 t:40 h:14" positiontype="position2"/>
        <Static id="Static04" text="h8" class="tip_guide" visible="false" position2="absolute l:-4 w:42 t:65 h:8" positiontype="position2"/>
        <Static id="Static05" text="h25" class="tip_guide" visible="false" position2="absolute l:178 w:42 t:74 h:25" positiontype="position2"/>
        <UserGrid id="grd_alrtSvc" taborder="2" autoenter="select" useinputpanel="false" cellsizingtype="col" cellmovingtype="col" hideendline="col" nodataimage="URL('theme://Img/ico_WFDA_nodata.png')" position="absolute 0 73 1017 356" tooltiptype="hover" _number="false" _status="true" _check="false" _checkColumnName="_checkcol" _checkedallevent="false" _nodataimage="true" _required="" _requiredimage="false" _sort="true" _tooltip="true" binddataset="ds_alrtsvc" autofittype="none" readonly="true" onvtracklast="grd_alrtSvc_onvtracklast" treeuseimage="false" anchor="all" style="background:#ffffffff;border:1 solid #4a5daaff,1 solid #e4e4e4ff,1 solid #e4e4e4ff,1 solid #e4e4e4ff;color:#000000ff;" oncellclick="grd_alrtSvc_oncellclick" cellsizebandtype="noleft">
          <Formats>
            <Format id="default">
              <Columns>
                <Column size="120"/>
                <Column size="120"/>
                <Column size="120"/>
                <Column size="120"/>
                <Column size="120"/>
                <Column size="300"/>
                <Column size="120"/>
                <Column size="120"/>
                <Column size="74"/>
              </Columns>
              <Rows>
                <Row size="24" band="head"/>
                <Row size="24"/>
              </Rows>
              <Band id="head">
                <Cell text="알림서비스번호"/>
                <Cell col="1" text="알림서비스명"/>
                <Cell col="2" text="알림업무구분"/>
                <Cell col="3" text="수신동의적용여부"/>
                <Cell col="4" text="알림제목"/>
                <Cell col="5" text="알림메시지"/>
                <Cell col="6" text="회신전화번호"/>
                <Cell col="7" text="회신이메일주소"/>
                <Cell col="8" text="사용여부"/>
              </Band>
              <Band id="body">
                <Cell displaytype="text" text="bind:alrtSvcNo"/>
                <Cell col="1" displaytype="text" style="align:left;" text="bind:alrtSvcNm"/>
                <Cell col="2" displaytype="combo" text="bind:alrtWorkClCd" combodataset="ds_SCC006" combocodecol="cmCdId" combodatacol="cmCdNm"/>
                <Cell col="3" displaytype="checkbox" text="bind:retnAgrAplyYn"/>
                <Cell col="4" displaytype="text" style="align:left;" text="bind:alrtTiteNm"/>
                <Cell col="5" displaytype="text" style="align:left;" text="bind:alrtMsgCtt"/>
                <Cell col="6" displaytype="text" text="bind:answTelNo"/>
                <Cell col="7" displaytype="text" text="bind:answEmlAddr"/>
                <Cell col="8" displaytype="checkbox" text="bind:useYn"/>
              </Band>
            </Format>
          </Formats>
        </UserGrid>
        <Div id="Div01" anchor="left bottom" taborder="7" class="bg_detail" position="absolute 0 389 1017 528">
          <Layouts>
            <Layout width="649" height="208">
              <Static id="stc_alrtSvcNo" text="알림서비스번호" class="sta_WFDA_detail_Label_P" position="absolute 20 10 116 30" anchor="default"/>
              <Edit id="edt_alrtSvcNo" taborder="0" position="absolute 135 10 339 30" validate="title:알림서비스번호,required:true,maxlengthB:10" anchor="default" maxlength="10" enable="true" readonly="true" inputtype="digit,alpha" imemode="alpha"/>
              <Static id="Static02" text="W10" class="guideTip" visible="false" position2="absolute l:125 w:10 t:4 h:179" positiontype="position2"/>
              <Static id="stc_alrtSvcNm" text="알림서비스명" class="sta_WFDA_detail_Label_P" position="absolute 369 9 465 29" anchor="default"/>
              <Static id="stc_alrtWorkClCd" text="알림업무구분" class="sta_WFDA_detail_Label_P" position="absolute 705 9 801 29" anchor="default"/>
              <Edit id="edt_alrtSvcNm" taborder="1" position="absolute 459 10 675 30" validate="title:알림서비스명,required:true,maxlengthB:150" anchor="default" maxlength="150"/>
              <Static id="Static05" text="w&#13;30" class="tip_guide" visible="false" position2="absolute l:339 w:30 t:-22 h:131" positiontype="position2"/>
              <Static id="stc_alrtTitNm" text="알림제목" class="sta_WFDA_detail_Label" position="absolute 20 58 116 78" anchor="default"/>
              <Static id="stc_alrtMsg" text="알림메세지" class="sta_WFDA_detail_Label_P" position="absolute 20 82 116 102" anchor="default"/>
              <Static id="stc_answTelNo" text="회신전화번호" class="sta_WFDA_detail_Label_P" position="absolute 705 58 801 78" anchor="default"/>
              <Edit id="edt_alrtTitNm" taborder="6" position="absolute 135 58 351 78" anchor="default" maxlength="40" validate="title:알림제목,maxlengthB:500"/>
              <MaskEdit id="MaskEdit01" taborder="9" type="string" position="absolute 808 58 971 78" style="align:left middle;" anchor="default" validate="title:회신전화번호,required:true,maxlengthB:11" onkillfocus="Div01_MaskEdit01_onkillfocus" onsetfocus="Div01_MaskEdit01_onsetfocus"/>
              <Static id="stc_answEmlAddr" text="회신이메일주소" class="sta_WFDA_detail_Label_P" position="absolute 705 34 801 54" anchor="default"/>
              <Static id="Static13" text="h4" class="tip_guide" visible="false" position2="absolute l:122 w:818 t:30 h:4" positiontype="position2"/>
              <Edit id="edt_answEmlAddr" taborder="10" maxlength="100" position="absolute 808 34 971 54" validate="title:이메일주소,required:true,maxlengthB:200" anchor="default"/>
              <Static id="stc_rtnAgrAplyYn" text="수신동의적용여부" class="sta_WFDA_detail_Label_P" position="absolute 20 34 130 54" anchor="default"/>
              <Static id="Static03" text="h10" class="tip_guide" visible="false" position2="absolute l:109 w:42 t:127 h:10" positiontype="position2"/>
              <Combo id="cbo__alrtWorkClCd" taborder="2" innerdataset="@ds_SCC006N" codecolumn="cmCdId" datacolumn="cmCdNm" type="dropdown" position="absolute 808 10 995 30" validate="title:알림업무구분코드,required:true" anchor="default"/>
              <Radio id="rdo_rtnAgrAplyYn" taborder="3" columncount="2" rowcount="0" index="0" codecolumn="codecolumn" datacolumn="datacolumn" value="1" direction="vertical" position="absolute 135 34 276 56" validate="title:수신동의정용여부,required:true" anchor="default">
                <Dataset id="innerdataset">
                  <ColumnInfo>
                    <Column id="codecolumn" size="256"/>
                    <Column id="datacolumn" size="256"/>
                  </ColumnInfo>
                  <Rows>
                    <Row>
                      <Col id="codecolumn">1</Col>
                      <Col id="datacolumn">적용</Col>
                    </Row>
                    <Row>
                      <Col id="codecolumn">0</Col>
                      <Col id="datacolumn">미적용</Col>
                    </Row>
                  </Rows>
                </Dataset>
              </Radio>
              <Static id="Static16" text="w20" class="guideTip" visible="false" position2="absolute l:0 w:20 t:-2 h:307" positiontype="position2"/>
              <Static id="Static04" text="w20" class="guideTip" visible="false" position2="absolute l:995 w:20 t:-4 h:307" positiontype="position2"/>
              <Static id="stc_useYn" text="사용여부" class="sta_WFDA_detail_Label_P" position="absolute 371 34 449 54" anchor="default"/>
              <Radio id="rdo_useYn" taborder="7" columncount="2" rowcount="0" index="0" codecolumn="codecolumn" datacolumn="datacolumn" value="1" direction="vertical" position="absolute 459 34 600 56" validate="title:사용여부,required:true" anchor="default">
                <Dataset id="innerdataset">
                  <ColumnInfo>
                    <Column id="codecolumn" size="256"/>
                    <Column id="datacolumn" size="256"/>
                  </ColumnInfo>
                  <Rows>
                    <Row>
                      <Col id="codecolumn">1</Col>
                      <Col id="datacolumn">사용</Col>
                    </Row>
                    <Row>
                      <Col id="codecolumn">0</Col>
                      <Col id="datacolumn">중지</Col>
                    </Row>
                  </Rows>
                </Dataset>
              </Radio>
              <TextArea id="TextArea00" taborder="11" scrollbars="none" wordwrap="word" oneditclick="Div01_TextArea00_oneditclick" position="absolute 135 82 649 127" validate="title:알림메시지,required:true,maxlengthB:4000" anchor="default">
                <Layouts>
                  <Layout width="514" height="49"/>
                </Layouts>
              </TextArea>
              <Static id="Static01" text="h10" class="tip_guide" visible="false" position2="absolute l:114 w:42 t:0 h:10" positiontype="position2"/>
              <Static id="Static06" text="W10" class="guideTip" visible="false" position2="absolute l:449 w:10 t:-1 h:179" positiontype="position2"/>
              <Static id="Static07" text="w&#13;30" class="tip_guide" visible="false" position2="absolute l:675 w:30 t:-14 h:131" positiontype="position2"/>
              <Static id="Static08" text="W10" class="guideTip" visible="false" position2="absolute l:798 w:10 t:-1 h:179" positiontype="position2"/>
              <Static id="Static09" text="h4" class="tip_guide" visible="false" position2="absolute l:121 w:818 t:54 h:4" positiontype="position2"/>
              <Static id="Static00" text="h4" class="tip_guide" visible="false" position2="absolute l:121 w:818 t:78 h:4" positiontype="position2"/>
            </Layout>
          </Layouts>
        </Div>
        <Static id="Static09" text="w&#13;&#10;&#13;10" class="tip_guide" visible="false" anchor="all" position="absolute 601 505 611 531" positiontype="position"/>
        <Static id="Static08" text="h8" class="tip_guide" visible="false" position2="absolute l:0 w:42 t:382 h:8" positiontype="position2"/>
        <Static id="Static10" text="h14" class="tip_guide" visible="false" position2="absolute l:2 w:42 t:355 h:14" positiontype="position2"/>
        <Static id="Static12" text="h33" class="tip_guide" visible="false" position2="absolute l:307 w:42 t:356 h:33" positiontype="position2"/>
        <Button id="btn_filter" taborder="12" onclick="btn_filter_onclick" class="btn_common_filter" position="absolute 972 50 994 70" anchor="top right" tooltiptext="필터"/>
        <Button id="btn_excel" taborder="13" onclick="btn_excel_onclick" class="btn_common_excel" position="absolute 995 50 1017 70" anchor="top right" tooltiptext="액셀출력"/>
        <Button id="btn_search" taborder="17" text="조회" onclick="btn_search_onclick" class="btn_WFSA_Search_M" position="absolute 958 13 1016 40" anchor="top right" style="align:center middle;"/>
        <Static id="Static07" text="h10" class="tip_guide" visible="false" position2="absolute l:101 w:42 t:30 h:10" positiontype="position2"/>
        <Button id="btn_save" taborder="18" text="저장" onclick="btn_save_onclick" class="btn_common_saveTxt" position="absolute 968 366 1017 386" tooltiptext="저장" anchor="right bottom"/>
        <Button id="btn_new" taborder="19" text="신규" onclick="Div00_btn_new_onclick" class="btn_common_addTxt" position="absolute 918 366 967 386" anchor="right bottom"/>
        <Button id="btn_reset" taborder="20" text="리셋" onclick="btn_reset_onclick" class="btn_common_resetTxt" position="absolute 868 366 917 386" tooltiptext="초기화" anchor="right bottom"/>
      </Layout>
    </Layouts>
    <Objects>
      <Dataset id="ds_alrtsvc" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false" canrowposchange="ds_alrtsvc_canrowposchange">
        <ColumnInfo>
          <Column id="alrtSvcNo" type="STRING" size="256"/>
          <Column id="alrtSvcNm" type="STRING" size="256"/>
          <Column id="alrtWorkClCd" type="STRING" size="256"/>
          <Column id="alrtChnlClCd" type="STRING" size="256"/>
          <Column id="alrtConsClCd" type="STRING" size="256"/>
          <Column id="retnAgrAplyYn" type="STRING" size="256"/>
          <Column id="alrtTiteNm" type="STRING" size="256"/>
          <Column id="alrtMsgCtt" type="STRING" size="4000"/>
          <Column id="answTelNo" type="STRING" size="256"/>
          <Column id="answEmlAddr" type="STRING" size="256"/>
          <Column id="useYn" type="STRING" size="256"/>
          <Column id="fsRegUserId" type="STRING" size="256"/>
          <Column id="fsRegDtm" type="STRING" size="256"/>
          <Column id="lsChgUserId" type="STRING" size="256"/>
          <Column id="lsChgDtm" type="STRING" size="256"/>
          <Column id="answTelNoEnpt" type="STRING" size="256"/>
          <Column id="answEmlAddrEnpt" type="STRING" size="256"/>
          <Column id="answTelNoBefore" type="STRING" size="256"/>
          <Column id="answEmlAddrBefore" type="STRING" size="256"/>
          <Column id="answTelNoChangeYn" type="STRING" size="256"/>
          <Column id="answEmlAddrChangeYn" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows/>
      </Dataset>
      <Dataset id="ds_SCC006" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="cmCdId" type="STRING" size="256"/>
          <Column id="cmCdNm" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_SCC007" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="cmCdId" type="STRING" size="256"/>
          <Column id="cmCdNm" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_SCC008" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="cmCdId" type="STRING" size="256"/>
          <Column id="cmCdNm" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_ncFieldMap" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="alrtSvcNo" type="STRING" size="256"/>
          <Column id="alrtSvcNm" type="STRING" size="256"/>
          <Column id="mbrsCd" type="STRING" size="256"/>
          <Column id="alrtWorkClCd" type="STRING" size="256"/>
          <Column id="alrtChnlClCd" type="STRING" size="256"/>
          <Column id="alrtConsClCd" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows>
          <Row/>
        </Rows>
      </Dataset>
      <Dataset id="ds_reqbrnd" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="alrtSvcNo" type="STRING" size="256"/>
          <Column id="alrtSno" type="STRING" size="256"/>
          <Column id="reqBrndCd" type="STRING" size="256"/>
          <Column id="useYn" type="STRING" size="256"/>
          <Column id="fsRegUserId" type="STRING" size="256"/>
          <Column id="fsRegDtm" type="STRING" size="256"/>
          <Column id="lsChgUserId" type="STRING" size="256"/>
          <Column id="lsChgDtm" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_reqbrndTemp" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="alrtSvcNo" type="STRING" size="256"/>
          <Column id="alrtSno" type="STRING" size="256"/>
          <Column id="reqBrndCd" type="STRING" size="256"/>
          <Column id="useYn" type="STRING" size="256"/>
          <Column id="fsRegUserId" type="STRING" size="256"/>
          <Column id="fsRegDtm" type="STRING" size="256"/>
          <Column id="lsChgUserId" type="STRING" size="256"/>
          <Column id="lsChgDtm" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_alrtsvcTemp" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false" canrowposchange="ds_alrtsvc_canrowposchange">
        <ColumnInfo>
          <Column id="alrtSvcNo" type="STRING" size="256"/>
          <Column id="alrtSvcNm" type="STRING" size="256"/>
          <Column id="alrtWorkClCd" type="STRING" size="256"/>
          <Column id="alrtChnlClCd" type="STRING" size="256"/>
          <Column id="alrtConsClCd" type="STRING" size="256"/>
          <Column id="retnAgrAplyYn" type="STRING" size="256"/>
          <Column id="alrtTiteNm" type="STRING" size="256"/>
          <Column id="alrtMsgCtt" type="STRING" size="4000"/>
          <Column id="answTelNo" type="STRING" size="256"/>
          <Column id="answEmlAddr" type="STRING" size="256"/>
          <Column id="useYn" type="STRING" size="256"/>
          <Column id="fsRegUserId" type="STRING" size="256"/>
          <Column id="fsRegDtm" type="STRING" size="256"/>
          <Column id="lsChgUserId" type="STRING" size="256"/>
          <Column id="lsChgDtm" type="STRING" size="256"/>
          <Column id="answTelNoEnpt" type="STRING" size="256"/>
          <Column id="answEmlAddrEnpt" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_SCC006N" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="cmCdId" type="STRING" size="256"/>
          <Column id="cmCdNm" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_SCC007N" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="cmCdId" type="STRING" size="256"/>
          <Column id="cmCdNm" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_SCC008N" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="cmCdId" type="STRING" size="256"/>
          <Column id="cmCdNm" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_svcno" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="alrtSvcNo" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows>
          <Row/>
        </Rows>
      </Dataset>
      <Dataset id="ds_reqbrndVD" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="alrtSvcNo" type="STRING" size="256"/>
          <Column id="alrtSno" type="STRING" size="256"/>
          <Column id="reqBrndCd" type="STRING" size="256"/>
          <Column id="useYn" type="STRING" size="256"/>
          <Column id="fsRegUserId" type="STRING" size="256"/>
          <Column id="fsRegDtm" type="STRING" size="256"/>
          <Column id="lsChgUserId" type="STRING" size="256"/>
          <Column id="lsChgDtm" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows>
          <Row>
            <Col id="reqBrndCd">title:요청브랜드코드,maxlengthB:4</Col>
            <Col id="useYn"/>
          </Row>
        </Rows>
      </Dataset>
      <Dataset id="ds_gridMenuList" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="menuLevel" type="STRING" size="256"/>
          <Column id="menuNm" type="STRING" size="256"/>
          <Column id="menuId" type="STRING" size="256"/>
          <Column id="functionId" type="STRING" size="256"/>
          <Column id="enableYn" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows>
          <Row>
            <Col id="menuNm">리셋</Col>
            <Col id="menuLevel">0</Col>
            <Col id="menuId">btn_reset00</Col>
            <Col id="functionId">btn_reset_onclick</Col>
            <Col id="enableYn">Y</Col>
          </Row>
          <Row>
            <Col id="menuNm">신규</Col>
            <Col id="menuLevel">0</Col>
            <Col id="menuId">btn_insert</Col>
            <Col id="functionId">btn_insert_onclick</Col>
            <Col id="enableYn">Y</Col>
          </Row>
          <Row>
            <Col id="menuLevel">0</Col>
            <Col id="menuNm">삭제</Col>
            <Col id="menuId">btn_delete</Col>
            <Col id="functionId">btn_delete_onclick</Col>
            <Col id="enableYn">Y</Col>
          </Row>
          <Row>
            <Col id="menuLevel">0</Col>
            <Col id="menuNm">저장</Col>
            <Col id="menuId">btn_save00</Col>
            <Col id="functionId">btn_save_onclick</Col>
            <Col id="enableYn">Y</Col>
          </Row>
        </Rows>
      </Dataset>
    </Objects>
    <Bind>
      <BindItem id="item0" compid="div_search.edt_alrtSvcNo" propid="value" datasetid="ds_ncFieldMap" columnid="alrtSvcNo"/>
      <BindItem id="item1" compid="div_search.edt_alrtSvcNm" propid="value" datasetid="ds_ncFieldMap" columnid="alrtSvcNm"/>
      <BindItem id="item3" compid="div_search.cbo_alrtWorkClCd" propid="value" datasetid="ds_ncFieldMap" columnid="alrtWorkClCd"/>
      <BindItem id="item6" compid="Div01.edt_answEmlAddr" propid="value" datasetid="ds_alrtsvc" columnid="answEmlAddr"/>
      <BindItem id="item7" compid="Div01.cbo__alrtWorkClCd" propid="value" datasetid="ds_alrtsvc" columnid="alrtWorkClCd"/>
      <BindItem id="item8" compid="Div01.rdo_rtnAgrAplyYn" propid="value" datasetid="ds_alrtsvc" columnid="retnAgrAplyYn"/>
      <BindItem id="item11" compid="Div01.edt_alrtSvcNo" propid="value" datasetid="ds_alrtsvc" columnid="alrtSvcNo"/>
      <BindItem id="item12" compid="Div01.edt_alrtSvcNm" propid="value" datasetid="ds_alrtsvc" columnid="alrtSvcNm"/>
      <BindItem id="item14" compid="Div01.edt_alrtTitNm" propid="value" datasetid="ds_alrtsvc" columnid="alrtTiteNm"/>
      <BindItem id="item16" compid="Div01.MaskEdit01" propid="value" datasetid="ds_alrtsvc" columnid="answTelNo"/>
      <BindItem id="item2" compid="Div01.rdo_useYn" propid="value" datasetid="ds_alrtsvc" columnid="useYn"/>
      <BindItem id="item13" compid="Div01.TextArea00" propid="value" datasetid="ds_alrtsvc" columnid="alrtMsgCtt"/>
    </Bind>
    <Script type="xscript4.0"><![CDATA[/*
 * 01. 업무구분 : 공통
 * 02. 화면 : AlrtSvcMgmt.xfdl
 * 03. 화면 설명 : 알림서비스관리
 * 04. 관련 화면/서비스 : 
 * 05. 작성자 : 이지은
 * 06. 작성일 : 2014.09.22
 * 07. 수정이력 :
 ************************************************************************************************
 *     수정일        이  름    사유
 ************************************************************************************************
 *     2014.09.22    이지은    최초 작성
 ************************************************************************************************
 */
 
/*===============================================================================================
 * [ PART 1 ] Form에서 Include 할 라이브러리(xjs)파일 정의
================================================================================================*/
include "LIB::common.xjs"; //공통함수 호출

/*===============================================================================================
 * [ PART 2 ] Form에서 사용될 전역변수를 선언
================================================================================================*/
var alrtsvcpage = 1;
var alrtsvcpgsize = 30;
var reqbrndpage = 1;
var reqbrndpgsize = 20;
var alrtsvctotcnt = 0 ;
var reqbrndtotcnt = 0 ;
var pv_sPtrn = "";
/*===============================================================================================
 * [ PART 3 ] Form Event 처리
================================================================================================*/
/*----------------------------------------------------------------------------------------------
 * 설명   : Form Load Event
-----------------------------------------------------------------------------------------------*/
function Form_onload(obj:Form, e:LoadEventInfo)
{
	//공통 Form 초기화
	gfn_setInitForm(obj, e, "FRM0022M")
	
 	//Form 초기 개발자 셋팅
 	//공통코드 초기화
 	fn_setInitCode(obj, e);
 	//그리드 초기화
 	fn_setInitGrid(obj, e);
 	//기본값 초기화
 	fn_setInitForm(obj, e);
}

/*----------------------------------------------------------------------------------------------
 * 설명   : Form 종료전 Check 함수(공통)
-----------------------------------------------------------------------------------------------*/
function Form_checkBeforeClose()
{
	//변경된 Dataset검증
	if ( gfn_formBeforeOnClose(this, "ds_alrtsvc") && gfn_formBeforeOnClose(this, "ds_reqbrnd") ) {
		return true;
	} else {
		return false;
	}
}

/*===============================================================================================
 * [ PART 4 ] Load 후 초기설정
================================================================================================*/
/*----------------------------------------------------------------------------------------------
 * 설명   : 공통코드 초기화
-----------------------------------------------------------------------------------------------*/
function fn_setInitCode(obj:Form, e:LoadEventInfo)
{
	var strCode = "SCC006=ds_SCC006=A";
		strCode += ",SCC007=ds_SCC007=A";
		strCode += ",SCC008=ds_SCC008=A";
		strCode += ",SCC006=ds_SCC006N=N";
		strCode += ",SCC007=ds_SCC007N=N";
		strCode += ",SCC008=ds_SCC008N=N";
	gfn_getCodeDs( this
				  , strCode
				  ,"fn_afterCodeCallBack");				//결과 받을 function	
}

/*----------------------------------------------------------------------------------------------
 * 설명   : 공통코드 호출 후 처리
-----------------------------------------------------------------------------------------------*/
function fn_afterCodeCallBack()
{		  	
	div_search.cbo_alrtWorkClCd.index = 0;
	div_search.cbo_alrtChnlClCd.index = 0;
	div_search.cbo_alrtConsClCd.index = 0;
}    

/*----------------------------------------------------------------------------------------------
 * 설명   : 그리드 초기화
-----------------------------------------------------------------------------------------------*/
function fn_setInitGrid(obj:Form, e:LoadEventInfo)
{
	// 그리드 초기화 
	//gfn_initGrid(grd_main, bReadonly, bSortable, bTooltip, sSelectType, innerDs);
	gfn_initGrid(grd_reqBrnd, false, true, true, "row", "ds_gridMenuList");
}

/*----------------------------------------------------------------------------------------------
 * 설명   : 기본값 설정
-----------------------------------------------------------------------------------------------*/
function fn_setInitForm(obj:Form, e:LoadEventInfo)
{
	div_search.edt_alrtSvcNo.setFocus();
	page = 1;
	page_size = 50;
}

/*===============================================================================================
 * [ PART 5 ] Transaction 처리
================================================================================================*/
/*----------------------------------------------------------------------------------------------
 * 설명   : 메인조회
 * param   : 
 * return  : void
-----------------------------------------------------------------------------------------------*/
function fn_searchMain()
{
	page = alrtsvcpage;
	page_size = alrtsvcpgsize;	
	var sSvcID		 = "searchMain";
	var sTrID		 = "PBSSCAlrtSvcMgmt_pInqAlrtSvcLst";
	var sPtrn		 = "R";  //입력C,조회R,수정U,삭제D,복합M
	var sInputDs	 = "ncFieldMap=ds_ncFieldMap";
	var sOutputDs	 = "ds_alrtsvcTemp=rsAlrtSvcList";
	var sArgs		 = "";
	var sCallBackFnc = "fn_callBack";
	
	
	gfn_transaction(sSvcID, sTrID, sPtrn, sInputDs, sOutputDs, sArgs, sCallBackFnc);
}

/*----------------------------------------------------------------------------------------------
 * 설명   : 메인저장 (insert, update)
 * param   : 
 * return  : void
-----------------------------------------------------------------------------------------------*/
function fn_saveMain()
{
	var sSvcID		 = "saveMain";
	var sTrID		 = "PBSSCAlrtSvcMgmt_pSaveAlrtSvc";
	var sPtrn		 = ds_alrtsvc.getRowType(ds_alrtsvc.rowposition) == Dataset.ROWTYPE_INSERT? "I" : "U";  //입력C,조회R,수정U,삭제D,복합M
	var sInputDs	 = "rsAlrtSvcList=ds_alrtsvc:u" ;
	var sOutputDs	 = "";
	var sArgs		 = "";
	var sCallBackFnc = "fn_callBack";
	pv_sPtrn         = sPtrn;  // 저장Type을 전역변수로 저장
	
	gfn_transaction(sSvcID, sTrID, sPtrn, sInputDs, sOutputDs, sArgs, sCallBackFnc);
}
/*----------------------------------------------------------------------------------------------
 * 설명   : 요청브랜드 메인조회
 * param   : 
 * return  : void
-----------------------------------------------------------------------------------------------*/
function fn_searchMain2()
{
	page = reqbrndpage;
	page_size = reqbrndpgsize;	
	var sSvcID		 = "searchMain2";
	var sTrID		 = "PBSSCAlrtSvcMgmt_pInqAlrtReqBrndLst";
	var sPtrn		 = "R";  //입력C,조회R,수정U,삭제D,복합M
	var sInputDs	 = "ncFieldMap=ds_svcno";
	var sOutputDs	 = "ds_reqbrndTemp=rsReqBrnList";
	var sArgs		 = "";
	var sCallBackFnc = "fn_callBack";

	gfn_transaction(sSvcID, sTrID, sPtrn, sInputDs, sOutputDs, sArgs, sCallBackFnc);
}
/*----------------------------------------------------------------------------------------------
 * 설명   : 요청브랜드 메인저장 (insert, update, delete)
 * param   : 
 * return  : void
-----------------------------------------------------------------------------------------------*/
function fn_saveMain2()
{	
	var sSvcID		 = "saveMain2";
	var sTrID		 = "PBSSCAlrtSvcMgmt_pSaveAlrtReqBrnd";
	var sPtrn		 = "M";  //입력C,조회R,수정U,삭제D,복합M
	var sInputDs	 = "rsReqBrnList=ds_reqbrnd:u";
	var sOutputDs	 = "";
	var sArgs		 = "";
	var sCallBackFnc = "fn_callBack";
	
	gfn_transaction(sSvcID, sTrID, sPtrn, sInputDs, sOutputDs, sArgs, sCallBackFnc);
}

/*===============================================================================================
 * [ PART 6 ] CallBack 처리   
================================================================================================*/
/*----------------------------------------------------------------------------------------------
 * 설명   : Transaction CallBack
 * param   : sSvcID, iErrorCode, sErrorMsg(ncMsgId,ncMsg)
 * return  : void
-----------------------------------------------------------------------------------------------*/
function fn_callBack(sSvcID, iErrorCode, sErrorMsg, ncMsgId, ncMsg)
{
 	switch(sSvcID) {
		case "searchMain" : 
		    Div01_cbo_alrtChnlClCd_onitemchanged();
			//페이징 관련셋팅(알림서비스상세)
			ds_alrtsvc.appendData(ds_alrtsvcTemp, true);
			ds_alrtsvc.rowposition = (alrtsvcpage-1)*alrtsvcpgsize;
			Div01.edt_alrtSvcNo.readonly = true;
			
			//2015.02.03 암호화 이메일, 전화번호 변경여부 컬럼 추가 
			ds_alrtsvc.addColumn( "answTelNoChangeYn", "string" );
			ds_alrtsvc.addColumn( "answEmlAddrChangeYn", "string" );
						
			if(gfn_isEmpty(ds_alrtsvcTemp.getColumn(ds_alrtsvcTemp.rowposition, "alrtSvcNo"))){
				gfn_setGridTitleCountPaging(stc_subTitle00, 0);
				//알림서비스 조회 0건 인경우, 알림서비스요청브랜드 리셋
				ds_reqbrnd.clear();
				gfn_setGridTitleCountPaging(stc_subTitle02, 0 ) ;
			}else{
				gfn_setGridTitleCountPaging(stc_subTitle00, total_record_cnt);
				grd_alrtSvc_oncellclick(grd_alrtSvc);
			}
						
			alrtsvctotcnt = total_record_cnt ;
			div_search.edt_alrtSvcNo.setFocus();
					
			
			break;
		case "saveMain" : 
			if ( iErrorCode == 0 ) {
				gfn_message("A","HPC00001","I");	//MSGI0001 : 정상 처리되었습니다.
				if (pv_sPtrn == "I") {		// 신규등록일 경우에만 재조회
					ds_ncFieldMap.setColumn(0,"alrtSvcNo", ds_alrtsvc.getColumn(ds_alrtsvc.rowposition,"alrtSvcNo"));
					ds_ncFieldMap.setColumn(0,"alrtSvcNm", ds_alrtsvc.getColumn(ds_alrtsvc.rowposition,"alrtSvcNm"));
					ds_ncFieldMap.setColumn(0,"alrtWorkClCd", ds_alrtsvc.getColumn(ds_alrtsvc.rowposition,"alrtWorkClCd"));
					ds_ncFieldMap.setColumn(0,"alrtChnlClCd", ds_alrtsvc.getColumn(ds_alrtsvc.rowposition,"alrtChnlClCd"));
					ds_ncFieldMap.setColumn(0,"alrtConsClCd", ds_alrtsvc.getColumn(ds_alrtsvc.rowposition,"alrtConsClCd"));
					btn_search_onclick();
				}
				//btn_search_onclick();
				Div01.edt_alrtSvcNo.readonly = true;
				
				btn_reset00.enable = true;
				btn_insert.enable = true;
				btn_delete.enable = true;
				btn_save00.enable = true;
			}
			break;
		case "searchMain2" : 
			//페이징 관련셋팅(알림서비스요청브랜드)
			ds_reqbrnd.appendData(ds_reqbrndTemp, true);
			fn_titleCountPaging();
			fn_cbo_alrtConsClCd_Change();
			break;
		case "saveMain2" : 
			if ( iErrorCode == 0 ) {
				gfn_message("A","HPC00001","I");	//MSGI0001 : 정상 처리되었습니다.
				ds_reqbrnd.clearData();
				fn_searchMain2();
			}
			break;
		default :
			break;
	}
}

/*===============================================================================================
 * [ PART 7 ] Main Button Event
================================================================================================*/
/*----------------------------------------------------------------------------------------------
 * 설명   : search
-----------------------------------------------------------------------------------------------*/
function btn_search_onclick(obj:Button,  e:ClickEventInfo)
{
	// 입력 항목 Validate Check
	if (!gfn_getValidateCompList(div_search)) {	
		return false;
	}
	ds_alrtsvc.clearData();
	alrtsvcpage = 1;
	fn_searchMain();
}

/*----------------------------------------------------------------------------------------------
 * 설명   : reset
-----------------------------------------------------------------------------------------------*/
function btn_reset_onclick(obj:Button,  e:ClickEventInfo)
{
	switch(obj) {
		case Div00.btn_reset :  //알림서비스상세 리셋
		if ( ds_alrtsvc.rowposition != -1 && ds_alrtsvc.getRowType(ds_alrtsvc.rowposition) != Dataset.ROWTYPE_NORMAL) {		
			if (gfn_message("C","HPC00016","Q")){ //편집중인 데이터가 있습니다. 계속하시겠습니까?
				ds_alrtsvc.reset();
				Div01.edt_alrtSvcNo.readonly = true;
			}
		}
		break;
		case btn_reset00 : // 알림서비스요청브랜드 리셋
		if ( ds_reqbrnd.rowposition != -1 && ds_reqbrnd.getRowType(ds_reqbrnd.rowposition) != Dataset.ROWTYPE_NORMAL) {		
			if (gfn_message("C","HPC00016","Q")){ //편집중인 데이터가 있습니다. 계속하시겠습니까?
				ds_reqbrnd.reset();
				Div01.edt_alrtSvcNo.readonly = true;
			}
		}
		break;
		default :
		break;
	}	
}

/*----------------------------------------------------------------------------------------------                                                                
 * 설명   : new (신규입력)                                                                                                                             
-----------------------------------------------------------------------------------------------*/                                                               
function Div00_btn_new_onclick(obj:Button,  e:ClickEventInfo)       
{
	if ( ds_alrtsvc.rowposition != -1 && ds_alrtsvc.getRowType(ds_alrtsvc.rowposition) != Dataset.ROWTYPE_NORMAL) {		
		if (gfn_message("C","HPC00016","Q")){ //편집중인 데이터가 있습니다. 계속하시겠습니까?
			ds_alrtsvc.reset();
			var row = ds_alrtsvc.addRow();
			fn_chk_alrtsvcNo();
		}
	} else {
		var row = ds_alrtsvc.addRow();
		fn_chk_alrtsvcNo();
	}
	Div01.edt_alrtSvcNo.setFocus();
}
function fn_chk_alrtsvcNo(){
	if ( ds_alrtsvc.getRowType(grd_alrtSvc.currentrow) != Dataset.ROWTYPE_NORMAL ){		
		Div01.edt_alrtSvcNo.readonly = false;
		//신규등록시 알림서비스요청브랜드 버튼 disable
		if(gfn_isEmpty(Div01.edt_alrtSvcNo.value)){
			btn_reset00.enable = false;
			btn_insert.enable = false;
			btn_delete.enable = false;
			btn_save00.enable = false;
		}else{
			btn_reset00.enable = true;
			btn_insert.enable = true;
			btn_delete.enable = true;
			btn_save00.enable = true;
		}
		Div01.rdo_useYn.value =1;
		Div01.rdo_rtnAgrAplyYn.value = 1;
		Div01.edt_alrtSvcNo.setFocus();
	}
}

/*----------------------------------------------------------------------------------------------
 * 설명   : save
-----------------------------------------------------------------------------------------------*/
function btn_save_onclick(obj:Button,  e:ClickEventInfo)
{
	switch(obj) {
		case Div00.btn_save :
		
		//알림서비스 상세
			if ( fn_chkBeforeSave() ) {fn_saveMain()};
			break;
		case btn_save00 :
		//알림서비스요청브랜드
			if ( fn_chkBeforeSave2() ) {fn_saveMain2()};
			break;
		default :
			break;
	}
}

/*----------------------------------------------------------------------------------------------
 * 설명   : insert
-----------------------------------------------------------------------------------------------*/
function btn_insert_onclick(obj:Button,  e:ClickEventInfo)
{
	var row = ds_reqbrnd.addRow();
	var svcno = ds_svcno.getColumn(0, "alrtSvcNo");
	ds_reqbrnd.setColumn(row,"alrtSvcNo", svcno);
}

/*----------------------------------------------------------------------------------------------
 * 설명   : delete
-----------------------------------------------------------------------------------------------*/
function btn_delete_onclick(obj:Button,  e:ClickEventInfo)
{
	ds_reqbrnd.deleteRow(ds_reqbrnd.rowposition);
}

/*----------------------------------------------------------------------------------------------
 * 설명   : grid filter
-----------------------------------------------------------------------------------------------*/
function btn_filter_onclick(obj:Button,  e:ClickEventInfo)
{
	gfn_toggleGridFilter(grd_alrtSvc);
}

/*----------------------------------------------------------------------------------------------
 * 설명   : grid excel
-----------------------------------------------------------------------------------------------*/
function btn_excel_onclick(obj:Button,  e:ClickEventInfo)
{
	if (grd_alrtSvc.rowcount == 0){
		gfn_message("A","HPC00019","I"); //조회된 정보가 없습니다.
	} else {
		gfn_baseExcelExpert(grd_alrtSvc,"알림서비스목록","알림서비스목록");
	}
}


/*===============================================================================================
 * [ PART 8 ] Event
================================================================================================*/
/*----------------------------------------------------------------------------------------------
 * 설명   : 조회조건에서 엔터키가 눌러졌을때 조회
-----------------------------------------------------------------------------------------------*/
function div_search_edt_alrtSvcNo_onkeydown(obj:Edit, e:KeyEventInfo)
{
	if (e.keycode == KEYCODE_ENTER) {
		btn_search.setFocus();
		btn_search_onclick();
	}	
}

function div_search_cbo_alrtWorkClCd_onkeydown(obj:Combo, e:KeyEventInfo)
{
	if (e.keycode == KEYCODE_ENTER) {
		btn_search.setFocus();
		btn_search_onclick();
	}	
}


/*----------------------------------------------------------------------------------------------
 * 설명   : 그리드 요청브랜드코드 팝업버튼 클릭Event  
-----------------------------------------------------------------------------------------------*/

function grd_reqBrnd_onexpanddown(obj:Grid, e:GridMouseEventInfo)
{
	var objBindDs = eval(obj.binddataset);
	var nRowPos   = e.row;
	
	var sParam01 = objBindDs.getColumn(nRowPos,"reqBrndCd");
	var sParam02 = "";
	var arrArgs = {argAutoSelect:true, argCallProgram:"FRM0010M", argParam01:sParam01, argParam02:sParam02};
	var sRtnVal = gfn_dialog("FRM0054P", arrArgs);
	
	if ( gfn_isNull(sRtnVal) || sRtnVal == "cancel" ) {
		//취소시 값 제거
		//objBindDs.setColumn(nRowPos,"col0","");
		//objBindDs.setColumn(nRowPos,"col1","");
		//objBindDs.setColumn(nRowPos,"col2","");
	} else {	//Object이용시
		objBindDs.setColumn(nRowPos,"reqBrndCd",sRtnVal["supBrndCd"]);
		//objBindDs.setColumn(nRowPos,"col1",sRtnVal["supBrndNm"]);
	}
	
}

/*----------------------------------------------------------------------------------------------
 * 설명   : 알림제약구분코드 콤보 선택값에 따른 Event  
-----------------------------------------------------------------------------------------------*/
function Div01_cbo_alrtConsClCd_onitemchanged(obj:Combo, e:ItemChangeEventInfo)
{
	fn_cbo_alrtConsClCd_Change();
}

/*----------------------------------------------------------------------------------------------
 * 설명   : 휴대폰번호 masking 처리 Event
 * param   : 
 * return  : true/false
-----------------------------------------------------------------------------------------------*/
function Div01_MaskEdit01_onkillfocus(obj:MaskEdit, e:KillFocusEventInfo)
{
	Div01.MaskEdit01.class = '';
	///전화번호 masking 처리 onkillfocus Event
	gfn_tel_onkillfocus(obj);
	
}	

function Div01_MaskEdit01_onsetfocus(obj:MaskEdit, e:SetFocusEventInfo)
{
	//전화번호 masking 처리 onsetfocus Event
	gfn_tel_onsetfocus(obj);
}

/*===============================================================================================
 * [ PART 9 ] User Defined
================================================================================================*/
/*----------------------------------------------------------------------------------------------
 * 설명   : 저장전 유효성 검사(알림서비스상세)
 * param   : 
 * return  : true/false
-----------------------------------------------------------------------------------------------*/
function fn_chkBeforeSave()	
{
	//저장전 수정,신규입력데이터의 trim처리 
	gfn_dsTrim(ds_alrtsvc);

	if(!gfn_isUpdated(ds_alrtsvc))//저장할 테이타셋 ds_Save
	{
		gfn_message("A","HPC00020","I");	//변경된 정보가 없습니다.
		return false;
	}	
		
	//휴대번호 유효성체크 
	var idx = ds_alrtsvc.rowposition;
	var sHpNo = ds_alrtsvc.getColumn(idx,"answTelNo");
	var sHpNoBefore = ds_alrtsvc.getColumn(idx,"answTelNoBefore");
		
	if(sHpNo != sHpNoBefore ){			
	  if(!gfn_checkPhone(sHpNo)){
		gfn_message("A","HPC00048","I" );	//휴대전화번호 형식이 맞지 않습니다.
		Div01.MaskEdit01.class = 'Error';
		Div01.MaskEdit01.setFocus();
		return false;
	   } else {
		//2015.02.03 전화번호가 마스킹없이 완전히 수정된 경우에만 DB에 반영하도록 체크컬럼 추가  
			ds_alrtsvc.setColumn(idx,"answTelNoChangeYn","Y");
	   }
	 }
	 
	//이메일 유효성체크 
	var sEmail = ds_alrtsvc.getColumn(idx,"answEmlAddr");
	var sEmailBefore = ds_alrtsvc.getColumn(idx,"answEmlAddrBefore"); 
	 
	//이메일	
	if (sEmail != sEmailBefore ) {
		if(!gfn_isEmail(Div01.edt_answEmlAddr.value)) {
			gfn_message("A","HPC00036","I" );	//이메일 형식이 맞지 않습니다.
			Div01.edt_answEmlAddr.class = 'Error';
			Div01.edt_answEmlAddr.setFocus();
			return false;
		} else {
			//2015.02.03 이메일주소가 마스킹없이 완전히 수정된 경우에만 DB에 반영하도록 체크컬럼 추가  
			ds_alrtsvc.setColumn(idx,"answEmlAddrChangeYn","Y");
		}
	} 
	
	if (!gfn_getValidateCompList(Div01)) {	
		return false;
	}
	
	return true;
}

/*----------------------------------------------------------------------------------------------
 * 설명   : 저장전 유효성 검사(알림서비스요청브랜드)
 * param   : 
 * return  : true/false
-----------------------------------------------------------------------------------------------*/
function fn_chkBeforeSave2()	
{
	if(!gfn_isUpdated(ds_reqbrnd))//저장할 테이타셋 ds_Save
	{
		gfn_message("A","HPC00020","I");	//변경된 정보가 없습니다.
		return false;
	}
	if (!gfn_dsValidCheck(grd_reqBrnd, ds_reqbrndVD)) {	
		return false;
	}
	
	return true;
}

/*----------------------------------------------------------------------------------------------
 * 설명   : 수직 스크롤바가 마지막에 도달했을때 페이지 조회 이벤트
 * param   : obj - Grid Object
 * param   : e  - ScrollEventInfo
 * return  : void
-----------------------------------------------------------------------------------------------*/
function grd_alrtSvc_onvtracklast(obj:Grid, e:ScrollEventInfo)
{
	if ( gfn_isUpdated(ds_alrtsvc) || gfn_isUpdated(ds_reqbrnd)) {
		gfn_message("A","HPC00021","I"); //변경중인 데이터가 있어 페이지 조회를 사용 할 수 없습니다.
		return;
	}
	switch(obj.name) {
		case 'grd_alrtSvc' :
		//알림서비스 상세
			if ( alrtsvctotcnt <=  alrtsvcpage * alrtsvcpgsize ) {
				gfn_message("B","HPC00022","I"); //조회 마지막 페이지 입니다.
				return;		
			} else {
				//다음페이지 조회
				
				alrtsvcpage++;
				fn_searchMain();
			}
	    break;
		case 'grd_reqBrnd' :
		//알림서비스요청브랜드
			if ( reqbrndtotcnt <=  reqbrndpage * reqbrndpgsize ) {
				gfn_message("B","HPC00022","I"); //조회 마지막 페이지 입니다.
				return;
			} else {
				//다음페이지 조회
				reqbrndpage++;
				fn_searchMain2();
			}
		break;
		default :
		break;
	}
}


function grd_reqBrnd_ontextchanged(obj:Grid, e:GridEditTextChangedEventInfo)
{
	if(e.row != -9){
	alert("e.row != -9");
	}else{
	alert("e.row ::: " + e.row);
	}
}
/*----------------------------------------------------------------------------------------------
 * 설명   : 타이틀에 총건수 셋팅 (stc_subTitle02)
 * param   : 
 * return  : true/false
-----------------------------------------------------------------------------------------------*/
function fn_titleCountPaging(){
	if(gfn_isEmpty(ds_reqbrndTemp.getColumn(ds_reqbrndTemp.rowposition, 'alrtSvcNo'))){
			gfn_setGridTitleCountPaging(stc_subTitle02, 0 ) ;			
		}else{
			gfn_setGridTitleCountPaging(stc_subTitle02, total_record_cnt );
		}
	reqbrndtotcnt = total_record_cnt;
}

/*----------------------------------------------------------------------------------------------
 * 설명   : 제약구분코드 변경에 따른 이벤트
 * param   : 
 * return  : true/false
-----------------------------------------------------------------------------------------------*/
function fn_cbo_alrtConsClCd_Change(){

	var cboValue = ds_alrtsvc.getColumn(ds_alrtsvc.rowposition,"alrtConsClCd");

	if( cboValue == '20'){
		stc_subTitle02.userText = "허용브랜드" ;
		grd_reqBrnd.visible = true ;
		fn_titleCountPaging();
		//버튼 표시
		btn_reset00.visible = true;
		btn_insert.visible = true;
		btn_delete.visible = true;
		btn_save00.visible = true;
		
	}else if(cboValue == '30'){
		stc_subTitle02.userText = "제약브랜드" ;
		grd_reqBrnd.visible = true ;
		fn_titleCountPaging();
		//버튼 표시
		btn_reset00.visible = true;
		btn_insert.visible = true;
		btn_delete.visible = true;
		btn_save00.visible = true;
		
	}else{
		stc_subTitle02.userText = "제약없음" ;
		grd_reqBrnd.visible = false;
		gfn_setGridTitleCountPaging(stc_subTitle02, 0 );
		//버튼 숨김
		btn_reset00.visible = false;
		btn_insert.visible = false;
		btn_delete.visible = false;
		btn_save00.visible = false;
	}
}
/*----------------------------------------------------------------------------------------------
 * 설명   : Row Change 이벤트
 * param   : obj - Dataset
 * param   : e  - DSRowPosChangeEventInfo
 * return  : true/false
-----------------------------------------------------------------------------------------------*/
function ds_alrtsvc_canrowposchange(obj:Dataset, e:DSRowPosChangeEventInfo)
{
	if ( e.oldrow != -1 && obj.getRowType(e.oldrow) != Dataset.ROWTYPE_NORMAL ) {		
		if (gfn_message("C","HPC00016","Q")){ //편집중인 데이터가 있습니다. 계속하시겠습니까?
			obj.reset();
			Div01.edt_alrtSvcNo.readonly = true;
			btn_reset00.enable = true;
			btn_insert.enable = true;
			btn_delete.enable = true;
			btn_save00.enable = true;
			grd_alrtSvc_oncellclick();
		} else {
			return false;
		}
	}
	
	if( Div01.cbo_alrtChnlClCd.value == "E"){
		Div01.MaskEdit01.enable = false;
		Div01.edt_answEmlAddr.enable = true;
		Div01.stc_answTelNo.class = "sta_WFDA_detail_Label";
		Div01.stc_answEmlAddr.class = "sta_WFDA_detail_Label_P";
	}else if(( Div01.cbo_alrtChnlClCd.value == "S")||( Div01.cbo_alrtChnlClCd.value == "L")){
		Div01.MaskEdit01.enable = true;
		Div01.edt_answEmlAddr.enable = false;
		Div01.stc_answEmlAddr.class = "sta_WFDA_detail_Label";
		Div01.stc_answTelNo.class =  "sta_WFDA_detail_Label_P";
	}

}

/*----------------------------------------------------------------------------------------------
 * 설명   : 그리드 셀 선택시 알림서비스요청브랜드 조회
 -----------------------------------------------------------------------------------------------*/
function grd_alrtSvc_oncellclick(obj:Grid, e:GridClickEventInfo)
{
	// 휴대폰번호 자릿수에 따른 출력
	Div01_MaskEdit01_onkillfocus(Div01.MaskEdit01);	
	
	ds_svcno.clearData();
	
	var svcno = ds_alrtsvc.getColumn(ds_alrtsvc.rowposition, "alrtSvcNo");
	var row = ds_svcno.addRow();
	ds_svcno.setColumn(row, "alrtSvcNo", svcno);
	if(ds_svcno.getRowCount()==1){
		reqbrndpage =1;
		ds_reqbrnd.clearData();
		fn_searchMain2();
	}else{
		gfn_message("A", "HPC00019","E");   // MSGI0019 : 조회된 정보가 없습니다.
	}
}

function Div01_cbo_alrtChnlClCd_onitemchanged(obj:Combo, e:ItemChangeEventInfo)
{
	if( Div01.cbo_alrtChnlClCd.value == "E"){
		Div01.MaskEdit01.enable = false;
		Div01.edt_answEmlAddr.enable = true;
		Div01.stc_answTelNo.class = "sta_WFDA_detail_Label";
		Div01.stc_answEmlAddr.class = "sta_WFDA_detail_Label_P";
	}else if(( Div01.cbo_alrtChnlClCd.value == "S")||( Div01.cbo_alrtChnlClCd.value == "L")){
		Div01.MaskEdit01.enable = true;
		Div01.edt_answEmlAddr.enable = false;
		Div01.stc_answEmlAddr.class = "sta_WFDA_detail_Label";
		Div01.stc_answTelNo.class =  "sta_WFDA_detail_Label_P";
	}
}
]]></Script>
  </Form>
</FDL>
