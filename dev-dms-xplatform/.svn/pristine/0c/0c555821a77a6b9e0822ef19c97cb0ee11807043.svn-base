<?xml version="1.0" encoding="utf-8"?>
<FDL version="1.5">
  <TypeDefinition url="..\default_typedef.xml"/>
  <Form id="UserMgmtSaveP" classname="popup_sample1" inheritanceid="" position="absolute 0 0 500 600" titletext="사용자입력/수정" class="frm_bg_popup" onload="Form_onload" style="align:right;">
    <Layouts>
      <Layout>
        <Div id="div_title" taborder="1" transparenthittest="true" position="absolute 23 11 477 39" text="사용자등록" class="popUp_title_bg"/>
        <Static id="Static00" text="h38" class="tip_guide" visible="false" position2="absolute l:205 w:26 t:0 h:38" positiontype="position2"/>
        <Button id="btn_close" taborder="1" position="absolute 458 13 476 31" class="popUp_close" onclick="btn_close_onclick"/>
        <Static id="Static02" text="h32" class="tip_guide" visible="false" position2="absolute l:149 w:42 t:6 h:32" positiontype="position2"/>
        <Static id="Static05" text="h10" class="tip_guide" visible="false" position2="absolute l:37 w:42 t:6 h:10" positiontype="position2"/>
        <Static id="Static12" text="w&#13;&#10;&#13;15" class="tip_guide" visible="false" position2="absolute l:7 w:15 t:18 h:42" positiontype="position2"/>
        <Div id="Div00" taborder="1" text="Div00" position="absolute 178 555 315 575">
          <Layouts>
            <Layout>
              <Button id="btn_confirm" taborder="0" text="저장" onclick="btn_confirm_onclick" class="btn_popup_save" position="absolute 18 0 73 20" enable="true"/>
              <Button id="btn_cancel" taborder="1" text="취소" onclick="btn_cancel_onclick" class="btn_popup_cancel" position="absolute 78 0 133 20" enable="true"/>
            </Layout>
          </Layouts>
        </Div>
        <Static id="Static06" text="h15" class="tip_guide" visible="false" position2="absolute l:238 w:42 t:575 h:15" positiontype="position2"/>
        <Static id="Static07" text="h10" class="tip_guide" visible="false" position2="absolute l:220 w:74 t:545 h:10" positiontype="position2"/>
        <Div id="div_info" taborder="2" position2="absolute l:21 w:456 t:72 h:473" positiontype="position2" class="bg_search" enableESC="N">
          <Layouts>
            <Layout>
              <Edit id="edt_userno" taborder="0" class="point" position="absolute 136 9 434 29" validate="" anchor="default" inputtype="digit,alpha" maxlength="50" enable="true" displaynulltext="자동 입력됩니다." readonly="true"/>
              <Static id="stc_02" text="사용자번호" class="sta_WFDA_detail_Label_P" position="absolute 20 9 134 29" anchor="default"/>
              <Edit id="edt_usernm" taborder="1" position="absolute 136 33 434 53" anchor="default" validate="title:사용자명,required:true,maxlength:50" maxlength="64" imemode="hangul"/>
              <Static id="stc_00" text="사용자명" class="sta_WFDA_detail_Label_P" position="absolute 20 33 134 53" anchor="default"/>
              <Static id="stc_01" text="사용자구분코드" class="sta_WFDA_detail_Label_P" position="absolute 20 153 134 173" anchor="default"/>
              <Static id="Static00" text="w10" class="tip_guide" visible="false" position2="absolute l:126 w:10 t:85 h:285" positiontype="position2"/>
              <Static id="stc_11" text="사용자상태코드" class="sta_WFDA_detail_Label_P" position="absolute 20 57 134 77" anchor="default"/>
              <Static id="stc_03" text="로그인ID" class="sta_WFDA_detail_Label_P" position="absolute 20 81 134 101" anchor="default"/>
              <Static id="stc_04" text="이메일" position="absolute 20 105 134 125" anchor="default" class="sta_WFDA_detail_Label"/>
              <Static id="stc_05" text="휴대전화번호" position="absolute 20 129 134 149" anchor="default" class="sta_WFDA_detail_Label"/>
              <Static id="stc_06" text="직급코드" position="absolute 20 249 126 269" anchor="default" class="sta_WFDA_detail_Label"/>
              <Edit id="edt_jobr" taborder="11" position="absolute 136 249 434 269" validate="title:직급코드,maxlength:5" anchor="default" inputtype="numberandenglish" maxlength="5"/>
              <Edit id="edt_emil" taborder="5" position="absolute 136 105 434 125" anchor="default" validate="title:이메일주소,required:false,maxlength:200" maxlength="200" inputtype="dot,symbol,digit,alpha"/>
              <Edit id="edt_lginid" taborder="3" class="point" position="absolute 136 81 306 101" anchor="default" validate="title:로그인ID,required:true,maxlength:30" imemode="alpha" inputmode="lower" inputtype="symbol,digit,alpha"/>
              <Static id="stc_09" text="조직코드" position="absolute 20 297 127 317" anchor="default" class="sta_WFDA_detail_Label"/>
              <Edit id="edt_org" taborder="19" position="absolute 136 297 434 317" anchor="default" validate="title:조직코드,maxlength:25" inputtype="numberandenglish" maxlength="25"/>
              <Static id="stc_10" text="직책코드" position="absolute 20 273 126 293" anchor="default" class="sta_WFDA_detail_Label"/>
              <Static id="stc_08" text="사원번호" position="absolute 20 345 134 365" anchor="default" class="sta_WFDA_detail_Label"/>
              <Static id="stc_13" text="대리점코드" position="absolute 20 321 121 341" anchor="default" onclick="div_info_stc_13_onclick" class="sta_WFDA_detail_Label"/>
              <Combo id="cob_cl" taborder="7" position="absolute 136 153 306 173" innerdataset="@ds_DMS002_cp" codecolumn="CM_CD_ID" datacolumn="CM_CD_NM" anchor="default" validate="title:사용자구분코드,required:true,maxlength:2" index="-1"/>
              <Combo id="cob_st" taborder="2" position="absolute 136 57 306 77" innerdataset="@ds_DMS004_cp" codecolumn="CM_CD_ID" datacolumn="CM_CD_NM" anchor="default" validate="title:사용자상태코드,required:true,maxlength:2" index="-1" type="dropdown" readonly="false"/>
              <Static id="stc_07" text="비밀번호" position="absolute 20 177 134 197" anchor="default" class="sta_WFDA_detail_Label"/>
              <Static id="stc_14" text="비밀번호오류횟수" position="absolute 20 201 134 221" anchor="default" class="sta_WFDA_detail_Label"/>
              <Button id="btn_new" taborder="25" text="신규" onclick="btn_new_onclick" class="btn_common" position="absolute 277 -285 326 -265" anchor="top right"/>
              <Button id="btn_pwd" taborder="8" text="초기화" onclick="fn_pwd_init" position="absolute 136 177 193 197" anchor="top right" enable="false" visible="true"/>
              <Button id="btn_pwderr" taborder="9" text="초기화" onclick="fn_pwderr_init" position="absolute 194 201 251 221" anchor="top right" enable="false" visible="true"/>
              <Static id="stc_16" text="최종로그인일시" position="absolute 20 225 134 245" anchor="default" class="sta_WFDA_detail_Label"/>
              <Static id="stc_17" text="최초등록자" position="absolute 20 369 134 389" anchor="default" class="sta_WFDA_detail_Label"/>
              <Static id="stc_18" text="최초등록일시" position="absolute 20 393 134 413" anchor="default" class="sta_WFDA_detail_Label"/>
              <Static id="stc_19" text="최종변경자" position="absolute 20 417 134 437" anchor="default" class="sta_WFDA_detail_Label"/>
              <Static id="stc_20" text="최종변경일시" position="absolute 20 441 134 461" anchor="default" class="sta_WFDA_detail_Label"/>
              <Edit id="edt_lschgdt" taborder="24" class="point" position="absolute 136 441 434 461" enable="false" anchor="default"/>
              <Edit id="edt_lschgid" taborder="23" position="absolute 136 417 434 437" enable="false" anchor="default"/>
              <Edit id="edt_fsregdt" taborder="22" position="absolute 136 393 434 413" enable="false" anchor="default"/>
              <Edit id="edt_fsregid" taborder="21" position="absolute 136 369 434 389" enable="false" anchor="default"/>
              <Edit id="edt_lslgindt" taborder="10" class="point" position="absolute 136 225 434 245" enable="false" anchor="default"/>
              <Static id="Static01" text="w20" class="tip_guide" visible="false" position2="absolute l:434 w:20 t:0 h:400" positiontype="position2"/>
              <Static id="Static02" text="w20" class="tip_guide" visible="false" position2="absolute l:0 w:20 t:13 h:400" positiontype="position2"/>
              <Button id="btn_chk_lgid" taborder="4" text="중복체크" onclick="btn_chk_loginid" class="btn_common" position="absolute 307 81 376 101" anchor="default" visible="false"/>
              <Edit id="edt_jtil" taborder="12" position="absolute 136 273 434 293" validate="title:직책코드,maxlength:5" anchor="default" inputtype="numberandenglish" maxlength="5"/>
              <Static id="Static08" text="v10" class="guideTip" visible="false" position2="absolute l:144 w:30 t:0 h:10" positiontype="position2"/>
              <Static id="Static03" text="v10" class="guideTip" visible="false" position2="absolute l:240 w:30 t:486 h:10" positiontype="position2"/>
              <Edit id="edt_empno" taborder="20" position="absolute 136 345 434 365" validate="title:사원번호,required:false,maxlengthB:50" inputtype="numberandenglish" maxlength="12" anchor="default"/>
              <MaskEdit id="MaskEdit00" taborder="6" type="string" position="absolute 136 129 434 149" style="align:left middle;" anchor="default" onkillfocus="div_info_MaskEdit00_onkillfocus" onsetfocus="div_info_MaskEdit00_onsetfocus"/>
              <Button id="btn_00" taborder="16" onclick="divLevel02_btn_00_onclick" class="btn_WFDA_search" position="absolute 393 321 413 341" tooltiptype="hover" anchor="default" tooltiptext="대리점코드"/>
              <Edit id="edt_brnCd" taborder="27" inputtype="numberandenglish" maxlength="4" position="absolute 136 321 256 341" validate="title:대리점코드,maxlength:10" onkeydown="div_Search_brnd_onkeydown" class="Code" anchor="default"/>
              <Edit id="edt_brnNm" taborder="28" imemode="hangul" onkeydown="div_Search_brnd_onkeydown" position="absolute 257 321 392 341" anchor="default"/>
              <Edit id="edt_pwdErrCnt" taborder="30" inputtype="numberandenglish" maxlength="3" position="absolute 136 201 193 221" validate="title:가맹점번호,required:false,maxlengthB:9" enable="true" style=":disabled {align:right middle;}" readonly="true" anchor="default"/>
            </Layout>
          </Layouts>
        </Div>
        <Static id="stc_subTitle00" text="사용자정보" class="sub_title" position="absolute 22 49 321 69"/>
        <Static id="Static01" text="h14" class="tip_guide" visible="false" position2="absolute l:12 w:42 t:39 h:14" positiontype="position2"/>
        <Static id="Static03" text="h8" class="tip_guide" visible="false" position2="absolute l:28 w:42 t:64 h:8" positiontype="position2"/>
        <Static id="Static13" text="h33" class="tip_guide" visible="false" position2="absolute l:317 w:42 t:39 h:33" positiontype="position2"/>
        <Static id="Static08" text="w&#13;&#10;&#13;15" class="tip_guide" visible="false" position2="absolute l:7 w:15 t:145 h:232" positiontype="position2"/>
        <Static id="Static09" text="w&#13;&#10;&#13;15" class="tip_guide" visible="false" position2="absolute l:477 w:15 t:26 h:232" positiontype="position2"/>
        <Button id="btn_reset" taborder="3" onclick="div_search_btn_reset_onclick" class="btn_WFSA_reset" position="absolute 436 394 456 414" anchor="default" tooltiptext="초기화"/>
        <Static id="Static10" text="초기비밀번호 : 로그인ID+&quot;1234&quot;" class="sta_des_iconBlue" position="absolute 217 253 463 273"/>
        <Static id="Static20" text="w&#13;&#10;&#13;5" class="tip_guide" visible="false" position2="absolute l:251 w:5 t:556 h:18" positiontype="position2"/>
      </Layout>
    </Layouts>
    <Objects>
      <Dataset id="ds_userLst_pop" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false" canrowposchange="ds_usrLst_canrowposchange">
        <ColumnInfo>
          <Column id="USER_NO" type="STRING" size="256"/>
          <Column id="USER_NM" type="STRING" size="256"/>
          <Column id="USER_CL_CD" type="STRING" size="256"/>
          <Column id="USER_ST_CD" type="STRING" size="256"/>
          <Column id="LGIN_ID" type="STRING" size="256"/>
          <Column id="PWD" type="STRING" size="256"/>
          <Column id="PWD_ERR_CNT" type="STRING" size="256"/>
          <Column id="LS_LGIN_DTM" type="STRING" size="256"/>
          <Column id="EML_ADDR" type="STRING" size="256"/>
          <Column id="HP_NO" type="STRING" size="256"/>
          <Column id="GRPC_JOBR_CD" type="STRING" size="256"/>
          <Column id="GRPC_JTIL_CD" type="STRING" size="256"/>
          <Column id="GRPC_DEPT_CD" type="STRING" size="256"/>
          <Column id="DEAL_CO_CD" type="STRING" size="256"/>
          <Column id="DEAL_CO_NM" type="STRING" size="256"/>
          <Column id="EMP_NO" type="STRING" size="256"/>
          <Column id="GRPC_CO_CD" type="STRING" size="256"/>
          <Column id="FS_REG_USER_ID" type="STRING" size="256"/>
          <Column id="FS_REG_DTM" type="STRING" size="256"/>
          <Column id="LS_CHG_USER_ID" type="STRING" size="256"/>
          <Column id="LS_CHG_DTM" type="STRING" size="256"/>
          <Column id="USER_NM_CHG_YN" type="STRING" size="256"/>
          <Column id="EMIL_CHG_YN" type="STRING" size="256"/>
          <Column id="HP_NO_CHG_YN" type="STRING" size="256"/>
          <Column id="SAP_CD" type="STRING" size="256"/>
          <Column id="DEPT_CD" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows>
          <Row/>
        </Rows>
      </Dataset>
      <Dataset id="ds_chk_lgid" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="LGIN_ID" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows>
          <Row/>
        </Rows>
      </Dataset>
      <Dataset id="ds_DMS002" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="CM_GRP_CD_ID" type="STRING" size="256"/>
          <Column id="CM_GRP_CD_NM" type="STRING" size="256"/>
          <Column id="CM_CD_ID" type="STRING" size="256"/>
          <Column id="CHG_DTM" type="STRING" size="256"/>
          <Column id="CM_CD_NM" type="STRING" size="256"/>
          <Column id="CM_CD_DESC" type="STRING" size="256"/>
          <Column id="CM_CD_SORT_ORD" type="STRING" size="256"/>
          <Column id="USE_YN" type="STRING" size="256"/>
          <Column id="SUP_CM_GRP_CD_ID" type="STRING" size="256"/>
          <Column id="SUP_CM_CD_ID" type="STRING" size="256"/>
          <Column id="MGMT_ITEM_CD1" type="STRING" size="256"/>
          <Column id="MGMT_ITEM_CD2" type="STRING" size="256"/>
          <Column id="MGMT_ITEM_CD3" type="STRING" size="256"/>
          <Column id="MGMT_ITEM_CD4" type="STRING" size="256"/>
          <Column id="MGMT_ITEM_CD5" type="STRING" size="256"/>
          <Column id="MGMT_ITEM_CD6" type="STRING" size="256"/>
          <Column id="MGMT_ITEM_CD7" type="STRING" size="256"/>
          <Column id="MGMT_ITEM_CD8" type="STRING" size="256"/>
          <Column id="MGMT_ITEM_CD9" type="STRING" size="256"/>
          <Column id="MGMT_ITEM_CD10" type="STRING" size="256"/>
          <Column id="FS_REG_USER_ID" type="STRING" size="256"/>
          <Column id="FS_REG_DTM" type="STRING" size="256"/>
          <Column id="LS_CHG_USER_ID" type="STRING" size="256"/>
          <Column id="LS_CHG_DTM" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_DMS004" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="CM_GRP_CD_ID" type="STRING" size="256"/>
          <Column id="CM_GRP_CD_NM" type="STRING" size="256"/>
          <Column id="CM_CD_ID" type="STRING" size="256"/>
          <Column id="CHG_DTM" type="STRING" size="256"/>
          <Column id="CM_CD_NM" type="STRING" size="256"/>
          <Column id="CM_CD_DESC" type="STRING" size="256"/>
          <Column id="CM_CD_SORT_ORD" type="STRING" size="256"/>
          <Column id="USE_YN" type="STRING" size="256"/>
          <Column id="SUP_CM_GRP_CD_ID" type="STRING" size="256"/>
          <Column id="SUP_CM_CD_ID" type="STRING" size="256"/>
          <Column id="MGMT_ITEM_CD1" type="STRING" size="256"/>
          <Column id="MGMT_ITEM_CD2" type="STRING" size="256"/>
          <Column id="MGMT_ITEM_CD3" type="STRING" size="256"/>
          <Column id="MGMT_ITEM_CD4" type="STRING" size="256"/>
          <Column id="MGMT_ITEM_CD5" type="STRING" size="256"/>
          <Column id="MGMT_ITEM_CD6" type="STRING" size="256"/>
          <Column id="MGMT_ITEM_CD7" type="STRING" size="256"/>
          <Column id="MGMT_ITEM_CD8" type="STRING" size="256"/>
          <Column id="MGMT_ITEM_CD9" type="STRING" size="256"/>
          <Column id="MGMT_ITEM_CD10" type="STRING" size="256"/>
          <Column id="FS_REG_USER_ID" type="STRING" size="256"/>
          <Column id="FS_REG_DTM" type="STRING" size="256"/>
          <Column id="LS_CHG_USER_ID" type="STRING" size="256"/>
          <Column id="LS_CHG_DTM" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_DMS002_cp" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="CM_GRP_CD_ID" type="STRING" size="256"/>
          <Column id="CM_GRP_CD_NM" type="STRING" size="256"/>
          <Column id="CM_CD_ID" type="STRING" size="256"/>
          <Column id="CHG_DTM" type="STRING" size="256"/>
          <Column id="CM_CD_NM" type="STRING" size="256"/>
          <Column id="CM_CD_DESC" type="STRING" size="256"/>
          <Column id="CM_CD_SORT_ORD" type="STRING" size="256"/>
          <Column id="USE_YN" type="STRING" size="256"/>
          <Column id="SUP_CM_GRP_CD_ID" type="STRING" size="256"/>
          <Column id="SUP_CM_CD_ID" type="STRING" size="256"/>
          <Column id="MGMT_ITEM_CD1" type="STRING" size="256"/>
          <Column id="MGMT_ITEM_CD2" type="STRING" size="256"/>
          <Column id="MGMT_ITEM_CD3" type="STRING" size="256"/>
          <Column id="MGMT_ITEM_CD4" type="STRING" size="256"/>
          <Column id="MGMT_ITEM_CD5" type="STRING" size="256"/>
          <Column id="MGMT_ITEM_CD6" type="STRING" size="256"/>
          <Column id="MGMT_ITEM_CD7" type="STRING" size="256"/>
          <Column id="MGMT_ITEM_CD8" type="STRING" size="256"/>
          <Column id="MGMT_ITEM_CD9" type="STRING" size="256"/>
          <Column id="MGMT_ITEM_CD10" type="STRING" size="256"/>
          <Column id="FS_REG_USER_ID" type="STRING" size="256"/>
          <Column id="FS_REG_DTM" type="STRING" size="256"/>
          <Column id="LS_CHG_USER_ID" type="STRING" size="256"/>
          <Column id="LS_CHG_DTM" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_DMS004_cp" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="CM_GRP_CD_ID" type="STRING" size="256"/>
          <Column id="CM_GRP_CD_NM" type="STRING" size="256"/>
          <Column id="CM_CD_ID" type="STRING" size="256"/>
          <Column id="CHG_DTM" type="STRING" size="256"/>
          <Column id="CM_CD_NM" type="STRING" size="256"/>
          <Column id="CM_CD_DESC" type="STRING" size="256"/>
          <Column id="CM_CD_SORT_ORD" type="STRING" size="256"/>
          <Column id="USE_YN" type="STRING" size="256"/>
          <Column id="SUP_CM_GRP_CD_ID" type="STRING" size="256"/>
          <Column id="SUP_CM_CD_ID" type="STRING" size="256"/>
          <Column id="MGMT_ITEM_CD1" type="STRING" size="256"/>
          <Column id="MGMT_ITEM_CD2" type="STRING" size="256"/>
          <Column id="MGMT_ITEM_CD3" type="STRING" size="256"/>
          <Column id="MGMT_ITEM_CD4" type="STRING" size="256"/>
          <Column id="MGMT_ITEM_CD5" type="STRING" size="256"/>
          <Column id="MGMT_ITEM_CD6" type="STRING" size="256"/>
          <Column id="MGMT_ITEM_CD7" type="STRING" size="256"/>
          <Column id="MGMT_ITEM_CD8" type="STRING" size="256"/>
          <Column id="MGMT_ITEM_CD9" type="STRING" size="256"/>
          <Column id="MGMT_ITEM_CD10" type="STRING" size="256"/>
          <Column id="FS_REG_USER_ID" type="STRING" size="256"/>
          <Column id="FS_REG_DTM" type="STRING" size="256"/>
          <Column id="LS_CHG_USER_ID" type="STRING" size="256"/>
          <Column id="LS_CHG_DTM" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_chg_pwdinit" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="INIT_GB" type="STRING" size="256"/>
          <Column id="USER_NO" type="STRING" size="256"/>
          <Column id="LGIN_ID" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows>
          <Row/>
        </Rows>
      </Dataset>
      <Dataset id="ds_SCC019" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="CM_GRP_CD_ID" type="STRING" size="256"/>
          <Column id="CM_GRP_CD_NM" type="STRING" size="256"/>
          <Column id="CM_CD_ID" type="STRING" size="256"/>
          <Column id="CHG_DTM" type="STRING" size="256"/>
          <Column id="CM_CD_NM" type="STRING" size="256"/>
          <Column id="CM_CD_DESC" type="STRING" size="256"/>
          <Column id="CM_CD_SORT_ORD" type="STRING" size="256"/>
          <Column id="USE_YN" type="STRING" size="256"/>
          <Column id="SUP_CM_GRP_CD_ID" type="STRING" size="256"/>
          <Column id="SUP_CM_CD_ID" type="STRING" size="256"/>
          <Column id="MGMT_ITEM_CD1" type="STRING" size="256"/>
          <Column id="MGMT_ITEM_CD2" type="STRING" size="256"/>
          <Column id="MGMT_ITEM_CD3" type="STRING" size="256"/>
          <Column id="MGMT_ITEM_CD4" type="STRING" size="256"/>
          <Column id="MGMT_ITEM_CD5" type="STRING" size="256"/>
          <Column id="MGMT_ITEM_CD6" type="STRING" size="256"/>
          <Column id="MGMT_ITEM_CD7" type="STRING" size="256"/>
          <Column id="MGMT_ITEM_CD8" type="STRING" size="256"/>
          <Column id="MGMT_ITEM_CD9" type="STRING" size="256"/>
          <Column id="MGMT_ITEM_CD10" type="STRING" size="256"/>
          <Column id="FS_REG_USER_ID" type="STRING" size="256"/>
          <Column id="FS_REG_DTM" type="STRING" size="256"/>
          <Column id="LS_CHG_USER_ID" type="STRING" size="256"/>
          <Column id="LS_CHG_DTM" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_prnInfoInq" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="PRN_INFO_INQ_ITEM_CD" type="STRING" size="2"/>
          <Column id="PRN_INFO_INQ_CTT" type="STRING" size="2000"/>
          <Column id="PRN_INFO_INQ_ITEM_NM" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_searchSecureInfo" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="FRM_ID" type="STRING" size="256"/>
          <Column id="INQ_OBJ_CL_CD" type="STRING" size="256"/>
          <Column id="INQ_OBJ_NO" type="STRING" size="256"/>
          <Column id="INQ_REQ_CHNL_CD" type="STRING" size="256"/>
          <Column id="INQ_REQ_IDF_NO" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows>
          <Row/>
        </Rows>
      </Dataset>
      <Dataset id="ds_userLst_popCmp" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false" canrowposchange="ds_usrLst_canrowposchange">
        <ColumnInfo>
          <Column id="USER_NO" type="STRING" size="256"/>
          <Column id="USER_NM" type="STRING" size="256"/>
          <Column id="USER_CL_CD" type="STRING" size="256"/>
          <Column id="USER_ST_CD" type="STRING" size="256"/>
          <Column id="LGIN_ID" type="STRING" size="256"/>
          <Column id="PWD" type="STRING" size="256"/>
          <Column id="PWD_ERR_CNT" type="STRING" size="256"/>
          <Column id="LS_LGIN_DTM" type="STRING" size="256"/>
          <Column id="EML_ADDR" type="STRING" size="256"/>
          <Column id="HP_NO" type="STRING" size="256"/>
          <Column id="GRPC_JOBR_CD" type="STRING" size="256"/>
          <Column id="GRPC_JTIL_CD" type="STRING" size="256"/>
          <Column id="GRPC_DEPT_CD" type="STRING" size="256"/>
          <Column id="DEAL_CO_CD" type="STRING" size="256"/>
          <Column id="DEAL_CO_NM" type="STRING" size="256"/>
          <Column id="EMP_NO" type="STRING" size="256"/>
          <Column id="GRPC_CO_CD" type="STRING" size="256"/>
          <Column id="FS_REG_USER_ID" type="STRING" size="256"/>
          <Column id="FS_REG_DTM" type="STRING" size="256"/>
          <Column id="LS_CHG_USER_ID" type="STRING" size="256"/>
          <Column id="LS_CHG_DTM" type="STRING" size="256"/>
          <Column id="USER_NM_CHG_YN" type="STRING" size="256"/>
          <Column id="EMAIL_CHG_YN" type="STRING" size="256"/>
          <Column id="HP_NO_CHG_YN" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows>
          <Row/>
        </Rows>
      </Dataset>
      <Dataset id="ds_searchEncInfo" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="USER_NO" type="STRING" size="256"/>
          <Column id="EMAIL_ADDR_ENPT" type="STRING" size="256"/>
          <Column id="HP_NO_ENPT" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_searchEncInfoParam" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="USER_NO" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
    </Objects>
    <Bind>
      <BindItem id="item12" compid="div_info.edt_brnCd" propid="value" datasetid="ds_userLst_pop" columnid="DEAL_CO_CD"/>
      <BindItem id="item10" compid="div_info.edt_jtil" propid="value" datasetid="ds_userLst_pop" columnid="GRPC_JTIL_CD"/>
      <BindItem id="item0" compid="div_info.edt_userno" propid="value" datasetid="ds_userLst_pop" columnid="USER_NO"/>
      <BindItem id="item1" compid="div_info.edt_usernm" propid="value" datasetid="ds_userLst_pop" columnid="USER_NM"/>
      <BindItem id="item2" compid="div_info.cob_st" propid="value" datasetid="ds_userLst_pop" columnid="USER_ST_CD"/>
      <BindItem id="item3" compid="div_info.edt_lginid" propid="value" datasetid="ds_userLst_pop" columnid="LGIN_ID"/>
      <BindItem id="item4" compid="div_info.edt_emil" propid="value" datasetid="ds_userLst_pop" columnid="EML_ADDR"/>
      <BindItem id="item6" compid="div_info.cob_cl" propid="value" datasetid="ds_userLst_pop" columnid="USER_CL_CD"/>
      <BindItem id="item9" compid="div_info.edt_jobr" propid="value" datasetid="ds_userLst_pop" columnid="GRPC_JOBR_CD" validate="title:회사코드,required:true,maxlength:50"/>
      <BindItem id="item11" compid="div_info.edt_org" propid="value" datasetid="ds_userLst_pop" columnid="GRPC_DEPT_CD" validate="title:부서코드,required:true,maxlength:50"/>
      <BindItem id="item15" compid="div_info.edt_lslgindt" propid="value" datasetid="ds_userLst_pop" columnid="LS_LGIN_DTM"/>
      <BindItem id="item16" compid="div_info.edt_fsregid" propid="value" datasetid="ds_userLst_pop" columnid="FS_REG_USER_ID"/>
      <BindItem id="item17" compid="div_info.edt_fsregdt" propid="value" datasetid="ds_userLst_pop" columnid="FS_REG_DTM"/>
      <BindItem id="item18" compid="div_info.edt_lschgid" propid="value" datasetid="ds_userLst_pop" columnid="LS_CHG_USER_ID"/>
      <BindItem id="item19" compid="div_info.edt_lschgdt" propid="value" datasetid="ds_userLst_pop" columnid="LS_CHG_DTM"/>
      <BindItem id="item14" compid="div_info.edt_empno" propid="value" datasetid="ds_userLst_pop" columnid="EMP_NO"/>
      <BindItem id="item20" compid="div_info.MaskEdit00" propid="value" datasetid="ds_userLst_pop" columnid="HP_NO"/>
      <BindItem id="item7" compid="div_info.edt_pwdErrCnt" propid="value" datasetid="ds_userLst_pop" columnid="PWD_ERR_CNT"/>
      <BindItem id="item5" compid="div_info.edt_brnNm" propid="value" datasetid="ds_userLst_pop" columnid="DEAL_CO_NM"/>
    </Bind>
    <Script type="xscript4.0"><![CDATA[/*
 * 01. 업무구분 : 공통
 * 02. 화면 : UserMgmtSaveP.xfdl
 * 03. 화면 설명 : 사용자등록/수정팝업
 * 04. 관련 화면/서비스 : 
 * 05. 작성자 : 심상준
 * 06. 작성일 : 2015.06.11
 * 07. 수정이력 :
 ************************************************************************************************
 *     수정일        이  름    사유
 ************************************************************************************************
 *     2015.06.11    심상준    최초 작성
 ************************************************************************************************
 */
 
/*===============================================================================================
 * [ PART 1 ] Form에서 Include 할 라이브러리(xjs)파일 정의
================================================================================================*/

include "LIB::common.xjs"; //공통함수 호출
/*===============================================================================================
 * [ PART 2 ] Form에서 사용될 전역변수를 선언
================================================================================================*/
var sPrnInfoInqAutrYn;//개인정보 조회권한 
var sSaveAutrYn; //수정권한여부 		
//부모화면의 사용자리스트 데이터셋 
var pDsUserList;
var pidx;
var g_HPNO_CD = "13";
var g_EMAIL_CD = "15";
var g_USER_NM = "18";
/*===============================================================================================
 * [ PART 3 ] Form Event 처리
================================================================================================*/
/*----------------------------------------------------------------------------------------------
 * 설명   : Form Load Event
-----------------------------------------------------------------------------------------------*/
function Form_onload(obj:Form, e:LoadEventInfo)
{
	//공통 Form 초기화
	gfn_setInitPop(obj, e, "FSC010P");
	
 	//Form 초기 개발자 셋팅
 	//공통코드 초기화
 	fn_setInitCode(obj, e);
 	//그리드 초기화
 	fn_setInitGrid(obj, e);
 	//기본값 초기화
 	fn_setInitForm(obj, e);
 	
}

/*===============================================================================================
 * [ PART 4 ] Load 후 초기설정
================================================================================================*/
/*----------------------------------------------------------------------------------------------
 * 설명   : 공통코드 초기화
-----------------------------------------------------------------------------------------------*/
function fn_setInitCode(obj:Form, e:LoadEventInfo)
{
	var strCode =  "DMS002=ds_DMS002=S";
		strCode += ",DMS004=ds_DMS004=S";	
	gfn_getCodeDs( this
				  , strCode
				  ,"fn_afterCodeCallBack");				//결과 받을 function	
}

/*----------------------------------------------------------------------------------------------
 * 설명   : 공통코드 호출 후 처리
-----------------------------------------------------------------------------------------------*/
function fn_afterCodeCallBack()
{	
	//상세사용자 초기화
	fn_userInit();
}

/*----------------------------------------------------------------------------------------------
 * 설명   : 그리드 초기화
-----------------------------------------------------------------------------------------------*/
function fn_setInitGrid(obj:Form, e:LoadEventInfo)
{

}

/*----------------------------------------------------------------------------------------------
 * 설명   : 기본값 설정
-----------------------------------------------------------------------------------------------*/
function fn_setInitForm(obj:Form, e:LoadEventInfo)
{
	if(mode !="new"){
		// 입력파라미터 설정 	
		sPrnInfoInqAutrYn = prnInfoInqAutrYn;//개인정보 조회권한 
		sSaveAutrYn = saveAutrYn; //수정권한여부 		
		
	} else {
		// 입력파라미터 설정 	
		sPrnInfoInqAutrYn = false;//개인정보 조회권한 
		sSaveAutrYn = false; //수정권한여부 			
	}	

	//부모화면의 사용자리스트 데이터셋 
	pDsUserList = opener.ds_userLst;
	pidx = pDsUserList.rowposition;
}

/*===============================================================================================
 * [ PART 5 ] Transaction 처리
================================================================================================*/
/*----------------------------------------------------------------------------------------------
 * 설명   : 로그인ID중복체크
 * param   : 
 * return  : void
-----------------------------------------------------------------------------------------------*/
function fn_chk_loginid()
{
	if(gfn_isEmpty(div_info.edt_lginid.value)) {
		gfn_message("A","DMS00054","I"); //로그인ID를 입력해 주세요.
		div_info.edt_lginid.setFocus();
		return false;
	}
	
	ds_chk_lgid.setColumn(0, "LGIN_ID",  div_info.edt_lginid.value);
	
	var sSvcID		 = "chkLoginId";
	var sTrID		 = "PSCUserMgmt_pChkLginId";
	var sPtrn		 = "R";  //입력C,조회R,수정U,삭제D,복합M
	var sInputDs	 = "ncFieldMap=ds_chk_lgid";
	var sOutputDs	 = "";
	var sArgs		 = "";
	var sCallBackFnc = "fn_callBack";
	
	gfn_transaction(sSvcID, sTrID, sPtrn, sInputDs, sOutputDs, sArgs, sCallBackFnc);
	
	return true;
}

/*----------------------------------------------------------------------------------------------
 * 설명   : 비밀번호초기화변경
 * param   : 
 * return  : void
-----------------------------------------------------------------------------------------------*/
function fn_chg_PwdInit( initGb)
{
	var sSvcID		 = "chgPwdInit";
	if (initGb == "2") {
	    sSvcID       = "chgPwdErrCntInit";
	}
	var sTrID		 = "PSCUserMgmt_pChgPwdInit";
	var sPtrn		 = "U";  //입력C,조회R,수정U,삭제D,복합M
	var sInputDs	 = "ncFieldMap=ds_chg_pwdinit";
	var sOutputDs	 = "";
	var sArgs		 = "";
	var sCallBackFnc = "fn_callBack";
	
	gfn_transaction(sSvcID, sTrID, sPtrn, sInputDs, sOutputDs, sArgs, sCallBackFnc);
	
	return true;
}

/*----------------------------------------------------------------------------------------------
 * 설명     :  암호화컬럼 조회 
 * param  : 
 * return  : void
-----------------------------------------------------------------------------------------------*/
function fn_searchEncInfo()
{

	var sSvcID	 = "searchEncInfo";
	var sTrID		 = "PSCUserMgmt_pInqUserSecure";
	var sPtrn		 = "R";  //입력C,조회R,수정U,삭제D,복합M
	var sInputDs	 = "ncFieldMap=ds_searchEncInfoParam";
	var sOutputDs	= "ds_searchEncInfo=rsUserInfo";
	var sArgs		 = "";
	var sCallBackFnc = "fn_callBack";
		
	gfn_transaction(sSvcID, sTrID, sPtrn, sInputDs, sOutputDs, sArgs, sCallBackFnc);
}

/*===============================================================================================
 * [ PART 6 ] CallBack 처리
================================================================================================*/

function fn_callBack(sSvcID, iErrorCode, sErrorMsg, ncMsgId, ncMsg){

	switch(sSvcID) {
		
		case "chkLoginId" : 
			if ( iErrorCode == 0 ) {
				gfn_message("A","DMS00000","I");	//MSGI0001 : 정상 처리되었습니다.
				return true;
			} else {
				ds_chk_lgid.setColumn(0, "LGIN_ID",  "");
				return false;
			}
			break;
		case "chgPwdInit" :
			if ( iErrorCode == 0 ) {
				ds_userLst_pop.setColumn(0, "PWD", null);
				ds_userLst_pop.setColumn(0, "USER_ST_CD", "00");
				opener.ds_userLst.setColumn(opener.ds_userLst.rowposition, "USER_ST_CD", "00");
				gfn_message("A","DMS00065","I"); //비밀번호가 초기화 되었습니다.
				return true;
			}
			break;
		case "chgPwdErrCntInit" :
			if ( iErrorCode == 0 ) {
				ds_userLst_pop.setColumn(0, "PWD_ERR_CNT", 0);
				opener.ds_userLst.setColumn(opener.ds_userLst.rowposition, "PWD_ERR_CNT", 0);
				gfn_message("A","DMS00066","I"); //비밀번호 오류횟수가 초기화 되었습니다.
				return true;
			}
			break;
		case "searchSecureInfo" : 
			if ( iErrorCode == 0 ) {
			    //상세사용자설정
			    fn_setDetailUserInfo(true);
			}
			break;	
		case "searchEncInfo" : 
			if ( iErrorCode == 0 ) {
			    //암호화컬럼 조회 후 처리
			    fn_afterSearchEncInfo();
			}
			break;				
		default :
			break;
	}
}

/*===============================================================================================
 * [ PART 7 ] Main Button Event
================================================================================================*/
/*----------------------------------------------------------------------------------------------
 * 설명   : 저장
-----------------------------------------------------------------------------------------------*/
function btn_confirm_onclick(obj:Button,  e:ClickEventInfo)
{

	if(ds_chk_lgid.getColumn(0, "LGIN_ID") != ds_userLst_pop.getColumn(0, "LGIN_ID") ) {
		gfn_message("A","DMS00052","I"); //로그인ID 중복체크는 필수입니다.
		return false;
	 }
	
	//휴대폰번호 10자리입력시 space제거
	div_info.MaskEdit00.value = gfn_removeSpace(div_info.MaskEdit00.value); 
	
	//휴대번호가 변경된 경우 암호화 문자가 있는지 확인
	var beforeHpNo = ds_userLst_popCmp.getColumn(0,"HP_NO");
	var afterHpNo = div_info.MaskEdit00.value;
	
	if(beforeHpNo != afterHpNo && !gfn_checkPhone(afterHpNo) ){
		gfn_message("A","DMS00053","I" );	//휴대전화번호 형식이 맞지 않습니다.
		div_info.MaskEdit00.class = 'Error';
		div_info.MaskEdit00.setFocus();
		 return false;
	}

	//신규일 경우 해당 건 재조회 하기 위해 부모창 조회 조건 set
	if (mode == "new") {
		//opener.ds_ncFieldMap.clear();
		opener.ds_ncFieldMap.setColumn(0, "LGIN_ID", ds_userLst_pop.getColumn(0, "LGIN_ID"));
		opener.ds_ncFieldMap.setColumn(0, "BRND_CD", ds_userLst_pop.getColumn(0, "BRND_CD"));
		opener.ds_ncFieldMap.setColumn(0, "EML_ADDR", ds_userLst_pop.getColumn(0, "EML_ADDR"));
		opener.ds_ncFieldMap.setColumn(0, "USER_NM", ds_userLst_pop.getColumn(0, "USER_NM"));
		opener.ds_ncFieldMap.setColumn(0, "DEAL_CO_CD", ds_userLst_pop.getColumn(0, "DEAL_CO_CD"));
		opener.ds_ncFieldMap.setColumn(0, "HP_NO", ds_userLst_pop.getColumn(0, "HP_NO"));
		if (!gfn_isEmpty(ds_userLst_pop.getColumn(0, "USER_CL_CD"))) {
			opener.ds_ncFieldMap.setColumn(0, "USER_CL_CD", ds_userLst_pop.getColumn(0, "USER_CL_CD"));
		} else {
			opener.ds_ncFieldMap.setColumn(0, "USER_CL_CD", "%");
		}
		opener.ds_ncFieldMap.setColumn(0, "DEPT_CD", ds_userLst_pop.getColumn(0, "GRPC_DEPT_CD"));
		if (!gfn_isEmpty(ds_userLst_pop.getColumn(0, "DEPT_CD"))) {
			opener.ds_ncFieldMap.setColumn(0, "USER_ST_CD", ds_userLst_pop.getColumn(0, "USER_ST_CD"));
		} else {
			opener.ds_ncFieldMap.setColumn(0, "USER_ST_CD", "%");
		}
		if (!gfn_isEmpty(ds_userLst_pop.getColumn(0, "GRPC_CO_CD"))) {
			opener.ds_ncFieldMap.setColumn(0, "GRPC_CO_CD", ds_userLst_pop.getColumn(0, "GRPC_CO_CD"));
		} else {
			opener.ds_ncFieldMap.setColumn(0, "GRPC_CO_CD", "%");
		}
	}
	
	if ( fn_chkBeforeSave() ) {
		//부모화면 데이터셋에 해당 데이터 copy  
		opener.ds_userLst.copyRow(opener.ds_userLst.rowposition,ds_userLst_pop,0);
	
	    // 이름,이메일,휴대폰번호 수정여부 Check
	    fn_chkColumnChange();
		if ( opener.fn_saveMain() )	{
			//close(true);
			//gfn_closePop("FSC010P");
		} else {
			div_info.edt_userno.class = 'Error';
			div_info.edt_userno.setFocus();
		}
	} else {
		return false;
	}
	
	
}

/*----------------------------------------------------------------------------------------------
 * 설명   : 취소
-----------------------------------------------------------------------------------------------*/
function btn_cancel_onclick(obj:Button,  e:ClickEventInfo)
{	
	close(false);	
}

/*----------------------------------------------------------------------------------------------
 * 설명   : 닫기
-----------------------------------------------------------------------------------------------*/
function btn_close_onclick(obj:Button,  e:ClickEventInfo)
{
	close(false);
}



function btn_chk_loginid(obj:Button,  e:ClickEventInfo)
{
	//trace("fn_chk_loginid()["+fn_chk_loginid()+"]");
	if(fn_chk_loginid() ){
		return true;
	} else {
		return false;
	}
}


/*----------------------------------------------------------------------------------------------
 * 설명   : 버튼 Event
-----------------------------------------------------------------------------------------------*/

/*===============================================================================================
 * [ PART 8 ] Event
================================================================================================*/
/*----------------------------------------------------------------------------------------------
 * 설명   : 휴대폰번호 masking 처리 Event
 * param   : 
 * return  : true/false
-----------------------------------------------------------------------------------------------*/
function div_info_MaskEdit00_onkillfocus(obj:MaskEdit, e:KillFocusEventInfo)
{
	//전화번호 masking 처리 onkillfocus Event
	gfn_tel_onkillfocus(obj);
}

function div_info_MaskEdit00_onsetfocus(obj:MaskEdit, e:SetFocusEventInfo)
{
	//전화번호 masking 처리 onsetfocus Event
	gfn_tel_onsetfocus(obj);
}

/*===============================================================================================
 * [ PART 9 ] User Defined
================================================================================================*/

/*----------------------------------------------------------------------------------------------
 * 설명   : 비밀번호 초기화
 * param   : 
 * return  : true/false
-----------------------------------------------------------------------------------------------*/
function fn_pwd_init(obj:Button,  e:ClickEventInfo)
{	
	ds_chg_pwdinit.setColumn(0, "INIT_GB", "1");
	ds_chg_pwdinit.setColumn(0, "LGIN_ID", ds_userLst_pop.getColumn(0, "LGIN_ID"));
	ds_chg_pwdinit.setColumn(0, "USER_NO", ds_userLst_pop.getColumn(0, "USER_NO"));
	fn_chg_PwdInit("1");
}


/*----------------------------------------------------------------------------------------------
 * 설명   : 비밀번호 오류횟수 초기화
 * param   : 
 * return  : true/false
-----------------------------------------------------------------------------------------------*/
function fn_pwderr_init(obj:Button,  e:ClickEventInfo)
{	
	ds_chg_pwdinit.setColumn(0, "INIT_GB", "2");
	ds_chg_pwdinit.setColumn(0, "USER_NO", ds_userLst_pop.getColumn(0, "USER_NO"));
	fn_chg_PwdInit("2");
}
/*----------------------------------------------------------------------------------------------
 * 설명   : 저장전 유효성 검사
 * param   : 
 * return  : true/false
-----------------------------------------------------------------------------------------------*/
function fn_chkBeforeSave()	
{	
	//저장전 수정,신규입력데이터의 trim처리 
	gfn_dsTrim(ds_userLst_pop);

	if(!gfn_isUpdated(ds_userLst_pop)){     //저장할 테이타셋 ds_userLst_pop
		gfn_message("A","DMS00022","I");	//변경된 정보가 없습니다.
		return false;
	}

	if ( !gfn_getValidateCompList(div_info) ) {	
		return false;
	} 
	//복호화 함수 적용후 주석 뺄것 2015.07.22 심상준
	/*
	if (!gfn_isEmail(div_info.edt_emil.value) ) {
		gfn_message("A","DMS00061","I" );	//이메일 형식이 맞지 않습니다.
		return false;
	}
	*/
	
	//가맹점주(사용자구분코드:25) 브랜드코드/가맹점번호 필수 Check
	/*
	if(ds_userLst_pop.getColumn(0, "USER_CL_CD") == '25') {
		if (gfn_isNull(div_info.edt_brnCd.value)) {
			gfn_message("A","DMS00023","I", "", "브랜드코드");
			return false;
		}
		if (gfn_isNull(div_info.edt_mchtNo.value)) {
			gfn_message("A","DMS00023","I", "", "가맹점번호");
			return false;
		}
	}
	*/
	return true;
	
}

/*----------------------------------------------------------------------------------------------
 * 설명   : 이름,이메일,휴대폰번호 수정여부 Check
 * param   : 
 * return  : 
-----------------------------------------------------------------------------------------------*/
function fn_chkColumnChange()	
{	
    if(mode=='new'){
       // 신규등록은 변경여부 'Y'로 Setting
       //opener.ds_userLst.setColumn(opener.ds_userLst.rowposition,"userNmChgYn", "Y");
       opener.ds_userLst.setColumn(opener.ds_userLst.rowposition,"EMAIL_CHG_YN", "Y");
       opener.ds_userLst.setColumn(opener.ds_userLst.rowposition,"HP_NO_CHG_YN", "Y");
    } else {
		//2015.1.5 이름은 암호화하지 않기로함.
		// 이름 변경 Check
		//if(ds_userLst_popCmp.getColumn(0,"userNm") == div_info.edt_usernm.value) {
		//	opener.ds_userLst.setColumn(opener.ds_userLst.rowposition,"userNmChgYn", "N");
		//} else {
		//	opener.ds_userLst.setColumn(opener.ds_userLst.rowposition,"userNmChgYn", "Y");
		//}
		
		// 이메일 변경 Check
		if(ds_userLst_popCmp.getColumn(0,"EML_ADDR") == div_info.edt_emil.value) {
			opener.ds_userLst.setColumn(opener.ds_userLst.rowposition,"EMAIL_CHG_YN", "N");
		} else {
			opener.ds_userLst.setColumn(opener.ds_userLst.rowposition,"EMAIL_CHG_YN", "Y");
		}
		
		// 휴대전화 변경 Check
		if(ds_userLst_popCmp.getColumn(0,"HP_NO") == div_info.MaskEdit00.value) {
			opener.ds_userLst.setColumn(opener.ds_userLst.rowposition,"HP_NO_CHG_YN", "N");
		} else {
			opener.ds_userLst.setColumn(opener.ds_userLst.rowposition,"HP_NO_CHG_YN", "Y");
		}
	}
}

/*----------------------------------------------------------------------------------------------
 * 설명   : 브랜드 검색, 가맹점 검색
 * param   : 
 * return  : 
-----------------------------------------------------------------------------------------------*/
function div_Search_brnd_onkeydown(obj:Edit, e:KeyEventInfo)
{
	if (e.keycode == KEYCODE_ENTER) {
		divLevel02_btn_00_onclick();
	}
}

function divLevel02_btn_00_onclick(obj:Button,  e:ClickEventInfo)
{
	//alert("브랜드 검색 팝업");
	var sParam01 = div_info.edt_brnNm.value;
	var sParam02 = div_info.edt_brnCd.value;
	var sParam03 = "A1"; //대리점만 검색
	var sParam04 = "";
	if ( e == null ) {
		sParam04 = "key";
	} else {
		sParam04 = "button";
	}
	var arrArgs = {argAutoSelect:true, argCallProgram:"FSC010P", argParam01:sParam01, argParam02:sParam02, argParam03:sParam03, argParam04:sParam04};
	var sRtnVal = gfn_dialog("FBI004P", arrArgs);

	//팝업에서 입력받은 값 리턴
	if ( gfn_isNull(sRtnVal) || sRtnVal == "cancel" ) {
		//취소시 값 제거
		div_info.edt_brnCd.value = "";
		div_info.edt_brnNm.value = "";
	} else {	//Object이용시
		div_info.edt_brnCd.value  = sRtnVal["supDealCoCd"];
		div_info.edt_brnNm.value  = sRtnVal["supDealCoNm"];
	}
}

/*----------------------------------------------------------------------------------------------
 * 설명   : 조회조건 리셋
-----------------------------------------------------------------------------------------------*/
function div_search_btn_reset_onclick(obj:Button,  e:ClickEventInfo)
{
	div_info.edt_brnCd.value = "";
	div_info.edt_brnNm.value = "";
}

/*----------------------------------------------------------------------------------------------
 * 설명   :  상세사용자정보 설정
-----------------------------------------------------------------------------------------------*/
function fn_setDetailUserInfo(bSecureYn)
{  
	//부모창의 데이터 복사
	ds_userLst_pop.updatecontrol = false;
	ds_userLst_pop.copyRow(0, pDsUserList,pidx);
	//trace("ds_userLst_pop======1"+ds_userLst_pop.saveXML());
	
	//개인정보조회 콜백함수에서 호출한 경우 
	if(!gfn_isNull(bSecureYn) && bSecureYn){
		var sUserNm = ds_prnInfoInq.lookup("PRN_INFO_INQ_ITEM_CD",g_USER_NM,"PRN_INFO_INQ_CTT");    
		var sEmlAddr = ds_prnInfoInq.lookup("PRN_INFO_INQ_ITEM_CD",g_EMAIL_CD,"PRN_INFO_INQ_CTT");    
		var sHpNo=  ds_prnInfoInq.lookup("PRN_INFO_INQ_ITEM_CD",   g_HPNO_CD,"PRN_INFO_INQ_CTT");    
				
		if(!gfn_isEmpty(sUserNm)) ds_userLst_pop.setColumn(0, "USER_NM",sUserNm);
		if(!gfn_isEmpty(sHpNo)) ds_userLst_pop.setColumn(0, "HP_NO",sHpNo);
		if(!gfn_isEmpty(sEmlAddr)) ds_userLst_pop.setColumn(0, "EML_ADDR",sEmlAddr);
	}
	ds_userLst_pop.setRowType(0, Dataset.ROWTYPE_NORMAL);
	ds_userLst_pop.updatecontrol = true;
	// Data비교를 위해 Temp DataSet 생성 2014-10-08
	ds_userLst_popCmp.copyRow(0, ds_userLst_pop, ds_userLst_pop.rowposition);
	
	//수정일때 컬럼 disable
	if(mode!='new')
	{
		//개인정보조회권한에 따라 조회/수정으로 분기 처리됨
		if(sSaveAutrYn){	
			div_title.text = "사용자정보수정";
			//조회인 경우 저장버튼 비활성화
			Div00.btn_confirm.enable = true;
		} else {
			div_title.text = "사용자정보조회";
			//조회인 경우 저장버튼 비활성화
			Div00.btn_confirm.enable = false;
		}
		
		div_info.btn_chk_lgid.visible = false;			
		ds_chk_lgid.value = ds_userLst_pop.getColumn(0,"LGIN_ID");
		ds_chk_lgid.setColumn(0, "LGIN_ID",  div_info.edt_lginid.value);
		div_info.btn_pwd.enable = true;
		div_info.btn_pwderr.enable = true;		
		// 휴대폰번호 자릿수에 따른 출력
		div_info_MaskEdit00_onkillfocus(div_info.MaskEdit00);			
		
		///수정(GW)시 userClCd & 초기화버튼 disable-2014-10-14 lje
		/*
		if(ds_userLst_pop.getColumn(0, "userClCd").substring(0,1) == "1"){
			//div_info.cob_cl.enable = false;  2014-11-12 by leeym
			div_info.btn_pwd.enable = false;
			div_info.btn_pwderr.enable = false;
		}
		*/
	}else{
	//신규등록인 경우
		div_info.btn_chk_lgid.visible = true;		
		div_info.cob_st.enable = false;
		div_info.edt_userno.enable = false;
		Div00.btn_confirm.enable = true; //저장버튼 활성화 
	}
	
	if (!gfn_isEmpty(ds_userLst_pop.getColumn(0,"LGIN_ID"))) div_info.edt_lginid.enable = false;
	
	if (!gfn_isEmpty(ds_userLst_pop.getColumn(0,"LGIN_ID"))) 
	{		
		//div_info.cob_cl.index = ds_DMS004.findRow("CM_CD_ID",ds_userLst_pop.getColumn(0,"USER_CL_CD"));
		//div_info.cob_st.index = ds_DMS002.findRow("CM_CD_ID",ds_userLst_pop.getColumn(0,"USER_ST_CD"));

	}  else  {

	  div_info.cob_cl.index = 0;
	  div_info.cob_st.index = 0;
	
	}
	// SV(사용자구분코드:11), 팀장(사용자구분코드:12) - 직급/직책/조직 수정 가능
	if(ds_userLst_pop.getColumn(0, "USER_CL_CD") != "11" && ds_userLst_pop.getColumn(0, "USER_CL_CD") != "12") {
		div_info.edt_jobr.readonly = true;
		div_info.edt_jtil.readonly = true;
		div_info.edt_org.readonly = true;
	}
	
	//신규,수정,수정(GW) 경우에 따라 공통코드DS 변경 -2014-10-14 lje 
	if(mode=='new'){
		//신규 - ds_DMS002 필터
		//ds_DMS002.filter("CM_CD_ID > 20 ||  CM_CD_ID < 10"); // GW사용자도 등록가능하게함. 2014-11-21 leeym
		ds_DMS002_cp.copyData(ds_DMS002,true);
		ds_DMS002.reset();
		//신규 - ds_DMS004 필터 안 함.
		ds_DMS004_cp.copyData(ds_DMS004,true);
		ds_DMS004.reset();
		div_info.cob_st.index = 1;
		div_info.cob_cl.index = 0;
		//div_info.cbo_cocd.index = 0;
	} else {
		// 수정팝업화면인 경우에도 모든 사용자구분코드를 선택할 수 있도록 수정함   
		ds_DMS002_cp.copyData(ds_DMS002,true);
		ds_DMS002.reset();
		//수정 - ds_DMS004 필터
		ds_DMS004.filter("CM_CD_ID != 00");
		ds_DMS004_cp.copyData(ds_DMS004,true);
		ds_DMS004.reset();		
	}
	/*	else{
	    if(ds_userLst_pop.getColumn(0, "userClCd").substring(0,1) == "1"){
			//수정(GW) - ds_DMS002 필터   2014-11-12 by leeym 
			ds_DMS002.filter("CM_CD_ID < 20 &&  CM_CD_ID > 9");
			ds_DMS002_cp.copyData(ds_DMS002,true);
			ds_DMS002.reset();
		}else{
			//수정 - ds_DMS002 필터
			ds_DMS002.filter("CM_CD_ID > 20 ||  CM_CD_ID < 10");
			ds_DMS002_cp.copyData(ds_DMS002,true);
			ds_DMS002.reset();
		}

	}
	*/
	//trace("ds_userLst_pop======2"+ds_userLst_pop.saveXML());
	if (!gfn_isEmpty(ds_userLst_pop.getColumn(0,"DEAL_CO_CD"))) divLevel02_btn_01_onclick();
}
/*----------------------------------------------------------------------------------------------
 * 설명   :  사용자정보 초기화
-----------------------------------------------------------------------------------------------*/
function fn_userInit()
{
	//개인정보 조회권한 혹은 저장권한이 있는 경우 조회 서비스 호출	
	if(sPrnInfoInqAutrYn || sSaveAutrYn ){
		//조회파라미터 (사용자번호) 설정
		var sUserNo = pDsUserList.getColumn(pidx,"USER_NO");
		ds_searchEncInfoParam.clearData();
		ds_searchEncInfoParam.insertRow(0);
		ds_searchEncInfoParam.setColumn(0,"USER_NO",sUserNo);
		//사용자 암호화컬럼정보 조회 
		fn_searchEncInfo();
	} else {
		//상세사용자데이터설정
		fn_setDetailUserInfo();
	}
}
/*----------------------------------------------------------------------------------------------
 * 설명   :  암호화컬럼 조회 후 처리
-----------------------------------------------------------------------------------------------*/
function fn_afterSearchEncInfo()
{
	if(ds_searchEncInfo.getRowCount()>0){
		//조회파라미터 데이터셋 설정
		var nRow = 0;
		//var sUserNmEnpt = pDsUserList.getColumn(pidx,"userNmEnpt");
		var sEmlAddrEnpt = ds_searchEncInfo.getColumn(0,"EML_ADDR_ENPT");
		var sHpNoEnpt = ds_searchEncInfo.getColumn(0,"HP_NO_ENPT");
				
		ds_prnInfoInq.clearData();
		//if(!gfn_isEmpty(sUserNmEnpt)){
			//사용자명
			//nRow = ds_prnInfoInq.addRow();
			//ds_prnInfoInq.setColumn(nRow ,"prnInfoInqItemCd",g_USER_NM);
			//ds_prnInfoInq.setColumn(nRow ,"prnInfoInqCtt",  sUserNmEnpt);
		//}
		if(!gfn_isEmpty(sEmlAddrEnpt)){
			//이메일주소
			nRow = ds_prnInfoInq.addRow();
			ds_prnInfoInq.setColumn(nRow ,"PRN_INFO_INQ_ITEM_CD",g_EMAIL_CD);
			ds_prnInfoInq.setColumn(nRow ,"PRN_INFO_INQ_CTT", sEmlAddrEnpt);
		}
		if(!gfn_isEmpty(sHpNoEnpt)){
			//휴대전화 
			nRow = ds_prnInfoInq.addRow();
			ds_prnInfoInq.setColumn(nRow ,"PRN_INFO_INQ_ITEM_CD",g_HPNO_CD);
			ds_prnInfoInq.setColumn(nRow ,"PRN_INFO_INQ_CTT", sHpNoEnpt);
		}
			
		/*
		[개인정보이력등록용 파라미터 정보 ]
		
		INQ_OBJ_CL_CD : 조회대상구분코드
		공통코드 : SCC012 - 10 : 회원 / 20 : 사용자 / 30 : 가맹점
		
		INQ_REQ_CHNL_CD : 조회요청채널코드
        공통코드 : SCC018 - 10 : 백오피스
                                 20 : 홈페이지
                                 30 : 모바일앱
                                 31 : 모바일웹
                                 40 : VOC
                                 41 : ARS
                                 50 : POS
                                 90 : 시스템
 		
		*/	
		ds_searchSecureInfo.clearData();
		ds_searchSecureInfo.insertRow(0);
		ds_searchSecureInfo.setColumn(0,'FRM_ID',this.name);
		ds_searchSecureInfo.setColumn(0,'INQ_OBJ_CL_CD',"20");  //20 : 사용자
		ds_searchSecureInfo.setColumn(0,'INQ_OBJ_NO',gds_user.getColumn(0,"userNo"));  //조회대상번호 
		ds_searchSecureInfo.setColumn(0,'INQ_REQ_CHNL_CD',gds_user.getColumn(0,"reqChnlCd")); 
		ds_searchSecureInfo.setColumn(0,'INQ_REQ_IDF_NO',gds_user.getColumn(0,"userNo"));		
		
		//개인정보조회
		if(ds_prnInfoInq.getRowCount()>0){		
			gfn_searchSecureInfo("searchSecureInfo", "fn_callBack", "ds_prnInfoInq", "ds_searchSecureInfo" ); //개인정보 조회 
		} else {
			fn_setDetailUserInfo();
		}
	} else {
		fn_setDetailUserInfo();
	}
}
]]></Script>
  </Form>
</FDL>
