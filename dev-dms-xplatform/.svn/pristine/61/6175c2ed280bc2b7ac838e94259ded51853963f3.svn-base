<?xml version="1.0" encoding="utf-8"?>
<FDL version="1.5">
  <TypeDefinition url="..\default_typedef.xml"/>
  <Form id="sample0090" classname="Employees" inheritanceid="" position="absolute 0 0 1038 528" onload="Form_onload" titletext="업무공통샘플" onclose="Form_onclose">
    <Layouts>
      <Layout>
        <compCalendarMonth id="mcalDate" titletext="월력콤포넌트" taborder="40" scrollbars="none" position="absolute 611 546 692 566" style="background:transparent; border:0 none #428cb6ff ; "/>
        <Button id="btn_psnInfoPopup" taborder="16" text="개인정보조회" class="btn_common" position2="absolute l:196 w:92 t:20 h:20" positiontype="position2" onclick="Button00_onclick" userdata="GRP1:prnInfoInqAutrYn"/>
        <Static id="Static17" class="sta_WFDA_dotline_H" position2="absolute l:528 w:480 t:119 h:10" positiontype="position2" style="background:transparent URL('theme://Img/bg_dotline_H.png') repeat-x left middle;"/>
        <Static id="stSubTitle03" text="개인정보조회 팝업" class="sub_title" position="absolute 2 2 396 16" onclick="stSubTitle03_onclick"/>
        <Edit id="Edit00" taborder="20" position="absolute 121 22 180 42" validate="" werqwer="" value="16"/>
        <Edit id="Edit01" taborder="21" position="absolute 121 44 408 64" validate="" werqwer="" value="j1yt4WE9NiVnv6Iu86ooRakkDYOBz5a9Jxnmb12rCKCCsJHoWbuBsbOBBCpeYIoclmDVSv058HuflgTwmJywWw=="/>
        <Button id="Button01" taborder="22" text="점유인증팝업" class="btn_common" position2="absolute l:754 w:92 t:25 h:20" positiontype="position2" onclick="Button01_onclick"/>
        <Static id="stSubTitle00" text="점유인증 팝업" class="sub_title" position="absolute 532 2 926 16"/>
        <Edit id="Edit02" taborder="23" value="1000000001" position="absolute 648 25 746 45" validate="" werqwer=""/>
        <Edit id="Edit03" taborder="24" value="01012345678" position="absolute 648 49 846 69" validate="" werqwer=""/>
        <Edit id="Edit04" taborder="25" position="absolute 648 97 682 117" validate="" werqwer="" enable="false"/>
        <Edit id="Edit05" taborder="26" position="absolute 688 96 786 116" validate="" werqwer="" enable="false"/>
        <Static id="Static03" text="조회항목코드" position="absolute 12 22 96 43" tooltiptext="11:전화번호(자택), 12:전화번호(직장), 13:핸드폰번호, 14:제휴신용카드번호, 15:Email주소, 16:자택주소, 17:직장주소, 18:성명"/>
        <Static id="Static04" text="조회내용" position="absolute 12 44 96 65"/>
        <Static id="Static05" text="조회대상구분코드" position="absolute 14 68 128 89" tooltiptext="10:회원, 20:사용자, 30:가맹점"/>
        <Edit id="Edit06" taborder="27" value="10" position="absolute 123 68 182 88" validate="" werqwer=""/>
        <Static id="Static06" text="조회대상번호" position="absolute 204 68 288 89"/>
        <Edit id="Edit07" taborder="28" value="1231231231" position="absolute 305 68 408 88" validate="" werqwer="" oneditclick="Edit07_oneditclick"/>
        <Static id="Static07" text="조회요청채널코드" position="absolute 14 91 120 112" tooltiptext="10:백오피스, 20:홈페이지, 30:모바일, 40:VOC"/>
        <Edit id="Edit08" taborder="29" value="10" position="absolute 123 91 182 111" validate="" werqwer=""/>
        <Static id="Static01" text="요청채널코드" position="absolute 544 72 650 93" tooltiptext="10:백오피스, 20:홈페이지, 30:모바일, 40:VOC"/>
        <Edit id="Edit10" taborder="31" value="10" position="absolute 648 72 707 92" validate="" werqwer=""/>
        <Static id="Static09" text="인증휴대전화번호" position="absolute 544 48 650 69" tooltiptext="01:백오피스, 02:홈페이지, 03:모바일, 04:VOC"/>
        <Static id="Static10" text="회원번호" position="absolute 544 24 650 45" tooltiptext="01:백오피스, 02:홈페이지, 03:모바일, 04:VOC"/>
        <Static id="Static12" text="인증결과" position="absolute 544 96 602 117" tooltiptext="01:백오피스, 02:홈페이지, 03:모바일, 04:VOC"/>
        <Static id="stSubTitle01" text="우편번호 팝업" class="sub_title" position="absolute 2 245 396 259"/>
        <Button id="Button02" taborder="32" text="우편번호검색" onclick="Button02_onclick" class="btn_common" position2="absolute l:120 w:92 t:244 h:20" positiontype="position2"/>
        <Edit id="Edit09" taborder="33" position="absolute 77 267 200 287"/>
        <Edit id="Edit11" taborder="34" position="absolute 77 292 496 312"/>
        <Static id="Static08" text="우편번호" position="absolute 14 267 120 288" tooltiptext="01:백오피스, 02:홈페이지, 03:모바일, 04:VOC"/>
        <Static id="Static13" text="도로명주소" position="absolute 14 291 120 312"/>
        <Static id="Static00" position="absolute 592 152 919 190"/>
        <Static id="Static11" class="sta_WFDA_dotline_H" position2="absolute l:2 w:1008 t:220 h:10" positiontype="position2" style="background:transparent URL('theme://Img/bg_dotline_H.png') repeat-x left middle;"/>
        <Static id="stSubTitle02" text="비밀번호변경 팝업" class="sub_title" position="absolute 532 134 926 148"/>
        <Button id="Button03" taborder="36" text="비밀번호변경" class="btn_common" position2="absolute l:758 w:92 t:160 h:20" positiontype="position2" onclick="Button03_onclick"/>
        <Edit id="Edit13" taborder="37" position="absolute 647 160 753 180" validate="" werqwer=""/>
        <Static id="Static15" text="로그인 ID" position="absolute 544 160 641 181" tooltiptext="01:백오피스, 02:홈페이지, 03:모바일, 04:VOC"/>
        <Static id="Static16" text="조회요청식별번호" position="absolute 206 91 312 112" onclick="Static16_onclick"/>
        <Edit id="Edit14" taborder="38" value="USR000001" position="absolute 315 91 408 111" validate="" werqwer=""/>
        <Static id="stSubTitle04" text="오퍼검색 팝업" class="sub_title" position="absolute 2 333 396 347"/>
        <Static id="stc_oferId" text="오퍼ID" position="absolute 14 354 59 374"/>
        <Edit id="edt_oferId" taborder="39" maxlength="100" onkeydown="div_search_edt_oferId_onkeydown" position="absolute 66 353 170 373"/>
        <Static id="stc_oferNm" text="오퍼 명" position="absolute 201 353 254 373"/>
        <Edit id="edt_oferNm" taborder="40" maxlength="100" onkeydown="div_search_edt_oferId_onkeydown" position="absolute 259 353 382 373"/>
        <Button id="Button04" taborder="41" text="검색" class="btn_common" position2="absolute l:396 w:60 t:354 h:20" positiontype="position2" onclick="Button04_onclick"/>
        <Static id="stSubTitle05" text="다국어&amp;다건처리샘플 화면 파라매터 가져오기" class="sub_title" position="absolute 2 397 396 411"/>
        <Button id="Button05" taborder="42" text="가져오기" class="btn_common" position2="absolute l:220 w:92 t:423 h:20" positiontype="position2" onclick="Button05_onclick"/>
        <Edit id="edt_param1" taborder="43" position="absolute 109 423 215 443" validate="" werqwer=""/>
        <Static id="Static14" text="가져온 파라매터" position="absolute 14 423 111 444"/>
        <Static id="Static02" text="w&#13;&#10;20" class="tip_guide" visible="false" position2="absolute l:512 w:20 t:-1 h:527" positiontype="position2"/>
        <Combo id="cbo_brndLst" taborder="44" autoselect="true" innerdataset="@ds_autrBrnd" codecolumn="brndCd" datacolumn="brndNm" position="absolute 596 265 726 285" visible="false"/>
        <Static id="stc_01" text="브랜드" class="sta_WFSA_Label" position="absolute 532 265 592 285"/>
        <Static id="stSubTitle06" text="접근가능한 브랜드 가맹점리스트" class="sub_title" position="absolute 531 237 925 251"/>
        <Combo id="cbo_mchtLst" taborder="45" autoselect="true" innerdataset="@ds_autrMcht" codecolumn="mchtNo" datacolumn="mchtNm" position="absolute 596 289 726 309" visible="false"/>
        <Static id="stc_00" text="가맹점" class="sta_WFSA_Label" position="absolute 532 289 592 309"/>
        <Static id="Static18" text="h10" class="tip_guide" visible="false" position2="absolute l:712 w:42 t:308 h:10" positiontype="position2"/>
        <Div id="div_brnd" taborder="58" text="Div00" position="absolute 596 265 856 287" style="color:transparent;" visible="false">
          <Layouts>
            <Layout width="362" height="116">
              <Edit id="edt_brnCd" taborder="0" onkeydown="div_Search_edt_brnCd_onkeydown" ontextchange="gfn_editNm_ontextchange" class="Code" visible="true" position="absolute 0 0 70 20" anchor="default"/>
              <Edit id="edt_brnNm" taborder="1" imemode="hangul" onkeydown="div_Search_edt_brnCd_onkeydown" ontextchange="divLevel02_edt_brnNm_ontextchange" visible="true" position="absolute 71 0 201 20" anchor="default"/>
              <Button id="btn_brndSrch" taborder="2" class="btn_WFSA_search" visible="true" position="absolute 202 0 222 20" tooltiptype="hover" anchor="default" onclick="div_brnd_btn_brndSrch_onclick"/>
              <Button id="btn_reset" taborder="3" class="btn_WFSA_reset" visible="true" position="absolute 223 0 243 20" tooltiptext="초기화" anchor="default" onclick="div_brnd_btn_reset_onclick"/>
            </Layout>
          </Layouts>
        </Div>
        <Div id="div_mcht" taborder="59" style="color:transparent;" text="Div00" visible="false" position="absolute 596 289 856 311">
          <Layouts>
            <Layout width="362" height="116">
              <Edit id="edt_mchtNo" taborder="4" onkeydown="div_Search_edt_brnCd_onkeydown" ontextchange="gfn_editNm_ontextchange" class="Code" position="absolute 0 0 70 20" anchor="default"/>
              <Edit id="edt_mchtNm" taborder="5" imemode="hangul" onkeydown="div_Search_edt_brnCd_onkeydown" ontextchange="divLevel02_edt_brnNm_ontextchange" position="absolute 71 0 201 20" anchor="default"/>
              <Button id="btn_mchtSrch" taborder="6" class="btn_WFSA_search" position="absolute 202 0 222 20" tooltiptype="hover" anchor="default" onclick="div_mcht_btn_mchtSrch_onclick"/>
              <Button id="btn_reset" taborder="7" class="btn_WFSA_reset" position="absolute 223 0 243 20" tooltiptext="초기화" anchor="default" onclick="div_mcht_btn_reset_onclick"/>
            </Layout>
          </Layouts>
        </Div>
        <Button id="btn_psnInfoPopupNoRegHst" taborder="60" text="개인정보조회 이력등록제외" class="btn_common" position2="absolute l:296 w:170 t:20 h:20" positiontype="position2" onclick="Button06_onclick" userdata="GRP1:prnInfoInqAutrYn"/>
        <UserGrid id="grd_main" taborder="61" binddataset="ds_userLst" autoenter="select" useinputpanel="false" cellsizingtype="col" cellmovingtype="col" hideendline="col" nodataimage="URL('theme://Img/ico_WFDA_nodata.png')" selectscrollmode="scroll" position="absolute 0 153 509 198" anchor="all" tooltiptype="hover" style="cursor:hand;" _number="true" _status="false" _check="false" _checkColumnName="_checkcol" _checkedallevent="false" _nodataimage="true" _sort="true" _tooltip="true" selecttype="cell" onselectchanged="grd_main_onselectchanged">
          <Formats>
            <Format id="default">
              <Columns>
                <Column size="156" band="left"/>
                <Column size="138"/>
                <Column size="212"/>
              </Columns>
              <Rows>
                <Row size="24" band="head"/>
                <Row size="19"/>
              </Rows>
              <Band id="head">
                <Cell style="selectline: ;" class="cellFixed_B" text="사용자명"/>
                <Cell col="1" text="휴대전화번호"/>
                <Cell col="2" text="이메일주소"/>
              </Band>
              <Band id="body">
                <Cell displaytype="text" edittype="none" class="cellFixed_B" text="bind:userNm"/>
                <Cell col="1" displaytype="normal" text="expr:fn_tel_format(hpNo)"/>
                <Cell col="2" text="bind:emlAddr"/>
              </Band>
            </Format>
          </Formats>
        </UserGrid>
        <Static id="stc_subTitle01" text="개인정보조회 그리드 예시" class="sub_title" position="absolute 0 131 179 151"/>
        <Button id="btn_prnRow" taborder="62" text="개인정보조회-row전체" class="btn_common" position="absolute 368 131 507 151" anchor="top right" onclick="btn_searchPsnInfoRow_onclick"/>
        <Button id="btn_prnCell" taborder="63" text="개인정보조회-단건" onclick="btn_searchPsnInfo_onclick" class="btn_common" position="absolute 240 131 363 151" anchor="top right"/>
        <Button id="btn_emlTest" taborder="64" text="SMS발송" class="btn_common" position2="absolute l:812 w:76 t:353 h:20" positiontype="position2" onclick="btn_emlTest_onclick"/>
        <Static id="stSubTitle07" text="SMS발송테스트" class="sub_title" position="absolute 532 333 926 347"/>
        <Static id="Static19" text="수신휴대전화번호" position="absolute 544 354 645 375"/>
        <Edit id="edt_retn_email00" taborder="66" position="absolute 648 377 805 397" validate="" werqwer="" value="DMS00002"/>
        <Static id="Static20" text="알림메시지코드" position="absolute 544 378 645 399"/>
        <Edit id="edt_retn_email01" taborder="67" position="absolute 648 401 805 421" validate="" werqwer="" value="테스트"/>
        <Static id="Static21" text="메시지파라매터" position="absolute 544 402 645 423"/>
        <Static id="stSubTitle08" text="SAP_ERP_IF Test" class="sub_title" position="absolute 536 474 668 488" onclick="stSubTitle08_onclick"/>
        <Button id="btn_sapErpIF" taborder="71" text="JCO_TEST" onclick="btn_sapErpIF_onclick" class="btn_common" position2="absolute l:824 w:76 t:470 h:20" positiontype="position2"/>
        <Edit id="Edit12" taborder="72" value="01012345678" position="absolute 647 351 805 372" validate="" werqwer=""/>
        <Button id="btn_sfs" taborder="75" text="SFS저장" class="btn_common" position2="absolute l:391 w:60 t:484 h:20" positiontype="position2" onclick="btn_sfs_onclick"/>
        <Static id="stSubTitle09" text="USCAN SFS 폴더 암호화" class="sub_title" position="absolute 2 466 396 480"/>
        <Button id="btn_addFileOne" taborder="76" text="폴더선택" onclick="btn_addFileOne_onclick" class="btn_common" position="absolute 331 484 390 504"/>
        <Edit id="editFilePath" taborder="77" readonly="true" position="absolute 7 484 329 504"/>
        <ActiveX id="InziSFS" position="absolute 349 414 428 459" useautobitmapcache="1" anchor="default" taborder="78" progid="{E4527462-B56E-489B-B983-7C3CAAB8C2FA}"/>
        <Button id="btn_sfs00" taborder="79" text="SFS해제" class="btn_common" position2="absolute l:452 w:60 t:484 h:20" positiontype="position2" onclick="btn_sfs00_onclick"/>
      </Layout>
    </Layouts>
    <Objects>
      <Dataset id="ds_autrBrnd" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="brndCd" type="STRING" size="256"/>
          <Column id="brndNm" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_autrMcht" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="mchtNo" type="STRING" size="256"/>
          <Column id="mchtNm" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_userLst" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="userNm" type="STRING" size="256"/>
          <Column id="hpNo" type="STRING" size="256"/>
          <Column id="emlAddr" type="STRING" size="256"/>
          <Column id="userNo" type="STRING" size="256"/>
          <Column id="targetColId" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows>
          <Row>
            <Col id="userNo">USR000000493</Col>
            <Col id="userNm">홍길동</Col>
            <Col id="hpNo">010***1234</Col>
            <Col id="emlAddr">**********st@abc.com</Col>
          </Row>
        </Rows>
      </Dataset>
      <Dataset id="ds_searchEncInfo" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="userNo" type="STRING" size="256"/>
          <Column id="emilAddrEnpt" type="STRING" size="256"/>
          <Column id="hpNoEnpt" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_searchSecureInfo" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="frmId" type="STRING" size="256"/>
          <Column id="inqObjClCd" type="STRING" size="256"/>
          <Column id="inqObjNo" type="STRING" size="256"/>
          <Column id="inqReqChnlCd" type="STRING" size="256"/>
          <Column id="inqReqIdfNo" type="STRING" size="256"/>
          <Column id="regHstYn" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows>
          <Row/>
        </Rows>
      </Dataset>
      <Dataset id="ds_prnInfoInq" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="prnInfoInqItemCd" type="STRING" size="2"/>
          <Column id="prnInfoInqCtt" type="STRING" size="2000"/>
          <Column id="prnInfoInqItemNm" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_gridMenuList" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="menuLevel" type="STRING" size="256"/>
          <Column id="menuNm" type="STRING" size="256"/>
          <Column id="menuId" type="STRING" size="256"/>
          <Column id="functionId" type="STRING" size="256"/>
          <Column id="enableYn" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows>
          <Row>
            <Col id="menuNm">개인정보조회-단건</Col>
            <Col id="menuLevel">0</Col>
            <Col id="menuId">btn_prnCell</Col>
            <Col id="functionId">btn_searchPsnInfo_onclick</Col>
            <Col id="enableYn">Y</Col>
          </Row>
        </Rows>
      </Dataset>
      <Dataset id="ds_smsSend" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="RETN_TEL_NO" type="STRING" size="256"/>
          <Column id="ALRT_MSG_ID" type="STRING" size="256"/>
          <Column id="MSG_PARAMS" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows>
          <Row>
            <Col id="RETN_TEL_NO">01012345678</Col>
            <Col id="ALRT_MSG_ID">DMS00002</Col>
            <Col id="MSG_PARAMS">테스트</Col>
          </Row>
        </Rows>
      </Dataset>
      <FileDialog id="FileDialog00" filter="All(*.*)|*.*|" filterindex="0" defaultextension="false"/>
    </Objects>
    <Bind>
      <BindItem id="item0" compid="edt_oferId" propid="value" datasetid="ds_ncFieldMap" columnid="oferId"/>
      <BindItem id="item5" compid="edt_oferNm" propid="value" datasetid="ds_ncFieldMap" columnid="oferNm"/>
      <BindItem id="item2" compid="edt_retn_email00" propid="value" datasetid="ds_smsSend" columnid="ALRT_MSG_ID"/>
      <BindItem id="item3" compid="edt_retn_email01" propid="value" datasetid="ds_smsSend" columnid="MSG_PARAMS"/>
      <BindItem id="item1" compid="Edit12" propid="value" datasetid="ds_smsSend" columnid="RETN_TEL_NO"/>
    </Bind>
    <InitValue>
      <Combo id="cbo_brndLst" index="0"/>
      <Combo id="cbo_mchtLst" index="0"/>
    </InitValue>
    <Script type="xscript4.0"><![CDATA[/*
 * 01. 업무구분 : 공통
 * 02. 화면 : sample0090.xfdl
 * 03. 화면 설명 : Validation샘플
 * 04. 관련 화면/서비스 : 
 * 05. 작성자 : 김석영
 * 06. 작성일 : 2015.06.20
 * 07. 수정이력 :
 ************************************************************************************************
 *     수정일        이  름    사유
 ************************************************************************************************
 *     2015.06.20    김석영    최초 작성
 ************************************************************************************************
 */
 
/*===============================================================================================
 * [ PART 1 ] Form에서 Include 할 라이브러리(xjs)파일 정의
================================================================================================*/
include "LIB::common.xjs"; //공통함수 호출
include "LIB::comFile.xjs"; //파일공통함수 호출

/*===============================================================================================
 * [ PART 2 ] Form에서 사용될 전역변수를 선언
================================================================================================*/	
/*===============================================================================================
 * [ PART 3 ] Event
================================================================================================*/
/*----------------------------------------------------------------------------------------------
 * 설명   : Form Load Event
-----------------------------------------------------------------------------------------------*/
function Form_onload(obj:Form, e:LoadEventInfo)
{
	//공통 Form 초기화
	gfn_setInitForm(obj, e, "SAMPLE0090");
	
	//기본값 초기화
 	fn_setInitForm(obj, e);
 	
	//그리드 초기화
 	fn_setInitGrid(obj, e);

}

/*----------------------------------------------------------------------------------------------
 * 설명   : 기본값 설정
-----------------------------------------------------------------------------------------------*/
function fn_setInitForm(obj:Form, e:LoadEventInfo)
{
}
/*----------------------------------------------------------------------------------------------
 * 설명   : 그리드 초기화
-----------------------------------------------------------------------------------------------*/
function fn_setInitGrid(obj:Form, e:LoadEventInfo)
{
	// 그리드 초기화 
	//gfn_initGrid(grd_main, bReadonly, bSortable, bTooltip, sSelectType, innerDs);
	gfn_initGrid(grd_main, true, true, true, "cell", "ds_gridMenuList");
}

/*----------------------------------------------------------------------------------------------
 * 설명   : 브랜드, 가맹점 호출 후 처리
-----------------------------------------------------------------------------------------------*/
function fn_afterBrndMchtCallBack()
{		  	
	//브랜드,가맹점 데이터셋 "선택" 항목 추가 
	if(ds_autrBrnd.getRowCount()>0){
		ds_autrBrnd.insertRow(0);
		ds_autrBrnd.setColumn(0,"brndCd","");
		ds_autrBrnd.setColumn(0,"brndNm","선택");
		cbo_brndLst.index = 0; 
		cbo_brndLst.enable = true;
	} else {
		cbo_brndLst.enable = false;
	}
	
	if(ds_autrMcht.getRowCount()>0){
		ds_autrMcht.insertRow(0);
		ds_autrMcht.setColumn(0,"mchtNo","");
		ds_autrMcht.setColumn(0,"mchtNm","선택");
		cbo_mchtLst.index = 0;		
		cbo_mchtLst.enable = true;
	} else {
		cbo_mchtLst.enable = false;
	}
	
	//브랜드,가맹점 검색팝업 및 콤보항목 visible 제어 
	fn_setObjVisible(false,true);		
}
/*----------------------------------------------------------------------------------------------
 * 설명   : 브랜드,가맹점 검색팝업 및 콤보항목 visible 제어 
 * 파라미터 : 
 * 				flag : 브랜드,가맹점 검색팝업 
 *              flag2  : 브랜드,가맹점 콤보
-----------------------------------------------------------------------------------------------*/
function fn_setObjVisible(flag,flag2)
{	
	div_brnd.visible = flag;
	div_mcht.visible = flag;	
	cbo_brndLst.visible = flag2;
	cbo_mchtLst.visible = flag2;
}

/*----------------------------------------------------------------------------------------------
 * 설명   : Form 종료전 Check 함수(공통)
-----------------------------------------------------------------------------------------------*/
function Form_checkBeforeClose()
{
	return true;
}


//개인정보조회 팝업호출 
function Button00_onclick(obj:Button,  e:ClickEventInfo)
{
	var rtn =  gfn_dialog("FRM0026P",{prnInfoInqItemCd:Edit00.value,prnInfoInqCtt:Edit01.value,inqObjClCd:Edit06.value,inqObjNo:Edit07.value,inqReqChnlCd:Edit08.value,inqReqIdfNo:Edit14.value});
}

//개인정보조회 팝업호출 (이력등록제외)
function Button06_onclick(obj:Button,  e:ClickEventInfo)
{
	var rtn =  gfn_dialog("FRM0026P",{prnInfoInqItemCd:Edit00.value,prnInfoInqCtt:Edit01.value,inqObjClCd:Edit06.value,inqObjNo:Edit07.value,inqReqChnlCd:Edit08.value,inqReqIdfNo:Edit14.value,regHstYn:"N"});
}

function Button01_onclick(obj:Button,  e:ClickEventInfo)
{
	var rtn =  gfn_dialog("FRM0027P",{mbrNo:Edit02.value,retnTelNo:Edit03.value,ocpyAuthReqChnlCd:Edit10.value});
	if (rtn != null) {
		Edit04.value = rtn["authSuccYn"];
		Edit05.value = rtn["retnTelNo"];
	}
}

function Button02_onclick(obj:Button,  e:ClickEventInfo)
{
	var sParam01 = " ";
	var sParam02 = " ";
	
	var arrArgs = {argAutoSelect:true, argCallProgram:"sample0090", argParam01:sParam01, argParam02:sParam02};
	var sRtnVal = gfn_dialog("FRM0147P", arrArgs);

	if ( gfn_isNull(sRtnVal) || sRtnVal == "cancel" ) {
		//취소시 값 제거
		//div_search.edt_user_no.value = "";
		//div_search.edt_usernm.value = "";
		
	} else {	//Object이용시

		Edit09.value = sRtnVal["post_no"];
		Edit11.value = sRtnVal["addr"];
	}
	
}

function Button03_onclick(obj:Button,  e:ClickEventInfo)
{
	var sParam01 = Edit13.value;
	var arrArgs = {argAutoSelect:true, argCallProgram:"sample0090", argParam01:sParam01};
	var sRtnVal = gfn_dialog("FRM0013P", arrArgs);
}

function Button04_onclick(obj:Button,  e:ClickEventInfo)
{
	var sParam01 = edt_oferId.value;
	var sParam02 = edt_oferNm.value;
	var arrArgs = {argAutoSelect:true, argCallProgram:"sample0090", argParam01:sParam01, argParam02:sParam02};
	var sRtnVal = gfn_dialog("FRM0114P", arrArgs);
}

function Button05_onclick(obj:Button,  e:ClickEventInfo)
{
	var frmTemp = gfn_getFrm("sample0070");
	if (!gfn_isNull(frmTemp)){
		edt_param1.value = frmTemp.edt_param1.value;
	}
}
/*----------------------------------------------------------------------------------------------
//브랜드검색팝업 검색버튼 클릭시 이벤트 
----------------------------------------------------------------------------------------------*/
function div_brnd_btn_brndSrch_onclick(obj:Button,  e:ClickEventInfo)
{
	var sParam01 = div_brnd.edt_brnCd.value;
	var sParam02 = div_brnd.edt_brnNm.value;
	var sParam04 = "";
	if ( e == null ) {
		sParam04 = "key";
	} else {
		sParam04 = "button";
	}
	var arrArgs = {argAutoSelect:true, argCallProgram:"FRM0010M", argParam01:sParam01, argParam02:sParam02, argParam04:sParam04};
	var sRtnVal = gfn_dialog("FRM0054P", arrArgs);

	//팝업에서 입력받은 값 리턴
	if ( gfn_isNull(sRtnVal) || sRtnVal == "cancel" ) {
		//취소시 값 제거
		div_brnd.edt_brnCd.value = "";
		div_brnd.edt_brnNm.value = "";
	} else {	//Object이용시
		div_brnd.edt_brnCd.value 	= sRtnVal["supBrndCd"];
		div_brnd.edt_brnNm.value  = sRtnVal["supBrndNm"];
	}
}
/*----------------------------------------------------------------------------------------------
//가맹점검색팝업 검색버튼 클릭시 이벤트 
----------------------------------------------------------------------------------------------*/
function div_mcht_btn_mchtSrch_onclick(obj:Button,  e:ClickEventInfo)
{
	var sParam01 = div_mcht.edt_mchtNo.value;
	var sParam02 = div_mcht.edt_mchtNm.value;
	var sParam03 = div_brnd.edt_brnCd.value;
	if ( e == null ) {
		sParam04 = "key";
	} else {
		sParam04 = "button";
	}
	var arrArgs = {argAutoSelect:true, argCallProgram:"FRM0010M", argParam01:sParam01, argParam02:sParam02, argParam03:sParam03, argParam04:sParam04};
	var sRtnVal = gfn_dialog("FRM0061P", arrArgs);

	//팝업에서 입력받은 값 리턴
	if ( gfn_isNull(sRtnVal) || sRtnVal == "cancel" ) {
		//취소시 값 제거
		div_mcht.edt_mchtNo.value = "";
		div_mcht.edt_mchtNm.value = "";
	} else {	//Object이용시
		div_mcht.edt_mchtNo.value = sRtnVal["supMchtNo"];
		div_mcht.edt_mchtNm.value = sRtnVal["supMchtNm"];
		div_brnd.edt_brnCd.value  = sRtnVal["supBrndCd"];
		div_brnd.edt_brnNm.value  = sRtnVal["supBrndNm"];
	//	btn_search_onclick();
	}
}

function div_brnd_btn_reset_onclick(obj:Button,  e:ClickEventInfo)
{
	div_brnd.edt_brnCd.value = "";
	div_brnd.edt_brnNm.value = "";
}

function div_mcht_btn_reset_onclick(obj:Button,  e:ClickEventInfo)
{
	div_mcht.edt_mchtNo.value = "";
	div_mcht.edt_mchtNm.value = "";
}
/*----------------------------------------------------------------------------------------------
//개인정보 그리드 전화번호 포맷 반환 
----------------------------------------------------------------------------------------------*/
function fn_tel_format(hpNo){
	var rsValue="";
	
	if(!gfn_isEmpty(hpNo)){
		rsValue = gfn_tel_format(hpNo);
	} 
	
	return  rsValue;
}
/*----------------------------------------------------------------------------------------------
//그리드 상단의 개인정보조회 버튼 클릭시 이벤트
----------------------------------------------------------------------------------------------*/
var g_row_type = "";
var g_row = -1;
function btn_searchPsnInfo_onclick(obj:Button,  e:ClickEventInfo)
{
	var colId;
	if(grd_main.getCellPos()==3){
		colId = "EML_ADDR_ENPT";
	} else if(grd_main.getCellPos()==2){
		colId = "HP_NO_ENPT";
	} else {
		return;
	}
	//클릭한 row의 rowtype정보 저장 
	g_row = ds_userLst.rowposition;
	
	ds_userLst.setColumn(0,"targetColId",colId);
	
	g_row_type = ds_userLst.getRowType(g_row);	
	//사용자암호화컬럼조회 
	fn_searchEncInfo();
}
//row 단위
function btn_searchPsnInfoRow_onclick(obj:Button,  e:ClickEventInfo)
{	
	var colId = "";
	//클릭한 row의 rowtype정보 저장 
	g_row = ds_userLst.rowposition;
	g_row_type = ds_userLst.getRowType(g_row);	
	ds_userLst.setColumn(0,"targetColId", colId);
	//사용자암호화컬럼조회 
	fn_searchEncInfo();
}
/*----------------------------------------------------------------------------------------------
 * 설명     :  사용자암호화컬럼조회
 * param  : 
 * return  : void
-----------------------------------------------------------------------------------------------*/
function fn_searchEncInfo()
{

	var sSvcID	 = "searchEncInfo";
	var sTrID		 = "PSCUserMgmt_pInqUserSecure";
	var sPtrn		 = "R";  //입력C,조회R,수정U,삭제D,복합M
	var sInputDs	 = "ncFieldMap=ds_userLst";
	var sOutputDs	= "ds_searchEncInfo=rsUserInfo";
	var sArgs		 = "";
	var sCallBackFnc = "fn_callBackPsnInfo";
		
	gfn_transaction(sSvcID, sTrID, sPtrn, sInputDs, sOutputDs, sArgs, sCallBackFnc);
}

/*=======================================================
 * [ PART 6 ] 사용자암호화컬럼조회 처리
========================================================*/

function fn_callBackPsnInfo(sSvcID, iErrorCode, sErrorMsg, ncMsgId, ncMsg){

	switch(sSvcID) {
		
		case "searchSecureInfo" : 
			if ( iErrorCode == 0 ) {
			    //상세사용자설정
			    fn_setDetailUserInfo(true);
			}
			break;	
		case "searchEncInfo" : 
			if ( iErrorCode == 0 && ds_searchEncInfo.getRowCount() > 0) {
			   //암호화컬럼 조회 후 처리
				fn_afterSearchEncInfo();
			}
			break;			
		case "emlTest" : 
			if ( iErrorCode == 0 ) {
				gfn_message("A",ncMsg);
			}
			break;		
		case "jcoTest" : 
			if ( iErrorCode == 0 ) {
			}
			break;		
		default :
			break;
	}
}

/*----------------------------------------------------------------------------------------------
 * 설명   :  암호화컬럼 조회 후 처리
-----------------------------------------------------------------------------------------------*/
function fn_afterSearchEncInfo()
{
	//조회파라미터 데이터셋 설정
	var nRow = 0;
	var sEmlAddrEnpt="";
	var sHpNoEnpt="";
	var colId = ds_userLst.getColumn(0,"targetColId", colId);
	if(colId =="EML_ADDR_ENPT" || gfn_isEmpty(colId) ){
		sEmlAddrEnpt = ds_searchEncInfo.getColumn(0,"emlAddrEnpt");
	} 
	 
	 if(colId =="HP_NO_ENPT"  || gfn_isEmpty(colId)) {
		sHpNoEnpt = ds_searchEncInfo.getColumn(0,"hpNoEnpt");
	}
		
	ds_prnInfoInq.clearData();
	
	if(!gfn_isEmpty(sEmlAddrEnpt) ){
		//이메일주소
		nRow = ds_prnInfoInq.addRow();
		ds_prnInfoInq.setColumn(nRow ,"prnInfoInqItemCd",SCC005_EML_ADDR);
		ds_prnInfoInq.setColumn(nRow ,"prnInfoInqCtt", sEmlAddrEnpt);
	}
	if(!gfn_isEmpty(sHpNoEnpt) ){
		//휴대전화 
		nRow = ds_prnInfoInq.addRow();
		ds_prnInfoInq.setColumn(nRow ,"prnInfoInqItemCd",SCC005_HP_NO);
		ds_prnInfoInq.setColumn(nRow ,"prnInfoInqCtt", sHpNoEnpt);
	}
	/*
	[개인정보이력등록용 파라미터 정보 ]
	
	INQ_OBJ_CL_CD : 조회대상구분코드
	공통코드 : SCC012 - 10 : 회원 / 20 : 사용자 / 30 : 가맹점
	
	INQ_REQ_CHNL_CD : 조회요청채널코드
	공통코드 : SCC018 - 10 : 백오피스
							 20 : 홈페이지
							 30 : 모바일앱
							 31 : 모바일웹
							 40 : VOC
							 41 : ARS
							 50 : POS
							 90 : 시스템
	
	*/		
	if(ds_prnInfoInq.getRowCount()>0){
		ds_searchSecureInfo.clearData();
		ds_searchSecureInfo.insertRow(0);
		ds_searchSecureInfo.setColumn(0,'frmId',this.name);
		ds_searchSecureInfo.setColumn(0,'inqObjClCd',"20");  //20 : 사용자
		ds_searchSecureInfo.setColumn(0,'inqObjNo',gds_user.getColumn(0,"userNo"));  //조회대상번호 
		ds_searchSecureInfo.setColumn(0,'inqReqChnlCd',gds_user.getColumn(0,"reqChnlCd")); 
		ds_searchSecureInfo.setColumn(0,'inqReqIdfNo',gds_user.getColumn(0,"userNo"));			
		
		gfn_searchSecureInfo("searchSecureInfo", "fn_callBackPsnInfo", "ds_prnInfoInq", "ds_searchSecureInfo" ); //개인정보 조회 
	} 		
}
/*----------------------------------------------------------------------------------------------
 * 설명   :  상세사용자정보 설정
-----------------------------------------------------------------------------------------------*/
function fn_setDetailUserInfo(bSecureYn)
{  
	//개인정보조회 콜백함수에서 호출한 경우 
	if(!gfn_isNull(bSecureYn) && bSecureYn){
		var sEmlAddr = ds_prnInfoInq.lookup("prnInfoInqItemCd",SCC005_EML_ADDR,"prnInfoInqCtt");    
		var sHpNo=  ds_prnInfoInq.lookup("prnInfoInqItemCd",   SCC005_HP_NO,"prnInfoInqCtt");    
		if(!gfn_isEmpty(sHpNo)) ds_userLst.setColumn(g_row, "hpNo",sHpNo);
		if(!gfn_isEmpty(sEmlAddr)) ds_userLst.setColumn(g_row, "emlAddr",sEmlAddr);
		
		//rowType 초기화 
		ds_userLst.setRowType(g_row, g_row_type);
		g_row = -1;
		g_row_type = "";
		grd_main.redraw();
	}
}	

//이메일발송테스트
function btn_emlTest_onclick(obj:Button,  e:ClickEventInfo)
{
	
	var sSvcID	 = "emlTest";
	var sTrID		 = "PSCAlrtSvcMgmt_pSendSmsTest";
	var sPtrn		 = "R";  //입력C,조회R,수정U,삭제D,복합M
	var sInputDs	 = "ncFieldMap=ds_smsSend";
	var sOutputDs	= "";
	var sArgs		 = "";
	var sCallBackFnc = "fn_callBackPsnInfo";
		
	gfn_transaction(sSvcID, sTrID, sPtrn, sInputDs, sOutputDs, sArgs, sCallBackFnc);
}

/**
* sap jco test
*/
function btn_sapErpIF_onclick(obj:Button,  e:ClickEventInfo)
{
	var sSvcID	 = "jcoTest";
	var sTrID		 = "PNRErpIf_pInqErpIFPing";
	var sPtrn		 = "R";  //입력C,조회R,수정U,삭제D,복합M
	var sInputDs	 = "ncFieldMap=ds_jcoTest";
	var sOutputDs	= "";
	var sArgs		 = "";
	var sCallBackFnc = "fn_callBackPsnInfo";
		
	gfn_transaction(sSvcID, sTrID, sPtrn, sInputDs, sOutputDs, sArgs, sCallBackFnc);
}


function btn_addFileOne_onclick(obj:Button,  e:ClickEventInfo)
{
	editFilePath.value = FileDialog00.open("암호화할 폴더선택", FileDialog.SELFOLDER);
}

function btn_sfs_onclick(obj:Button,  e:ClickEventInfo)
{
	InziSFS.SFSConnect(editFilePath.value,"1111");
}

function btn_sfs00_onclick(obj:Button,  e:ClickEventInfo)
{
	InziSFS.ShowFolder(editFilePath.value,"1111");
}
]]></Script>
  </Form>
</FDL>
