<?xml version="1.0" encoding="utf-8"?>
<FDL version="1.5">
  <TypeDefinition url="..\default_typedef.xml"/>
  <Form id="B2BSaleRgstM" classname="B2BSaleRgstM" inheritanceid="" position="absolute 0 0 1038 592" titletext="B2B상품판매등록" style="font:arial,11;" onload="Form_onload" class="frm_bg_popup">
    <Layouts>
      <Layout>
        <Div id="div_search" anchor="left top right" taborder="0" class="bg_detail" position="absolute 22 49 1014 113">
          <Layouts>
            <Layout>
              <Calendar id="cal_sell_dt" taborder="0" dateformat="yyyy-MM-dd" position="absolute 87 9 182 29" anchor="default"/>
              <Static id="Static00" text="w&#13;&#10;&#13;&#10;10" class="tip_guide" visible="false" position2="absolute l:338 w:10 t:10 h:42" positiontype="position2"/>
              <Edit id="edt_sell_dt_hh" taborder="1" inputtype="digit,alpha" maxlength="2" onkeydown="div_Search_onkeydown" class="Code" position="absolute 183 9 211 29" tooltiptext="사용자번호" anchor="default"/>
              <Static id="Static02" text="w&#13;&#10;30" class="tip_guide" visible="false" position2="absolute l:240 w:30 t:10 h:41" positiontype="position2"/>
              <Static id="Static17" text="v4" class="guideTip" visible="false" position2="absolute l:86 w:926 t:29 h:4" positiontype="position2"/>
              <Static id="Static03" text="w&#13;&#10;30" class="tip_guide" visible="false" position2="absolute l:594 w:30 t:9 h:41" positiontype="position2"/>
              <Calendar id="cal_chg_dt" taborder="11" dateformat="yyyy-MM-dd" position="absolute 87 33 182 53" anchor="default"/>
              <Static id="sta_hpNo00" text="변경일자" class="sta_WFDA_detail_Label_P" position="absolute 20 33 81 53" tooltiptype="hover" anchor="default"/>
              <Edit id="edt_sell_dt_mm" taborder="2" inputtype="digit,alpha" maxlength="2" onkeydown="div_Search_onkeydown" class="Code" position="absolute 212 9 240 29" tooltiptext="사용자번호" anchor="default"/>
              <Edit id="edt_chg_dt_hh" taborder="12" inputtype="digit,alpha" maxlength="2" onkeydown="div_Search_onkeydown" class="Code" position="absolute 183 33 211 53" tooltiptext="사용자번호" anchor="default"/>
              <Edit id="edt_chg_dt_mm" taborder="13" inputtype="digit,alpha" maxlength="2" onkeydown="div_Search_onkeydown" class="Code" position="absolute 212 33 240 53" tooltiptext="사용자번호" anchor="default"/>
              <Edit id="edt_agnOrgCd" taborder="3" inputtype="digit,alpha" maxlength="10" onkeydown="div_search_edt_dealCoCd_onkeydown" class="Code" position="absolute 348 9 418 29" tooltiptext="대리점코드" anchor="default"/>
              <Edit id="edt_agnOrgNm" taborder="4" maxlength="50" onkeydown="div_search_edt_dealCoCd_onkeydown" position="absolute 419 9 552 29" tooltiptext="대리점명" validate="title:대리점명,required:true" anchor="default" imemode="hangul"/>
              <Button id="btn_searchAgnOrg" taborder="5" onclick="div_search_btn_searchDeal_onclick" class="btn_WFSA_search" position="absolute 553 9 573 29" tooltiptype="hover" tooltiptext="대리점검색" userdata="GRP1:INQ_AUTR_YN" anchor="default"/>
              <Button id="btn_resetAgnOrg" taborder="6" onclick="div_btn_reset_onclick" class="btn_WFSA_reset" position="absolute 574 9 594 29" tooltiptext="초기화" anchor="default"/>
              <Edit id="edt_sellCoCd" taborder="7" inputtype="digit,alpha" maxlength="10" onkeydown="div_search_edt_sellCoCd_onkeydown" class="Code" position="absolute 678 9 748 29" tooltiptext="판매처코드" anchor="default"/>
              <Edit id="edt_sellCoNm" taborder="8" maxlength="50" onkeydown="div_search_edt_sellCoCd_onkeydown" position="absolute 749 9 882 29" tooltiptext="판매처명" anchor="default" imemode="hangul"/>
              <Button id="btn_searchSell" taborder="9" onclick="div_search_btn_searchSell_onclick" class="btn_WFSA_search" position="absolute 883 9 903 29" tooltiptype="hover" tooltiptext="판매처 검색" userdata="GRP1:INQ_AUTR_YN" anchor="default"/>
              <Button id="btn_resetSell" taborder="10" onclick="div_btn_reset_onclick" class="btn_WFSA_reset" position="absolute 904 9 924 29" tooltiptext="초기화" anchor="default"/>
              <Edit id="edt_affilAgn" inputtype="digit,alpha" maxlength="10" onkeydown="div_search_edt_dealCoCd_onkeydown" class="Code" enable="false" visible="false" position="absolute 424 9 494 29" tooltiptext="소속대리점코드" tabstop="false" taborder="15" anchor="default" validate="title:대리점코드,required:true"/>
              <Static id="sta_hpNo01" text="판매일자" class="sta_WFDA_detail_Label_P" position="absolute 20 9 81 29" tooltiptype="hover" anchor="default"/>
              <Static id="sta_hpNo02" text="판매담당자" class="sta_WFDA_detail_Label_P" position="absolute 269 33 346 53" tooltiptype="hover" anchor="default"/>
              <Static id="Static01" text="w&#13;&#10;&#13;&#10;10" class="tip_guide" visible="false" position2="absolute l:77 w:10 t:10 h:42" positiontype="position2"/>
              <Static id="sta_hpNo03" text="대리점" class="sta_WFDA_detail_Label_P" position="absolute 269 9 338 29" tooltiptype="hover" anchor="default"/>
              <Static id="sta_hpNo04" text="판매처" class="sta_WFDA_detail_Label_P" position="absolute 624 9 677 29" tooltiptype="hover" anchor="default"/>
              <Static id="Static04" text="w&#13;&#10;&#13;&#10;10" class="tip_guide" visible="false" position2="absolute l:668 w:10 t:10 h:42" positiontype="position2"/>
              <Edit id="edt_user_no" taborder="16" inputtype="digit,alpha" maxlength="10" class="Code" position="absolute 348 33 418 53" tooltiptext="사용자번호" onkeydown="div_search_edt_user_no_onkeydown"/>
              <Edit id="edt_usernm" taborder="17" imemode="hangul" maxlength="50" position="absolute 419 33 552 53" tooltiptext="사용자명" onkeydown="div_search_edt_user_no_onkeydown"/>
              <Button id="btn_searchUser" taborder="18" class="btn_WFSA_search" position="absolute 553 33 573 53" tooltiptype="hover" tooltiptext="사용자검색" userdata="GRP1:INQ_AUTR_YN" onclick="div_search_btn_searchUser_onclick"/>
              <Button id="btn_resetUser" taborder="19" onclick="div_btn_reset_onclick" class="btn_WFSA_reset" position="absolute 574 33 594 53" tooltiptext="초기화"/>
              <Static id="Static05" text="v4" class="guideTip" visible="false" position2="absolute l:94 w:926 t:325 h:4" positiontype="position2"/>
            </Layout>
          </Layouts>
        </Div>
        <Static id="Static00" text="h10" class="tip_guide" visible="false" position2="absolute l:132 w:42 t:49 h:10" positiontype="position2"/>
        <Static id="Static14" text="h10" class="tip_guide" visible="false" position2="absolute l:107 w:869 t:103 h:10" positiontype="position2"/>
        <Button id="btn_excel" taborder="7" class="btn_common_excel" position="absolute 992 122 1014 142" anchor="top right" tooltiptext="액셀출력" onclick="btn_excel_onclick"/>
        <Static id="Static03" text="h33" class="tip_guide" visible="false" position2="absolute l:169 w:42 t:113 h:33" positiontype="position2"/>
        <Static id="Static02" text="h14" class="tip_guide" visible="false" position2="absolute l:28 w:42 t:113 h:14" positiontype="position2"/>
        <Static id="Static07" text="h8" class="tip_guide" visible="false" position2="absolute l:28 w:42 t:138 h:8" positiontype="position2"/>
        <UserGrid id="grd_main" taborder="13" binddataset="ds_main" useinputpanel="false" autofittype="none" hideendline="col" position="absolute 22 145 1014 345" anchor="all" class="grd_subGrid" _number="false">
          <Formats>
            <Format id="default">
              <Columns>
                <Column size="50"/>
                <Column size="63"/>
                <Column size="103"/>
                <Column size="112"/>
                <Column size="119"/>
                <Column size="130"/>
                <Column size="98"/>
                <Column size="138"/>
                <Column size="98"/>
                <Column size="80"/>
                <Column size="80"/>
                <Column size="80"/>
                <Column size="80"/>
                <Column size="80"/>
                <Column size="0"/>
                <Column size="0"/>
                <Column size="100"/>
              </Columns>
              <Rows>
                <Row size="24" band="head"/>
                <Row size="24" band="head"/>
                <Row size="24"/>
                <Row size="24" band="summ"/>
              </Rows>
              <Band id="head">
                <Cell rowspan="2" text="구분" taborder="undefined"/>
                <Cell col="1" rowspan="2" text="상품구분" taborder="undefined"/>
                <Cell col="2" rowspan="2" text="상품일련번호" taborder="undefined"/>
                <Cell col="3" rowspan="2" text="일련번호" taborder="undefined"/>
                <Cell col="4" rowspan="2" text="제조사" taborder="undefined"/>
                <Cell col="5" rowspan="2" text="모델" taborder="undefined"/>
                <Cell col="6" rowspan="2" text="색상" taborder="undefined"/>
                <Cell col="7" rowspan="2" text="보유처" taborder="undefined"/>
                <Cell col="8" rowspan="2" text="접수관리번호" taborder="undefined"/>
                <Cell col="9" rowspan="2" text="판매수량" taborder="undefined"/>
                <Cell col="10" rowspan="2" text="고정가여부" taborder="undefined"/>
                <Cell col="11" rowspan="2" text="*판매원가" taborder="undefined"/>
                <Cell col="12" rowspan="2" text="판매수수료" taborder="undefined"/>
                <Cell col="13" rowspan="2" text="*판매마진" taborder="undefined"/>
                <Cell col="14" rowspan="2" text="판매단가" taborder="undefined"/>
                <Cell col="15" rowspan="2" text="부가세" taborder="undefined"/>
                <Cell col="16" rowspan="2" text="판매가(VAT포함)" taborder="undefined"/>
              </Band>
              <Band id="body">
                <Cell displaytype="combo" text="bind:SELL_CHG_HST_CL" combodataset="ds_DMS196" combocodecol="CM_CD_ID" combodatacol="CM_CD_NM"/>
                <Cell col="1" displaytype="combo" text="bind:PROD_CL" combodataset="ds_DMS160" combocodecol="CM_CD_ID" combodatacol="CM_CD_NM" validate="title:상품구분,required:true"/>
                <Cell col="2" displaytype="text" class="alignLeft" text="bind:PROD_SER_NO"/>
                <Cell col="3" displaytype="text" class="alignLeft" text="bind:EQP_SER_NO"/>
                <Cell col="4" displaytype="combo" class="alignLeft" text="bind:MFACT_CD" combodataset="ds_DMS101" combocodecol="CM_CD_ID" combodatacol="CM_CD_NM" validate="title:제조사,required:true"/>
                <Cell col="5" displaytype="text" class="alignLeft" text="bind:EQP_MDL_NM" validate="title:모델,required:true"/>
                <Cell col="6" displaytype="combo" class="alignLeft" text="bind:EQP_COLOR_CD" combodataset="ds_DMS100" combocodecol="CM_CD_ID" combodatacol="CM_CD_NM" validate="title:색상,required:true"/>
                <Cell col="7" displaytype="normal" class="alignLeft" text="bind:HLD_DEALCO_NM"/>
                <Cell col="8" displaytype="normal" class="alignLeft" text="bind:CNSL_MGMT_NO"/>
                <Cell col="9" displaytype="number" class="alignRight" text="bind:SALE_QTY"/>
                <Cell col="10" displaytype="normal" text="bind:FIX_PRC_YN"/>
                <Cell col="11" displaytype="number" class="alignRight" text="bind:SELL_PCOST"/>
                <Cell col="12" displaytype="number" class="alignRight" text="bind:SELL_CMMS"/>
                <Cell col="13" displaytype="number" class="alignRight" text="bind:SELL_MRGN"/>
                <Cell col="14" displaytype="number" class="alignRight" text="bind:SELL_UPRC"/>
                <Cell col="15" displaytype="number" class="alignRight" text="bind:SURTAX"/>
                <Cell col="16" displaytype="number" class="alignRight" text="bind:SELL_AMT"/>
              </Band>
              <Band id="summary">
                <Cell displaytype="number" class="alignRight"/>
                <Cell col="1" displaytype="number" class="alignRight"/>
                <Cell col="2" displaytype="number" class="alignRight"/>
                <Cell col="3" displaytype="number" class="alignRight"/>
                <Cell col="4" displaytype="number" class="alignRight"/>
                <Cell col="5" displaytype="number" class="alignRight"/>
                <Cell col="6" displaytype="number" class="alignRight"/>
                <Cell col="7" displaytype="number" class="alignRight"/>
                <Cell col="8" displaytype="normal" class="alignRight" text="합계"/>
                <Cell col="9" displaytype="number" class="alignRight" text="expr: getSum(&quot;parseInt(SALE_QTY)&quot;)"/>
                <Cell col="10" displaytype="number" class="alignRight"/>
                <Cell col="11" displaytype="number" class="alignRight" text="expr: getSum(&quot;parseInt(SELL_PCOST)&quot;)"/>
                <Cell col="12" displaytype="number" class="alignRight" text="expr: getSum(&quot;parseInt(SELL_CMMS)&quot;)"/>
                <Cell col="13" displaytype="number" class="alignRight" text="expr: getSum(&quot;parseInt(SELL_MRGN)&quot;)"/>
                <Cell col="14" displaytype="number" class="alignRight" text="expr: getSum(&quot;parseInt(SELL_UPRC)&quot;)"/>
                <Cell col="15" displaytype="number" class="alignRight" text="expr: getSum(&quot;parseInt(SURTAX)&quot;)"/>
                <Cell col="16" displaytype="number" class="alignRight" text="expr: getSum(&quot;parseInt(SELL_AMT)&quot;)"/>
              </Band>
            </Format>
          </Formats>
        </UserGrid>
        <Button id="btn_prod_select" taborder="3" text="재고선택" class="btn_common" position="absolute 738 122 807 142" anchor="top right" tooltiptext="재고선택" onclick="btn_prod_select_onclick"/>
        <Div id="div_detail" anchor="left right bottom" taborder="8" class="bg_detail" position="absolute 22 378 1014 537">
          <Layouts>
            <Layout>
              <Static id="stc_11" text="현금" class="sta_WFDA_detail_Label" position="absolute 9 9 50 29" anchor="default"/>
              <Static id="Static02" text="W10" class="guideTip" visible="false" position2="absolute l:42 w:10 t:6 h:83" positiontype="position2"/>
              <Static id="stc_00" text="비고" class="sta_WFDA_detail_Label" position="absolute 9 65 50 85" anchor="default"/>
              <Static id="stc_02" text="첨부파일" class="sta_WFDA_detail_Label" position="absolute 461 33 542 53" anchor="default"/>
              <MaskEdit id="edt_sellPrcCashRecvAmt" taborder="0" mask="@@@,@@@,@@@" position="absolute 52 9 164 29" anchor="default" displaynulltext="0"/>
              <Static id="stc_17" text="원" class="sta_WF_Unit" position="absolute 168 9 188 29" anchor="default"/>
              <Static id="Static00" text="W20" class="guideTip" visible="false" position2="absolute l:996 w:20 t:2 h:107" positiontype="position2"/>
              <Static id="Static01" text="W30" class="guideTip" visible="false" position2="absolute l:178 w:30 t:5 h:43" positiontype="position2"/>
              <Static id="Static09" text="h10" class="tip_guide" visible="false" position2="absolute l:612 w:42 t:365 h:10" positiontype="position2"/>
              <Static id="Static10" text="h10" class="tip_guide" visible="false" position2="absolute l:612 w:42 t:467 h:10" positiontype="position2"/>
              <Static id="stc_07" text="매출처" class="sta_WFDA_detail_Label" position="absolute 461 10 510 30" anchor="default"/>
              <Static id="Static16" text="w20" class="guideTip" visible="false" position2="absolute l:481 w:20 t:368 h:107" positiontype="position2"/>
              <Static id="Static03" text="W10" class="guideTip" visible="false" position2="absolute l:505 w:10 t:9 h:27" positiontype="position2"/>
              <Static id="Static04" text="W5" class="guideTip" visible="false" position2="absolute l:164 w:5 t:12 h:19" positiontype="position2"/>
              <MaskEdit id="edt_sellPrcCcardRecvAmt1" taborder="2" inputtype="digit,alpha" maxlength="20" onkeydown="div_Search_mbredit_onkeydown" position="absolute 343 9 428 29" validate="title:회원검색코드,maxlength:20" anchor="default" displaynulltext="0" mask="@@@,@@@,@@@"/>
              <Combo id="cbo_sellPrcCcardCo1" taborder="1" autoselect="true" innerdataset="@ds_DMS234" codecolumn="CM_CD_ID" datacolumn="CM_CD_NM" onkeydown="div_Search_mbr_onkeydown" position="absolute 270 9 342 29" anchor="default"/>
              <Static id="Static06" text="W10" class="guideTip" visible="false" position2="absolute l:260 w:10 t:9 h:26" positiontype="position2"/>
              <Static id="stc_03" text="신용카드1" class="sta_WFDA_detail_Label" position="absolute 197 9 270 29" anchor="default"/>
              <Static id="stc_12" text="원" class="sta_WF_Unit" position="absolute 432 9 452 29" anchor="default"/>
              <Static id="Static08" text="W5" class="guideTip" visible="false" position2="absolute l:428 w:5 t:9 h:19" positiontype="position2"/>
              <TextArea id="txa_rmk" taborder="8" scrollbars="none" imemode="hangul" wordwrap="word" oneditclick="Div01_TextArea00_oneditclick" position="absolute 20 83 442 148" anchor="all" validate="title:내용,required:true,maxlengthB:4000"/>
              <UserGrid id="grd_upList" taborder="12" binddataset="ds_upList" autoenter="select" useinputpanel="false" cellsizingtype="col" cellmovingtype="col" hideendline="col" position="absolute 472 59 970 148" anchor="left top" _number="true" _status="false" _check="false" _checkColumnName="_checkcol" _checkedallevent="false" _nodataimage="true" _sort="false" _tooltip="true" class="grd_subGrid">
                <Formats>
                  <Format id="default">
                    <Columns>
                      <Column size="275"/>
                      <Column size="70"/>
                    </Columns>
                    <Rows>
                      <Row size="24" band="head"/>
                      <Row size="24"/>
                    </Rows>
                    <Band id="head">
                      <Cell text="파일명"/>
                      <Cell col="1" text="크기"/>
                    </Band>
                    <Band id="body">
                      <Cell text="bind:FILE_NM"/>
                      <Cell col="1" text="bind:FILE_SIZE"/>
                    </Band>
                  </Format>
                </Formats>
              </UserGrid>
              <Button id="btn_fileDownload" taborder="9" text="전체다운로드" position="absolute 775 36 868 56" onclick="div_detail_btn_fileDownload_onclick" anchor="default" class="btn_common" tooltiptext="전체다운로드"/>
              <Button id="btn_deleteFile" taborder="11" text="삭제" position="absolute 920 36 970 56" tooltiptext="파일삭제" onclick="div_detail_btn_deleteFile_onclick" anchor="default" class="btn_common_delTxt"/>
              <Button id="btn_addFile" taborder="10" text="추가" position="absolute 869 36 919 56" tooltiptext="파일추가" onclick="div_detail_btn_addFile_onclick" anchor="default" class="btn_common_addTxt"/>
              <Edit id="edt_salePlc" taborder="3" inputtype="digit,alpha" maxlength="10" class="Code" position="absolute 515 9 577 29" tooltiptext="매출처코드" onkeydown="div_search_edt_salePlc_onkeydown" anchor="default"/>
              <Edit id="edt_salePlcNm" taborder="4" maxlength="50" position="absolute 579 9 704 29" tooltiptext="매출처명" onkeydown="div_search_edt_salePlc_onkeydown" anchor="default"/>
              <Button id="btn_searchPlc" taborder="5" class="btn_WFSA_search" position="absolute 705 9 725 29" tooltiptype="hover" tooltiptext="매출처 검색" userdata="GRP1:INQ_AUTR_YN" onclick="div_detail_btn_searchPlc_onclick" anchor="default"/>
              <Button id="btn_resetPlc" taborder="6" onclick="div_btn_reset_onclick" class="btn_WFSA_reset" position="absolute 726 9 746 29" tooltiptext="초기화" anchor="default"/>
              <CheckBox id="chk_sellTyp" taborder="7" text="Ecophone4u 판매" position="absolute 20 32 164 52" falsevalue="01" truevalue="03" anchor="default"/>
              <Static id="Static05" text="W10" class="guideTip" visible="false" position2="absolute l:746 w:10 t:5 h:35" positiontype="position2"/>
              <Static id="stc_01" text="판매구분" class="sta_WFDA_detail_Label" position="absolute 197 33 270 53"/>
              <Static id="Static17" text="v4" class="guideTip" visible="false" position2="absolute l:14 w:966 t:29 h:4" positiontype="position2"/>
              <Combo id="cbo_sellClCd" taborder="13" autoselect="true" innerdataset="@ds_DMS250" codecolumn="CM_CD_ID" datacolumn="CM_CD_NM" onkeydown="div_Search_mbr_onkeydown" position="absolute 270 33 430 53"/>
            </Layout>
          </Layouts>
          <InitValue>
            <Combo id="cbo_sellPrcCcardCo1" index="0"/>
            <Combo id="cbo_sellClCd" index="0"/>
          </InitValue>
        </Div>
        <Static id="Static16" text="w20" class="guideTip" visible="false" position2="absolute l:23 w:20 t:382 h:107" positiontype="position2"/>
        <Static id="Static09" text="h10" class="tip_guide" visible="false" position2="absolute l:95 w:42 t:378 h:10" positiontype="position2"/>
        <Button id="btn_cancel" taborder="2" text="판매취소" class="btn_common" position="absolute 668 122 737 142" anchor="top right" tooltiptext="판매취소" onclick="btn_cancel_onclick"/>
        <Static id="Static24" text="판매등록" usedecorate="true" class="sub_title" position="absolute 22 123 175 143"/>
        <Static id="Static01" text="h14" class="tip_guide" visible="false" position2="absolute l:24 w:42 t:345 h:14" positiontype="position2"/>
        <Static id="Static27" text="수납정보-매출" usedecorate="true" class="sub_title" position="absolute 22 355 175 375" anchor="left bottom"/>
        <Static id="Static28" text="h8" class="tip_guide" visible="false" position2="absolute l:32 w:42 t:370 h:8" positiontype="position2"/>
        <Static id="Static04" text="h10" class="tip_guide" visible="false" position2="absolute l:147 w:42 t:527 h:10" positiontype="position2"/>
        <Button id="btn_delete" taborder="6" text="삭제" onclick="btn_delete_onclick" class="btn_common_delTxt" position="absolute 941 122 991 142" anchor="top right" tooltiptext="삭제"/>
        <Button id="btn_print" taborder="1" text="인수증 출력" class="btn_common_printTxt" position="absolute 581 122 667 142" tooltiptext="인수증출력" onclick="btn_print_onclick" enable="false"/>
        <Button id="btn_save" taborder="9" text="저장" class="btn_popup_save" position="absolute 461 547 516 567" anchor="top right" tooltiptext="저장" onclick="btn_save_onclick"/>
        <Button id="btn_excel_upload" taborder="4" text="Excel 업로드" class="btn_common" position="absolute 808 122 889 142" anchor="top right" tooltiptext="Excel업로드" onclick="btn_excel_upload_onclick"/>
        <Static id="Static26" text="w&#13;&#10;&#13;&#10;15" class="tip_guide" visible="false" position2="absolute l:7 w:15 t:10 h:558" positiontype="position2"/>
        <Button id="btn_add" taborder="5" text="추가" class="btn_common_addTxt" position="absolute 890 122 940 142" anchor="top right" tooltiptext="추가" visible="false" enable="false" onclick="btn_add_onclick"/>
        <Static id="Static20" text="h10" class="tip_guide" visible="false" position2="absolute l:29 w:42 t:39 h:10" positiontype="position2"/>
        <Div id="Div01" taborder="11" text="상품판매등록" class="popUp_title_bg" transparenthittest="true" position="absolute 21 12 575 40"/>
        <Static id="Static23" text="h10" class="tip_guide" visible="false" position2="absolute l:483 w:74 t:537 h:10" positiontype="position2"/>
        <Button id="btn_close" taborder="10" text="닫기" class="btn_popup_cancel" position="absolute 521 547 576 567" onclick="btn_close_onclick" tooltiptext="닫기"/>
        <Static id="Static29" text="h15" class="tip_guide" visible="false" position2="absolute l:487 w:42 t:567 h:15" positiontype="position2"/>
        <Static id="Static06" text="w&#13;&#10;&#13;&#10;15" class="tip_guide" visible="false" position2="absolute l:1014 w:15 t:10 h:646" positiontype="position2"/>
        <Static id="Static05" text="h33" class="tip_guide" visible="false" position2="absolute l:137 w:42 t:345 h:33" positiontype="position2"/>
        <Button id="btn_close2" taborder="12" onclick="btn_close_onclick" class="popUp_close" position="absolute 996 13 1014 31" anchor="top right"/>
        <Static id="Static08" text="w&#13;&#10;&#13;&#10;20" class="tip_guide" visible="false" position2="absolute l:23 w:20 t:58 h:42" positiontype="position2"/>
        <Static id="Static10" text="W30" class="guideTip" visible="false" position2="absolute l:465 w:30 t:381 h:139" positiontype="position2"/>
        <Static id="Static12" text="W20" class="guideTip" visible="false" position2="absolute l:993 w:20 t:397 h:115" positiontype="position2"/>
      </Layout>
    </Layouts>
    <Objects>
      <Dataset id="ds_main" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="GNRL_SELL_NO" type="STRING" size="256"/>
          <Column id="GNRL_SELL_CHG_SEQ" type="STRING" size="256"/>
          <Column id="SELL_DTM" type="STRING" size="256"/>
          <Column id="SELL_CHG_HST_CL" type="STRING" size="256"/>
          <Column id="PROD_CL" type="STRING" size="256"/>
          <Column id="SELL_SEQ" type="STRING" size="256"/>
          <Column id="EQP_MDL_CD" type="STRING" size="256"/>
          <Column id="EQP_COLOR_CD" type="STRING" size="256"/>
          <Column id="SELL_UPRC" type="STRING" size="256"/>
          <Column id="SELL_PCOST" type="STRING" size="256"/>
          <Column id="SELL_MRGN" type="STRING" size="256"/>
          <Column id="SELL_CMMS" type="STRING" size="256"/>
          <Column id="SURTAX" type="STRING" size="256"/>
          <Column id="EQP_SER_NO" type="STRING" size="256"/>
          <Column id="PROD_SER_NO" type="STRING" size="256"/>
          <Column id="SELL_AMT" type="STRING" size="256"/>
          <Column id="FIX_PRC_YN" type="STRING" size="256"/>
          <Column id="SALE_QTY" type="STRING" size="256"/>
          <Column id="EQP_MDL_NM" type="STRING" size="256"/>
          <Column id="MFACT_CD" type="STRING" size="256"/>
          <Column id="MFACT_NM" type="STRING" size="256"/>
          <Column id="HLD_DEALCO_ID" type="STRING" size="256"/>
          <Column id="HLD_DEALCO_NM" type="STRING" size="256"/>
          <Column id="PROD_OUT_MGMT_NO" type="STRING" size="256"/>
          <Column id="EQP_ST" type="STRING" size="256"/>
          <Column id="CNSL_MGMT_NO" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_master" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="GNRL_SELL_NO" type="STRING" size="256"/>
          <Column id="GNRL_SELL_CHG_SEQ" type="STRING" size="256"/>
          <Column id="SELL_TYP" type="STRING" size="256"/>
          <Column id="SELL_DTM" type="STRING" size="256"/>
          <Column id="SELL_CHRGR_ID" type="STRING" size="256"/>
          <Column id="SELL_CHG_HST_CL" type="STRING" size="256"/>
          <Column id="SELL_CHG_DTM" type="STRING" size="256"/>
          <Column id="SELL_CHGR_ID" type="STRING" size="256"/>
          <Column id="XCL_DEALCO_CD" type="STRING" size="256"/>
          <Column id="XCL_DEALCO_NM" type="STRING" size="256"/>
          <Column id="INVE_HLD_DEALCO_CD" type="STRING" size="256"/>
          <Column id="AGN_ORG_CD" type="STRING" size="256"/>
          <Column id="AFFIL_AGN" type="STRING" size="256"/>
          <Column id="AFFIL_AGN_NM" type="STRING" size="256"/>
          <Column id="SELL_DEALCO_CD" type="STRING" size="256"/>
          <Column id="SELL_DEALCO_NM" type="STRING" size="256"/>
          <Column id="SELL_CHG_DEALCO_CD" type="STRING" size="256"/>
          <Column id="EQP_STTL_COND" type="STRING" size="256"/>
          <Column id="RMK" type="STRING" size="256"/>
          <Column id="DCLS_YN" type="STRING" size="256"/>
          <Column id="SALEPLC" type="STRING" size="256"/>
          <Column id="SALEPLC_NM" type="STRING" size="256"/>
          <Column id="ATFIL_ID" type="STRING" size="256"/>
          <Column id="FLAG" type="STRING" size="256"/>
          <Column id="TRMS_YN" type="STRING" size="256"/>
          <Column id="XCL_SLIP_NO" type="STRING" size="256"/>
          <Column id="XCL_SLIP_ST" type="STRING" size="256"/>
          <Column id="SELL_CL_CD" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows>
          <Row/>
        </Rows>
      </Dataset>
      <Dataset id="ds_payment" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="GNRL_SELL_NO" type="STRING" size="256"/>
          <Column id="GNRL_SELL_CHG_SEQ" type="STRING" size="256"/>
          <Column id="BCHG_SELL_PRC_CASH_RECV_AMT" type="STRING" size="256"/>
          <Column id="SELL_PRC_CASH_RECV_AMT" type="STRING" size="256"/>
          <Column id="CHG_SELL_PRC_CASH_RECV_AMT" type="STRING" size="256"/>
          <Column id="BCHG_SELL_PRC_CCARD_CO_1" type="STRING" size="256"/>
          <Column id="SELL_PRC_CCARD_CO_1" type="STRING" size="256"/>
          <Column id="BCHG_SELL_PRC_CCARD_RECV_AMT_1" type="STRING" size="256"/>
          <Column id="SELL_PRC_CCARD_RECV_AMT_1" type="STRING" size="256"/>
          <Column id="CHG_SELL_PRC_CCARD_RECV_AMT_1" type="STRING" size="256"/>
          <Column id="CCARD_XCL_CONF_YN_1" type="STRING" size="256"/>
          <Column id="CCARD_XCL_CONF_DT_1" type="STRING" size="256"/>
          <Column id="BCHG_SELL_PRC_CCARD_CO_2" type="STRING" size="256"/>
          <Column id="SELL_PRC_CCARD_CO_2" type="STRING" size="256"/>
          <Column id="BCHG_SELL_PRC_CCARD_RECV_AMT_2" type="STRING" size="256"/>
          <Column id="SELL_PRC_CCARD_RECV_AMT_2" type="STRING" size="256"/>
          <Column id="CHG_SELL_PRC_CCARD_RECV_AMT_2" type="STRING" size="256"/>
          <Column id="CCARD_XCL_CONF_YN_2" type="STRING" size="256"/>
          <Column id="CCARD_XCL_CONF_DT_2" type="STRING" size="256"/>
          <Column id="BCHG_INVE_AMT" type="STRING" size="256"/>
          <Column id="INVE_AMT" type="STRING" size="256"/>
          <Column id="CHG_INVE_AMT" type="STRING" size="256"/>
          <Column id="BCHG_MRGN_AMT" type="STRING" size="256"/>
          <Column id="MRGN_AMT" type="STRING" size="256"/>
          <Column id="CHG_MRGN_AMT" type="STRING" size="256"/>
          <Column id="BCHG_CMMS_AMT" type="STRING" size="256"/>
          <Column id="CMMS_AMT" type="STRING" size="256"/>
          <Column id="CHG_CMMS_AMT" type="STRING" size="256"/>
          <Column id="BCHG_SURTAX_AMT" type="STRING" size="256"/>
          <Column id="SURTAX_AMT" type="STRING" size="256"/>
          <Column id="CHG_SURTAX_AMT" type="STRING" size="256"/>
          <Column id="BCHG_SELL_AMT" type="STRING" size="256"/>
          <Column id="SELL_AMT" type="STRING" size="256"/>
          <Column id="CHG_SELL_AMT" type="STRING" size="256"/>
          <Column id="SALEPLC" type="STRING" size="256"/>
          <Column id="SALEPLC_NM" type="STRING" size="256"/>
          <Column id="AGN_ORG_CD" type="STRING" size="256"/>
          <Column id="UKEY_AGN_CD" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows>
          <Row/>
        </Rows>
      </Dataset>
      <Dataset id="ds_search_dtl" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="GNRL_SELL_NO" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows>
          <Row/>
        </Rows>
      </Dataset>
      <Dataset id="ds_DMS160" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="CM_GRP_CD_ID" type="STRING" size="256"/>
          <Column id="CM_GRP_CD_NM" type="STRING" size="256"/>
          <Column id="CM_CD_ID" type="STRING" size="256"/>
          <Column id="CHG_DTM" type="STRING" size="256"/>
          <Column id="CM_CD_NM" type="STRING" size="256"/>
          <Column id="CM_CD_DESC" type="STRING" size="256"/>
          <Column id="CM_CD_SORT_ORD" type="STRING" size="256"/>
          <Column id="USE_YN" type="STRING" size="256"/>
          <Column id="SUP_CM_GRP_CD_ID" type="STRING" size="256"/>
          <Column id="SUP_CM_CD_ID" type="STRING" size="256"/>
          <Column id="MGMT_ITEM_CD1" type="STRING" size="256"/>
          <Column id="MGMT_ITEM_CD2" type="STRING" size="256"/>
          <Column id="MGMT_ITEM_CD3" type="STRING" size="256"/>
          <Column id="MGMT_ITEM_CD4" type="STRING" size="256"/>
          <Column id="MGMT_ITEM_CD5" type="STRING" size="256"/>
          <Column id="MGMT_ITEM_CD6" type="STRING" size="256"/>
          <Column id="MGMT_ITEM_CD7" type="STRING" size="256"/>
          <Column id="MGMT_ITEM_CD8" type="STRING" size="256"/>
          <Column id="MGMT_ITEM_CD9" type="STRING" size="256"/>
          <Column id="MGMT_ITEM_CD10" type="STRING" size="256"/>
          <Column id="FS_REG_USER_ID" type="STRING" size="256"/>
          <Column id="FS_REG_DTM" type="STRING" size="256"/>
          <Column id="LS_CHG_USER_ID" type="STRING" size="256"/>
          <Column id="LS_CHG_DTM" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_DMS196" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="CM_GRP_CD_ID" type="STRING" size="256"/>
          <Column id="CM_GRP_CD_NM" type="STRING" size="256"/>
          <Column id="CM_CD_ID" type="STRING" size="256"/>
          <Column id="CHG_DTM" type="STRING" size="256"/>
          <Column id="CM_CD_NM" type="STRING" size="256"/>
          <Column id="CM_CD_DESC" type="STRING" size="256"/>
          <Column id="CM_CD_SORT_ORD" type="STRING" size="256"/>
          <Column id="USE_YN" type="STRING" size="256"/>
          <Column id="SUP_CM_GRP_CD_ID" type="STRING" size="256"/>
          <Column id="SUP_CM_CD_ID" type="STRING" size="256"/>
          <Column id="MGMT_ITEM_CD1" type="STRING" size="256"/>
          <Column id="MGMT_ITEM_CD2" type="STRING" size="256"/>
          <Column id="MGMT_ITEM_CD3" type="STRING" size="256"/>
          <Column id="MGMT_ITEM_CD4" type="STRING" size="256"/>
          <Column id="MGMT_ITEM_CD5" type="STRING" size="256"/>
          <Column id="MGMT_ITEM_CD6" type="STRING" size="256"/>
          <Column id="MGMT_ITEM_CD7" type="STRING" size="256"/>
          <Column id="MGMT_ITEM_CD8" type="STRING" size="256"/>
          <Column id="MGMT_ITEM_CD9" type="STRING" size="256"/>
          <Column id="MGMT_ITEM_CD10" type="STRING" size="256"/>
          <Column id="FS_REG_USER_ID" type="STRING" size="256"/>
          <Column id="FS_REG_DTM" type="STRING" size="256"/>
          <Column id="LS_CHG_USER_ID" type="STRING" size="256"/>
          <Column id="LS_CHG_DTM" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_DMS100" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="CM_GRP_CD_ID" type="STRING" size="256"/>
          <Column id="CM_GRP_CD_NM" type="STRING" size="256"/>
          <Column id="CM_CD_ID" type="STRING" size="256"/>
          <Column id="CHG_DTM" type="STRING" size="256"/>
          <Column id="CM_CD_NM" type="STRING" size="256"/>
          <Column id="CM_CD_DESC" type="STRING" size="256"/>
          <Column id="CM_CD_SORT_ORD" type="STRING" size="256"/>
          <Column id="USE_YN" type="STRING" size="256"/>
          <Column id="SUP_CM_GRP_CD_ID" type="STRING" size="256"/>
          <Column id="SUP_CM_CD_ID" type="STRING" size="256"/>
          <Column id="MGMT_ITEM_CD1" type="STRING" size="256"/>
          <Column id="MGMT_ITEM_CD2" type="STRING" size="256"/>
          <Column id="MGMT_ITEM_CD3" type="STRING" size="256"/>
          <Column id="MGMT_ITEM_CD4" type="STRING" size="256"/>
          <Column id="MGMT_ITEM_CD5" type="STRING" size="256"/>
          <Column id="MGMT_ITEM_CD6" type="STRING" size="256"/>
          <Column id="MGMT_ITEM_CD7" type="STRING" size="256"/>
          <Column id="MGMT_ITEM_CD8" type="STRING" size="256"/>
          <Column id="MGMT_ITEM_CD9" type="STRING" size="256"/>
          <Column id="MGMT_ITEM_CD10" type="STRING" size="256"/>
          <Column id="FS_REG_USER_ID" type="STRING" size="256"/>
          <Column id="FS_REG_DTM" type="STRING" size="256"/>
          <Column id="LS_CHG_USER_ID" type="STRING" size="256"/>
          <Column id="LS_CHG_DTM" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_DMS234" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="CM_GRP_CD_ID" type="STRING" size="256"/>
          <Column id="CM_GRP_CD_NM" type="STRING" size="256"/>
          <Column id="CM_CD_ID" type="STRING" size="256"/>
          <Column id="CHG_DTM" type="STRING" size="256"/>
          <Column id="CM_CD_NM" type="STRING" size="256"/>
          <Column id="CM_CD_DESC" type="STRING" size="256"/>
          <Column id="CM_CD_SORT_ORD" type="STRING" size="256"/>
          <Column id="USE_YN" type="STRING" size="256"/>
          <Column id="SUP_CM_GRP_CD_ID" type="STRING" size="256"/>
          <Column id="SUP_CM_CD_ID" type="STRING" size="256"/>
          <Column id="MGMT_ITEM_CD1" type="STRING" size="256"/>
          <Column id="MGMT_ITEM_CD2" type="STRING" size="256"/>
          <Column id="MGMT_ITEM_CD3" type="STRING" size="256"/>
          <Column id="MGMT_ITEM_CD4" type="STRING" size="256"/>
          <Column id="MGMT_ITEM_CD5" type="STRING" size="256"/>
          <Column id="MGMT_ITEM_CD6" type="STRING" size="256"/>
          <Column id="MGMT_ITEM_CD7" type="STRING" size="256"/>
          <Column id="MGMT_ITEM_CD8" type="STRING" size="256"/>
          <Column id="MGMT_ITEM_CD9" type="STRING" size="256"/>
          <Column id="MGMT_ITEM_CD10" type="STRING" size="256"/>
          <Column id="FS_REG_USER_ID" type="STRING" size="256"/>
          <Column id="FS_REG_DTM" type="STRING" size="256"/>
          <Column id="LS_CHG_USER_ID" type="STRING" size="256"/>
          <Column id="LS_CHG_DTM" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_sellchrgrid" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="USER_NO" type="STRING" size="256"/>
          <Column id="USER_NM" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows>
          <Row/>
        </Rows>
      </Dataset>
      <Dataset id="ds_DMS101" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="CM_GRP_CD_ID" type="STRING" size="256"/>
          <Column id="CM_GRP_CD_NM" type="STRING" size="256"/>
          <Column id="CM_CD_ID" type="STRING" size="256"/>
          <Column id="CHG_DTM" type="STRING" size="256"/>
          <Column id="CM_CD_NM" type="STRING" size="256"/>
          <Column id="CM_CD_DESC" type="STRING" size="256"/>
          <Column id="CM_CD_SORT_ORD" type="STRING" size="256"/>
          <Column id="USE_YN" type="STRING" size="256"/>
          <Column id="SUP_CM_GRP_CD_ID" type="STRING" size="256"/>
          <Column id="SUP_CM_CD_ID" type="STRING" size="256"/>
          <Column id="MGMT_ITEM_CD1" type="STRING" size="256"/>
          <Column id="MGMT_ITEM_CD2" type="STRING" size="256"/>
          <Column id="MGMT_ITEM_CD3" type="STRING" size="256"/>
          <Column id="MGMT_ITEM_CD4" type="STRING" size="256"/>
          <Column id="MGMT_ITEM_CD5" type="STRING" size="256"/>
          <Column id="MGMT_ITEM_CD6" type="STRING" size="256"/>
          <Column id="MGMT_ITEM_CD7" type="STRING" size="256"/>
          <Column id="MGMT_ITEM_CD8" type="STRING" size="256"/>
          <Column id="MGMT_ITEM_CD9" type="STRING" size="256"/>
          <Column id="MGMT_ITEM_CD10" type="STRING" size="256"/>
          <Column id="FS_REG_USER_ID" type="STRING" size="256"/>
          <Column id="FS_REG_DTM" type="STRING" size="256"/>
          <Column id="LS_CHG_USER_ID" type="STRING" size="256"/>
          <Column id="LS_CHG_DTM" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_upList" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="fullpath" type="STRING" size="256"/>
          <Column id="UPLD_FILE_NO" type="STRING" size="256"/>
          <Column id="FILE_ID" type="STRING" size="256"/>
          <Column id="FILE_NM" type="STRING" size="256"/>
          <Column id="FILE_TYP_VAL" type="STRING" size="256"/>
          <Column id="FILE_SIZE" type="STRING" size="256"/>
          <Column id="FS_REG_USER_ID" type="STRING" size="256"/>
          <Column id="FS_REG_DTM" type="STRING" size="256"/>
          <Column id="LS_CHG_USER_ID" type="STRING" size="256"/>
          <Column id="LS_CHG_DTM" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_errMsg" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="ERR_MSG" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_trmsYn" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="ERR_MSG" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_delList" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="GNRL_SELL_NO" type="STRING" size="256"/>
          <Column id="GNRL_SELL_CHG_SEQ" type="STRING" size="256"/>
          <Column id="SELL_DTM" type="STRING" size="256"/>
          <Column id="SELL_CHG_HST_CL" type="STRING" size="256"/>
          <Column id="PROD_CL" type="STRING" size="256"/>
          <Column id="SELL_SEQ" type="STRING" size="256"/>
          <Column id="EQP_MDL_CD" type="STRING" size="256"/>
          <Column id="EQP_COLOR_CD" type="STRING" size="256"/>
          <Column id="SELL_UPRC" type="STRING" size="256"/>
          <Column id="SELL_PCOST" type="STRING" size="256"/>
          <Column id="SELL_MRGN" type="STRING" size="256"/>
          <Column id="SELL_CMMS" type="STRING" size="256"/>
          <Column id="SURTAX" type="STRING" size="256"/>
          <Column id="EQP_SER_NO" type="STRING" size="256"/>
          <Column id="PROD_SER_NO" type="STRING" size="256"/>
          <Column id="SELL_AMT" type="STRING" size="256"/>
          <Column id="SPLST_YN" type="STRING" size="256"/>
          <Column id="SALE_QTY" type="STRING" size="256"/>
          <Column id="EQP_MDL_NM" type="STRING" size="256"/>
          <Column id="MFACT_CD" type="STRING" size="256"/>
          <Column id="MFACT_NM" type="STRING" size="256"/>
          <Column id="HLD_DEALCO_ID" type="STRING" size="256"/>
          <Column id="HLD_DEALCO_NM" type="STRING" size="256"/>
          <Column id="PROD_OUT_MGMT_NO" type="STRING" size="256"/>
          <Column id="EQP_ST" type="STRING" size="256"/>
          <Column id="CNSL_MGMT_NO" type="STRING" size="256"/>
          <Column id="SELL_TYP" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_search_user" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="DEALCO_CD" type="STRING" size="256"/>
          <Column id="USER_NO" type="STRING" size="256"/>
          <Column id="DUTYP_CD" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows>
          <Row/>
        </Rows>
      </Dataset>
      <Dataset id="ds_print1" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="MFACT_CD" type="STRING" size="256"/>
          <Column id="MFACT_NM" type="STRING" size="256"/>
          <Column id="EQP_MDL_CD" type="STRING" size="256"/>
          <Column id="EQP_MDL_NM" type="STRING" size="256"/>
          <Column id="CNT" type="STRING" size="256"/>
          <Column id="SELL_PRC" type="STRING" size="256"/>
          <Column id="SURTAX" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_print2" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="SALEPLC" type="STRING" size="256"/>
          <Column id="SALEPLC_NM" type="STRING" size="256"/>
          <Column id="UKEY_AGN_CD" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows>
          <Row/>
        </Rows>
      </Dataset>
      <Dataset id="ds_print3" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="MFACT_CD" type="STRING" size="256"/>
          <Column id="MFACT_NM" type="STRING" size="256"/>
          <Column id="EQP_MDL_CD" type="STRING" size="256"/>
          <Column id="EQP_MDL_NM" type="STRING" size="256"/>
          <Column id="EQP_SER_NO" type="STRING" size="256"/>
          <Column id="SELL_AMT" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows>
          <Row/>
        </Rows>
      </Dataset>
      <Dataset id="ds_DMS250" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="CM_GRP_CD_ID" type="STRING" size="256"/>
          <Column id="CM_GRP_CD_NM" type="STRING" size="256"/>
          <Column id="CM_CD_ID" type="STRING" size="256"/>
          <Column id="CHG_DTM" type="STRING" size="256"/>
          <Column id="CM_CD_NM" type="STRING" size="256"/>
          <Column id="CM_CD_DESC" type="STRING" size="256"/>
          <Column id="CM_CD_SORT_ORD" type="STRING" size="256"/>
          <Column id="USE_YN" type="STRING" size="256"/>
          <Column id="SUP_CM_GRP_CD_ID" type="STRING" size="256"/>
          <Column id="SUP_CM_CD_ID" type="STRING" size="256"/>
          <Column id="MGMT_ITEM_CD1" type="STRING" size="256"/>
          <Column id="MGMT_ITEM_CD2" type="STRING" size="256"/>
          <Column id="MGMT_ITEM_CD3" type="STRING" size="256"/>
          <Column id="MGMT_ITEM_CD4" type="STRING" size="256"/>
          <Column id="MGMT_ITEM_CD5" type="STRING" size="256"/>
          <Column id="MGMT_ITEM_CD6" type="STRING" size="256"/>
          <Column id="MGMT_ITEM_CD7" type="STRING" size="256"/>
          <Column id="MGMT_ITEM_CD8" type="STRING" size="256"/>
          <Column id="MGMT_ITEM_CD9" type="STRING" size="256"/>
          <Column id="MGMT_ITEM_CD10" type="STRING" size="256"/>
          <Column id="FS_REG_USER_ID" type="STRING" size="256"/>
          <Column id="FS_REG_DTM" type="STRING" size="256"/>
          <Column id="LS_CHG_USER_ID" type="STRING" size="256"/>
          <Column id="LS_CHG_DTM" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_mainTmp" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="GNRL_SELL_NO" type="STRING" size="256"/>
          <Column id="GNRL_SELL_CHG_SEQ" type="STRING" size="256"/>
          <Column id="SELL_DTM" type="STRING" size="256"/>
          <Column id="SELL_CHG_HST_CL" type="STRING" size="256"/>
          <Column id="PROD_CL" type="STRING" size="256"/>
          <Column id="SELL_SEQ" type="STRING" size="256"/>
          <Column id="EQP_MDL_CD" type="STRING" size="256"/>
          <Column id="EQP_COLOR_CD" type="STRING" size="256"/>
          <Column id="SELL_UPRC" type="STRING" size="256"/>
          <Column id="SELL_PCOST" type="STRING" size="256"/>
          <Column id="SELL_MRGN" type="STRING" size="256"/>
          <Column id="SELL_CMMS" type="STRING" size="256"/>
          <Column id="SURTAX" type="STRING" size="256"/>
          <Column id="EQP_SER_NO" type="STRING" size="256"/>
          <Column id="PROD_SER_NO" type="STRING" size="256"/>
          <Column id="SELL_AMT" type="STRING" size="256"/>
          <Column id="FIX_PRC_YN" type="STRING" size="256"/>
          <Column id="SALE_QTY" type="STRING" size="256"/>
          <Column id="EQP_MDL_NM" type="STRING" size="256"/>
          <Column id="MFACT_CD" type="STRING" size="256"/>
          <Column id="MFACT_NM" type="STRING" size="256"/>
          <Column id="HLD_DEALCO_ID" type="STRING" size="256"/>
          <Column id="HLD_DEALCO_NM" type="STRING" size="256"/>
          <Column id="PROD_OUT_MGMT_NO" type="STRING" size="256"/>
          <Column id="EQP_ST" type="STRING" size="256"/>
          <Column id="CNSL_MGMT_NO" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
    </Objects>
    <InitValue/>
    <Bind>
      <BindItem id="item1" compid="div_detail.txa_rmk" propid="value" datasetid="ds_master" columnid="RMK"/>
      <BindItem id="item6" compid="div_search.edt_sellCoCd" propid="value" datasetid="ds_master" columnid="SELL_DEALCO_CD"/>
      <BindItem id="item7" compid="div_detail.edt_salePlc" propid="value" datasetid="ds_payment" columnid="SALEPLC"/>
      <BindItem id="item8" compid="div_detail.edt_sellPrcCashRecvAmt" propid="value" datasetid="ds_payment" columnid="SELL_PRC_CASH_RECV_AMT"/>
      <BindItem id="item9" compid="div_detail.cbo_sellPrcCcardCo1" propid="value" datasetid="ds_payment" columnid="SELL_PRC_CCARD_CO_1"/>
      <BindItem id="item10" compid="div_detail.edt_sellPrcCcardRecvAmt1" propid="value" datasetid="ds_payment" columnid="SELL_PRC_CCARD_RECV_AMT_1"/>
      <BindItem id="item13" compid="div_detail.edt_salePlcNm" propid="value" datasetid="ds_payment" columnid="SALEPLC_NM"/>
      <BindItem id="item14" compid="div_search.edt_agnOrgNm" propid="value" datasetid="ds_master" columnid="AFFIL_AGN_NM"/>
      <BindItem id="item15" compid="div_search.edt_sellCoNm" propid="value" datasetid="ds_master" columnid="SELL_DEALCO_NM"/>
      <BindItem id="item0" compid="div_search.edt_affilAgn" propid="value" datasetid="ds_master" columnid="AFFIL_AGN"/>
      <BindItem id="item2" compid="div_search.edt_agnOrgCd" propid="value" datasetid="ds_master" columnid="AGN_ORG_CD"/>
      <BindItem id="item3" compid="div_detail.chk_sellTyp" propid="value" datasetid="ds_master" columnid="SELL_TYP"/>
      <BindItem id="item4" compid="div_search.edt_user_no" propid="value" datasetid="ds_master" columnid="SELL_CHRGR_ID"/>
      <BindItem id="item5" compid="div_search.edt_usernm" propid="value" datasetid="ds_sellchrgrid" columnid="USER_NM"/>
      <BindItem id="item11" compid="div_detail.cbo_sellClCd" propid="value" datasetid="ds_master" columnid="SELL_CL_CD"/>
    </Bind>
    <Script type="xscript4.0"><![CDATA[/*
 * 01. 업무구분 : 단말기매출관리
 * 02. 화면 : B2BSaleRgstM.xfdl
 * 03. 화면 설명 : 상품판매등록
 * 04. 관련 화면/서비스 : 
 * 05. 작성자 : Leeminjae
 * 05. 작성일 : 2015-09-01
 * 07. 수정이력 :
 ************************************************************************************************
 *     수정일        이  름    사유
 ************************************************************************************************
 *     2015.09.01    Leeminjae    최초 작성
 ************************************************************************************************
 */
 
/*===============================================================================================
 * [ PART 1 ] Form에서 Include 할 라이브러리(xjs)파일 정의
================================================================================================*/
include "LIB::common.xjs"; //공통함수 호출
include "LIB::comFile.xjs"; //공통함수 호출

/*===============================================================================================
 * [ PART 2 ] Form에서 사용될 전역변수를 선언
================================================================================================*/

 var pv_sPtrn = "";
 var pv_job = ""; // 신규/수정 구분
 var pv_sDisable = ""; // 저장/삭제 불가일 경우 01: 신용카드 확정일자
 var pv_gnrlSellNo = "" // 일반판매관리번호
 var pv_TrmsYn = "" // 전송여부
/*===============================================================================================
 * [ PART 3 ] Form Event 처리
================================================================================================*/
/*----------------------------------------------------------------------------------------------
 * 설명   : Form Load Event
-----------------------------------------------------------------------------------------------*/
function Form_onload(obj:Form, e:LoadEventInfo)
{
	//공통 Form 초기화
	gfn_setInitPop(obj, e, "FEP022M");
 	//Form 초기 개발자 셋팅
 	//공통코드 초기화
 	fn_setInitCode(obj, e);
 	//그리드 초기화
 	fn_setInitGrid(obj, e);
 	//기본값 초기화
 	fn_setInitForm(obj, e);
 	
}

/*----------------------------------------------------------------------------------------------
 * 설명   : Form 종료전 Check 함수(공통)
-----------------------------------------------------------------------------------------------*/
function Form_checkBeforeClose()
{
	//변경된 Dataset검증
	if ( gfn_formBeforeOnClose(this, "ds_main") ) {
		return true;
	} else {
		return false;
	}
}
/*===============================================================================================
 * [ PART 4 ] Load 후 초기설정
================================================================================================*/
/*----------------------------------------------------------------------------------------------
 * 설명   : 공통코드 초기화
-----------------------------------------------------------------------------------------------*/
function fn_setInitCode(obj:Form, e:LoadEventInfo)
{

	var strCode =  "DMS100=ds_DMS100=N";	//색상
	    strCode += ",DMS160=ds_DMS160=N"; 	//상품구분
	    strCode += ",DMS196=ds_DMS196=N";	//판매변경이력구분
	    strCode += ",DMS234=ds_DMS234=S";	//중고폰신용카드사
	    strCode += ",DMS101=ds_DMS101=N";	//제조사
	    strCode += ",DMS250=ds_DMS250=N";	//판매구분
						
	gfn_getCodeDs( this
				  , strCode
				  ,"fn_afterCodeCallBack");
}

/*----------------------------------------------------------------------------------------------
 * 설명   : 공통코드 호출 후 처리
-----------------------------------------------------------------------------------------------*/
function fn_afterCodeCallBack()
{		 
	div_detail.cbo_sellPrcCcardCo1.index=0;
	div_detail.cbo_sellClCd.index=1;
}
/*----------------------------------------------------------------------------------------------
 * 설명   : 그리드 초기화
-----------------------------------------------------------------------------------------------*/
function fn_setInitGrid(obj:Form, e:LoadEventInfo)
{	
	page = 1;
	page_size = 10000;

	// 그리드 초기화 
	//gfn_initGrid(objGrid:UserGrid, bReadonly, bSortable, bTooltip, sSelectType, innerDs, sPage, sPageSize, sTotCnt);
	gfn_initGrid(grd_main, false, true, true, "row", null);
}


/*----------------------------------------------------------------------------------------------
 * 설명   : 기본값 설정
-----------------------------------------------------------------------------------------------*/
function fn_setInitForm(obj:Form, e:LoadEventInfo)
{	
	if(mode == "new"){	
		pv_job = "new";
	
		fn_initPayment()
		fn_enable("div_search.cal_chg_dt,div_search.edt_chg_dt_hh,div_search.edt_chg_dt_mm,btn_cancel", false);
	
		div_search.cal_sell_dt.value = gfn_todayTime().substr(0,8);
		div_search.edt_sell_dt_hh.value = gfn_todayTime().substr(8,2);
		div_search.edt_sell_dt_mm.value = gfn_todayTime().substr(10,2);
		
		btn_delete.enable = false;
		
	}else if(mode == "update"){
		fn_enable("div_search.cal_sell_dt,div_search.edt_sell_dt_hh,div_search.edt_sell_dt_mm", false);
		btn_prod_select.enable = false;
		btn_excel_upload.enable = false;
	
		ds_search_dtl.setColumn(0, "GNRL_SELL_NO", opener.ds_main.getColumn(opener.ds_main.rowposition, "GNRL_SELL_NO"));
		fn_searchDtl();
		
	}	
}

/*===============================================================================================
 * [ PART 5 ] Transaction 처리
================================================================================================*/
/*----------------------------------------------------------------------------------------------
 * 설명   : 상세조회
 * param   : 
 * return  : void
-----------------------------------------------------------------------------------------------*/
function fn_searchDtl()
{
	var sSvcID		 = "searchDtl";
	var sTrID		 = "PEPB2BSaleMgmt_pInqB2bSaleSaveDtl";
	var sPtrn		 = "R";  //입력C,조회R,수정U,삭제D,복합M
	var sInputDs	 = "ncFieldMap=ds_search_dtl";
	var sOutputDs	 = "ds_master=RS_B2B_MASTER_DTL ds_mainTmp=RS_B2B_ITEM_DTL ds_payment=RS_B2B_PAYMENT_DTL ds_print1=RS_B2B_REPORT_DTL ds_upList=NC_FILE_LIST";
	var sArgs		 = "";
	var sCallBackFnc = "fn_callBack";

	gfn_transaction(sSvcID, sTrID, sPtrn, sInputDs, sOutputDs, sArgs, sCallBackFnc);
}

/*----------------------------------------------------------------------------------------------
 * 설명   : 재고상품체크
 * param   : 
 * return  : void
-----------------------------------------------------------------------------------------------*/
function fn_searchInveChk()
{
	var sSvcID		 = "searchInveChk";
	var sTrID		 = "PEPInveProdDisMgmt_pInqInveProdDisChkList";
	var sPtrn		 = "R";  //입력C,조회R,수정U,삭제D,복합M
	var sInputDs	 = "RS_INVE_DIS_LIST=ds_main";
	var sOutputDs	 = "ds_errMsg=RS_INVE_ERR_LIST";
	var sArgs		 = "";
	var sCallBackFnc = "fn_callBack";

	gfn_transaction(sSvcID, sTrID, sPtrn, sInputDs, sOutputDs, sArgs, sCallBackFnc);
}

/*----------------------------------------------------------------------------------------------
 * 설명   : 상품판매전송여부조회
 * param   : 
 * return  : void
-----------------------------------------------------------------------------------------------*/
function fn_searchTrmsYn()
{
	var sSvcID		 = "searchTrmsYn";
	var sTrID		 = "PEPB2BSaleMgmt_pInqB2bSaleTrmsYn";
	var sPtrn		 = "R";  //입력C,조회R,수정U,삭제D,복합M
	var sInputDs	 = "RS_MASTER_LIST=ds_master";
	var sOutputDs	 = "ds_trmsYn=RS_TRMS_YN";
	var sArgs		 = "";
	var sCallBackFnc = "fn_callBack";

	gfn_transaction(sSvcID, sTrID, sPtrn, sInputDs, sOutputDs, sArgs, sCallBackFnc);
}

/*----------------------------------------------------------------------------------------------
 * 설명   : 상품판매시작전송여부조회
 * param   : 
 * return  : void
-----------------------------------------------------------------------------------------------*/
function fn_searchInitTrmsYn()
{
	var sSvcID		 = "searchInitTrmsYn";
	var sTrID		 = "PEPB2BSaleMgmt_pInqB2bSaleTrmsYn";
	var sPtrn		 = "R";  //입력C,조회R,수정U,삭제D,복합M
	var sInputDs	 = "RS_MASTER_LIST=ds_master";
	var sOutputDs	 = "ds_trmsYn=RS_TRMS_YN";
	var sArgs		 = "";
	var sCallBackFnc = "fn_callBack";

	gfn_transaction(sSvcID, sTrID, sPtrn, sInputDs, sOutputDs, sArgs, sCallBackFnc);
}

/*----------------------------------------------------------------------------------------------
 * 설명   : 메인저장 (insert, update)
 * param   : 
 * return  : void
-----------------------------------------------------------------------------------------------*/
function fn_saveMain(prtn)
{	
	var sSvcID		 = "saveMain";
	var sTrID		 = "PEPB2BSaleMgmt_pSaveB2bSale";
	var sPtrn		 = prtn;  //입력C,조회R,수정U,삭제D,복합M
	var sInputDs	 = "RS_SALE_LIST=ds_main RS_MASTER_LIST=ds_master RS_PAYMENT_LIST=ds_payment RS_DEL_LIST=ds_delList NC_FILE_LIST=ds_upList";
	var sOutputDs	 = "";
	var sArgs		 = "";
	var sCallBackFnc = "fn_callBack";
	
	gfn_transaction(sSvcID, sTrID, sPtrn, sInputDs, sOutputDs, sArgs, sCallBackFnc);
}

/*----------------------------------------------------------------------------------------------
 * 설명   : 사용자 조회
 * param   : 
 * return  : void
-----------------------------------------------------------------------------------------------*/
function fn_searchUserList()
{
	var sSvcID		 = "searchUserList";
	var sTrID		 = "PEPUserMgmt_pInqUserMgmtLst";
	var sPtrn		 = "R";  //입력C,조회R,수정U,삭제D,복합M
	var sInputDs	 = "ncFieldMap=ds_search_user";
	var sOutputDs	 = "ds_sellchrgrid=RS_USER_LIST";
	var sArgs		 = "";
	var sCallBackFnc = "fn_callBack";

	gfn_transaction(sSvcID, sTrID, sPtrn, sInputDs, sOutputDs, sArgs, sCallBackFnc);
}

/*----------------------------------------------------------------------------------------------
 * 설명   : 파일업로드
-----------------------------------------------------------------------------------------------*/
function fn_fileUpload()
{
	var sFileSvcId       = "uploadFile";
	var sCallBackFnc     = "fn_callBackFile";
	var objFileDS        = ds_upList;
	var sFullPathCol     = "fullpath";
	var objButton        = "";
	gfn_fileUpload(sFileSvcId, sCallBackFnc, objFileDS, sFullPathCol, objButton);
}


/*===============================================================================================
 * [ PART 6 ] CallBack 처리
================================================================================================*/
/*----------------------------------------------------------------------------------------------
 * 설명   : Transaction CallBack
 * param   : sSvcID, iErrorCode, sErrorMsg(ncMsgId,ncMsg)
 * return  : void
-----------------------------------------------------------------------------------------------*/
function fn_callBack(sSvcID, iErrorCode, sErrorMsg, ncMsgId, ncMsg)
{
 	switch(sSvcID) {
		case "searchDtl": 
			if ( iErrorCode == 0 ) {
			
				if(ds_master.getRowCount() > 0){
					
					pv_job = "update";
					
					btn_print.enable = true;
				
					fn_enable("div_search.cal_sell_dt,div_search.edt_sell_dt_hh,div_search.edt_sell_dt_mm" +
							  ",div_search.edt_agnOrgCd,div_search.edt_agnOrgNm,div_search.btn_searchAgnOrg,div_search.btn_resetAgnOrg" +
							  ",div_search.edt_sellCoCd,div_search.edt_sellCoNm,div_search.btn_searchSell,div_search.btn_resetSell", false);
					
					var sellDtm = ds_master.getColumn(0, "SELL_DTM");
					div_search.cal_sell_dt.value = sellDtm.substr(0,8);
					div_search.edt_sell_dt_hh.value = sellDtm.substr(8,2);
					div_search.edt_sell_dt_mm.value = sellDtm.substr(10,2);
					
					div_search.cal_chg_dt.value = gfn_todayTime().substr(0,8);
					div_search.edt_chg_dt_hh.value = gfn_todayTime().substr(8,2);
					div_search.edt_chg_dt_mm.value = gfn_todayTime().substr(10,2);
										
					ds_search_user.setColumn(0, "DUTYP_CD", ds_master.getColumn(0, "SELL_DEALCO_CD"));
					ds_search_user.setColumn(0, "USER_NO", ds_master.getColumn(0, "SELL_CHRGR_ID"));
					fn_searchUserList();
					
					if(ds_payment.getColumn(0, "CCARD_XCL_CONF_YN_1") == "Y" || ds_payment.getColumn(0, "CCARD_XCL_CONF_YN_2") == "Y" ){ // 카드 확정시 수정 불가
						gfn_message("A","신용카드 정산 확정건으로 수정 불가능합니다.");
						div_search.enable = false;
						pv_sDisable = "01";
					}
					
					if(!gfn_isNull(ds_master.getColumn(0, "XCL_SLIP_NO")) && ds_master.getColumn(0, "XCL_SLIP_ST") != "05" ){ // 전표발행시 수정 불가
						gfn_message("A","전표 발행건으로 수정 불가능합니다.");
						div_search.enable = false;
						pv_sDisable = "02";
					}
					
					ds_upList.addColumn("fullpath","string");
					
					fn_searchInitTrmsYn();
					
					ds_main.appendData(ds_mainTmp,true);
					fn_nextLoop();
					
				}else{				
					pv_job = "new";
					btn_add.enable = true;
				}
			}
		break;
		
		case "searchInveChk": 
			if ( iErrorCode == 0 ) {
				if(ds_errMsg.getRowCount() > 0){
					var errMsg = ds_errMsg.getColumn(0,"ERR_MSG");
					gfn_dialog("FEP040P", {ERR_MSG:errMsg}); 
				}
			}
		break;
		
		case "searchInitTrmsYn": 
			if ( iErrorCode == 0 ) {
				pv_TrmsYn = "N";
	
				if(ds_main.getRowCount() > 0){
					if(ds_trmsYn.getColumn(0, "TRMS_YN") == "Y") {
						pv_TrmsYn = "Y";
						btn_delete.enable = false;
						div_detail.edt_salePlc.enable = false;
						div_detail.edt_salePlcNm.enable = false;
						div_detail.btn_searchPlc.enable = false;
						div_detail.btn_resetPlc.enable = false;
						div_detail.edt_sellPrcCashRecvAmt.enable = false;
					}else{
						btn_delete.enable = true;
						div_detail.edt_salePlc.enable = true;
						div_detail.edt_salePlcNm.enable = true;
						div_detail.btn_searchPlc.enable = true;
						div_detail.btn_resetPlc.enable = true;
						div_detail.edt_sellPrcCashRecvAmt.enable = true;
					}
					
					btn_cancel.enable = true;
				}else{
					div_detail.edt_salePlc.enable = true;
					div_detail.edt_salePlcNm.enable = true;
					div_detail.btn_searchPlc.enable = true;
					div_detail.btn_resetPlc.enable = true;
					div_detail.edt_sellPrcCashRecvAmt.enable = true;
					btn_delete.enable = true;
					btn_cancel.enable = false;					
				}
			}
		break;
		
		case "searchTrmsYn": 
			if ( iErrorCode == 0 ) {
				if(pv_TrmsYn == "N" && ds_trmsYn.getColumn(0, "TRMS_YN") == "Y" ){
					gfn_message("A","타 시스템에 의해 데이터가 변경되었습니다. 재조회 후 저장하세요.");
					btn_save.enable = false;
					btn_cancel.enable = false;
					return false;
				}
				
				if(!confirm( "저장하시겠습니까?" )) return;
				
				if (div_detail.chk_sellTyp.value != undefined && div_detail.chk_sellTyp.value == "03") {
					ds_master.setColumn(0, "SELL_TYP", "03"); // 판매유형
				} else {
					ds_master.setColumn(0, "SELL_TYP", "01"); // 판매유형
				}
				
				ds_master.setColumn(0, "TRMS_YN", pv_TrmsYn);
				ds_master.setColumn(0, "INVE_HLD_DEALCO_CD", ds_master.getColumn(0, "SELL_DEALCO_CD")); // 재고보유처코드
				ds_master.setColumn(0, "EQP_STTL_COND", "C"); // 단말기결제조건(A-할부, C-현금(일시불))
			
				if(pv_job == "new"){	// 신규모드
					pv_sPtrn = "I";
					ds_master.setColumn(0, "SELL_DTM"    , fn_getDate("sell"));
					ds_master.setColumn(0, "SELL_CHG_DTM", fn_getDate("sell"));
					
					ds_payment.setColumn(0, "CHG_SELL_PRC_CASH_RECV_AMT", ds_payment.getColumn(0, "SELL_PRC_CASH_RECV_AMT"));
				}else{	// 수정모드 
					
					if(ds_main.getRowCount() == 0){ // 상품정보 없으면 판매취소
						pv_sPtrn = "D";
					}else{
						pv_sPtrn = "U";
					}
					
					ds_master.setColumn(0, "SELL_CHGR_ID", div_search.edt_user_no.value);
					ds_master.setColumn(0, "SELL_DTM"    , fn_getDate("sell"));
					ds_master.setColumn(0, "SELL_CHG_DTM", fn_getDate("chg"));
					
					var ccardAmt = Number(ds_payment.getColumn(0, "SELL_PRC_CCARD_RECV_AMT_1")) - Number(ds_payment.getColumn(0, "BCHG_SELL_PRC_CCARD_RECV_AMT_1"));
					ds_payment.setColumn(0, "CHG_SELL_PRC_CASH_RECV_AMT", Number(ds_payment.getColumn(0, "CHG_SELL_PRC_CASH_RECV_AMT")) - ccardAmt);
				}
				
				if(ds_upList.rowcount == 0){
					fn_saveMain(pv_sPtrn);
				} else {
					ds_upList.filter("UPLD_FILE_NO==undefined||UPLD_FILE_NO==''||UPLD_FILE_NO==null");
					if(ds_upList.rowcount == 0) {
						ds_upList.filter("");
						fn_saveMain(pv_sPtrn);
					} else {
						fn_fileUpload();
					}
				}
			}
		break;
		
		case "saveMain":
			if ( iErrorCode == 0 ) {
				gfn_message("A","DMS00000","I");	//DMS00000 : 정상 처리되었습니다.
				opener.btn_search_onclick();
				close(true);
			}
		break;
				
		default:
		break;
		
	}
}

/*----------------------------------------------------------------------------------------------
 * 설명   : FileUpload CallBack
 * param   : sSvcID, iErrorCode, sErrorMsg, objRtnDs
 * return  : void
-----------------------------------------------------------------------------------------------*/
function fn_callBackFile(sSvcID, iErrorCode, sErrorMsg, objRtnDs)
{
 	switch(sSvcID) {
		case "uploadFile":
			for(i=0;i<ds_upList.rowcount;i++) {
				ds_upList.setColumn(i,"FILE_ID",objRtnDs.getColumn(i,"ncUploadedFileId"));
			}
			ds_upList.filter("");
			fn_saveMain(pv_sPtrn);
		break;
		
		default :
		break;
	}
}

/*===============================================================================================
 * [ PART 7 ] Main Button Event
================================================================================================*/
/*----------------------------------------------------------------------------------------------
 * 설명   : Save
-----------------------------------------------------------------------------------------------*/
function btn_save_onclick(obj:Button,  e:ClickEventInfo)
{
	if( !fn_checkDefault() ){
        return false;
    }
    
    if( pv_job == "new" ){
		if(ds_main.getRowCount() == 0){
			gfn_message("A","상품정보가 없습니다.");
			return false;
		}
    }
    
    if((!gfn_isUpdated(ds_master)&&!gfn_isUpdated(ds_payment)&&!gfn_isUpdated(ds_upList)))
	{
		gfn_message("A","DMS00022","I");	//변경된 정보가 없습니다.
		return false;
	}
    
	if( fn_validSavePosbility() == false ) return;
		
	if( fn_validPayment() == false ) return;
	
	// 저장시점의 상품재고 체크
	if( pv_job == "new" ){
		fn_searchInveChk();
	}

	fn_searchTrmsYn();
}

/*----------------------------------------------------------------------------------------------
 * 설명   : Close
-----------------------------------------------------------------------------------------------*/
function btn_close_onclick(obj:Button,  e:ClickEventInfo)
{
	switch(obj.name) 
	{	
		case "btn_close" : 	  //닫기
			close("cancel");
		break;
			
		case "btn_close2" :   //버튼X
			close("cancel");
		break;	
	}
}

/*----------------------------------------------------------------------------------------------
 * 설명   : 재고선택
-----------------------------------------------------------------------------------------------*/
function btn_prod_select_onclick(obj:Button,  e:ClickEventInfo)
{
	if(!fn_checkDefault()){
        return false;
    }
    // 재고상품검색 팝업
    var sRtnValDs = gfn_dialog("FEP039P", {SELL_TYP:"01"});  
    ds_main.appendData(sRtnValDs,true);
    if(sRtnValDs != "cancel"){
		btn_delete.enable = true;
    }
}

/*----------------------------------------------------------------------------------------------
 * 설명   : ROW 추가 : 미정
-----------------------------------------------------------------------------------------------*/
/*
function btn_add_onclick(obj:Button,  e:ClickEventInfo)
{
	if( fn_validSavePosbility() == false ) return;
	
	var nRow = 0;
	if(ds_main.getRowCount() > 0){	
		nRow = ds_main.rowposition;
		if(fn_validProd(nRow) == false) return;
	}
	nRow = ds_main.addRow();
	
	// 수납정보 초기화
	if(nRow == 0){
		fn_initPayment();
		div_detail.cbo_sellPrcCcardCo1.index = 0;
		div_detail.cbo_sellPrcCcardCo2.index = 0;		
	}
	
	ds_main.setColumn(nRow, "SELL_CHG_HST_CL", "01");
	ds_main.setColumn(nRow, "SALE_QTY", "1");
	ds_main.setColumn(nRow, "SELL_UPRC", "0");
	ds_main.setColumn(nRow, "PROD_CL", "");	// 상품구분 선택 항목 선택
	
	// 수납정보
	fn_enable("div_detail.cbo_sellPrcCcardCo1,div_detail.cbo_sellPrcCcardCo2",true);
	
	if(!gfn_isNull(pv_gnrlSellNo)){
		ds_main.setColumn(nRow, "PROD_CL", "9");
		grd_main.setCellProperty("Body", 2, "edit", "none");
	}
	grd_main.setCellProperty("Body", 2, "edit", "none");
	
	btn_delete.enable = true;
}
*/

/*----------------------------------------------------------------------------------------------
 * 설명   : ROW 삭제
-----------------------------------------------------------------------------------------------*/
function btn_delete_onclick(obj:Button,  e:ClickEventInfo)
{
	if(fn_validSavePosbility() == false) return;
	
	var nRow = ds_main.rowposition;
	var nRows = ds_main.getRowCount();
	
	if(pv_job == "new"){ // 신규
		ds_main.deleteRow(nRow);
	}else{	// 수정
		if(nRows == 0) return;
		
		if(!confirm( "선택된 판매건을 취소하시겠습니까?" )) return;
		
		ds_delList.copyRow(ds_delList.addRow(), ds_main, nRow);
		
		//수납금액 '-'로 변경
		var nChgCashPayAmt = toNumber(ds_payment.getColumn(0, "CHG_SELL_PRC_CASH_RECV_AMT")) 
									+ toNumber(ds_main.getColumn(nRow, "SELL_AMT")) * (-1);
		var nChgDisAmt = toNumber(ds_payment.getColumn(0, "CHG_INVE_AMT")) 
									+ toNumber(ds_main.getColumn(nRow, "SELL_PCOST"))*(-1);
		var nChgCmmsAmt = toNumber(ds_payment.getColumn(0, "CHG_CMMS_AMT")) 
									+ toNumber(ds_main.getColumn(nRow, "SELL_CMMS"))*(-1);
		var nChgMarAmt = toNumber(ds_payment.getColumn(0, "CHG_MRGN_AMT")) 
									+ toNumber(ds_main.getColumn(nRow, "SELL_MRGN"))*(-1);
		var nChgVatAmt = toNumber(ds_payment.getColumn(0, "CHG_SURTAX_AMT")) 
									+ toNumber(ds_main.getColumn(nRow, "SURTAX"))*(-1);
		var nChgSaleAmt = toNumber(ds_payment.getColumn(0, "CHG_SELL_AMT")) 
									+ toNumber(ds_main.getColumn(nRow, "SELL_AMT"))*(-1);		
		
		ds_payment.setColumn(0, "CHG_SELL_PRC_CASH_RECV_AMT", nChgCashPayAmt);
		ds_payment.setColumn(0, "CHG_INVE_AMT", nChgDisAmt);
		ds_payment.setColumn(0, "CHG_CMMS_AMT", nChgCmmsAmt);
		ds_payment.setColumn(0, "CHG_MRGN_AMT", nChgMarAmt);
		ds_payment.setColumn(0, "CHG_SURTAX_AMT", nChgVatAmt);
		ds_payment.setColumn(0, "CHG_SELL_AMT", nChgSaleAmt);
		
		ds_main.deleteRow(nRow);
		
	}
	
}

/*----------------------------------------------------------------------------------------------
 * 설명   : 판매취소
-----------------------------------------------------------------------------------------------*/
function btn_cancel_onclick(obj:Button,  e:ClickEventInfo)
{
	if(fn_validSavePosbility() == false) return;
		
	if(!confirm( "전체 판매건을 취소하시겠습니까?" )) return;
	
	var nRows = ds_main.getRowCount();
	
	ds_delList.clearData();
	for(var i=0; i<nRows; i++){
		ds_delList.copyRow(ds_delList.addRow(), ds_main, i);
	}
	
	ds_master.setColumn(0, "SELL_CHGR_ID", div_search.edt_user_no.value);
	ds_master.setColumn(0, "SELL_DTM"    , fn_getDate("sell"));
	ds_master.setColumn(0, "SELL_CHG_DTM", fn_getDate("chg"));
		
	//수납금액 '-'로 변경
	var nChgCashPayAmt = toNumber(ds_payment.getColumn(0, "CHG_SELL_PRC_CASH_RECV_AMT")) 
							+ toNumber(ds_payment.getColumn(0, "SELL_PRC_CASH_RECV_AMT"))*(-1);
	var nChgCrdtcrdPayAmt1 = toNumber(ds_payment.getColumn(0, "CHG_SELL_PRC_CCARD_RECV_AMT_1")) 
								+ toNumber(ds_payment.getColumn(0, "SELL_PRC_CCARD_RECV_AMT_1"))*(-1);
	//var nChgCrdtcrdPayAmt2 = toNumber(ds_payment.getColumn(0, "CHG_SELL_PRC_CCARD_RECV_AMT_2")) 
	//							+ toNumber(ds_payment.getColumn(0, "SELL_PRC_CCARD_RECV_AMT_2"))*(-1);
	var nChgDisAmt = toNumber(ds_payment.getColumn(0, "CHG_INVE_AMT")) 
								+ toNumber(ds_payment.getColumn(0, "INVE_AMT"))*(-1);
	var nChgCmmsAmt = toNumber(ds_payment.getColumn(0, "CHG_CMMS_AMT")) 
								+ toNumber(ds_payment.getColumn(0, "CMMS_AMT"))*(-1);
	var nChgMarAmt = toNumber(ds_payment.getColumn(0, "CHG_MRGN_AMT")) 
								+ toNumber(ds_payment.getColumn(0, "MRGN_AMT"))*(-1);
	var nChgVatAmt = toNumber(ds_payment.getColumn(0, "CHG_SURTAX_AMT")) 
								+ toNumber(ds_payment.getColumn(0, "SURTAX_AMT"))*(-1);
	var nChgSaleAmt = toNumber(ds_payment.getColumn(0, "CHG_SELL_AMT")) 
								+ toNumber(ds_payment.getColumn(0, "SELL_AMT"))*(-1);
		
	ds_payment.setColumn(0, "CHG_SELL_PRC_CASH_RECV_AMT", nChgCashPayAmt);
	ds_payment.setColumn(0, "CHG_SELL_PRC_CCARD_RECV_AMT_1", nChgCrdtcrdPayAmt1);
	//ds_payment.setColumn(0, "CHG_SELL_PRC_CCARD_RECV_AMT_2", nChgCrdtcrdPayAmt2);
	ds_payment.setColumn(0, "CHG_INVE_AMT", nChgDisAmt);
	ds_payment.setColumn(0, "CHG_CMMS_AMT", nChgCmmsAmt);
	ds_payment.setColumn(0, "CHG_MRGN_AMT", nChgMarAmt);
	ds_payment.setColumn(0, "CHG_SURTAX_AMT", nChgVatAmt);
	ds_payment.setColumn(0, "CHG_SELL_AMT", nChgSaleAmt);
	
	fn_saveMain("D");
}

/*----------------------------------------------------------------------------------------------
 * 설명   : grid excel
-----------------------------------------------------------------------------------------------*/
function btn_excel_onclick(obj:Button,  e:ClickEventInfo)
{
	if (grd_main.rowcount == 0){
		gfn_message("A","DMS00021","I"); //조회된 정보가 없습니다.
	} else {
		gfn_baseExcelExpert(grd_main,"상품판매등록목록","상품판매등록목록");
	}
}

/*===============================================================================================
 * [ PART 8 ] Event
================================================================================================*/

/*----------------------------------------------------------------------------------------------
 * 설명   : 대리점 엔터키 검색
-----------------------------------------------------------------------------------------------*/
function div_search_edt_dealCoCd_onkeydown(obj:Edit, e:KeyEventInfo)
{
	if (e.keycode == KEYCODE_ENTER) {
		div_search_btn_searchDeal_onclick();
	}
}

/*----------------------------------------------------------------------------------------------
 * 설명   : 판매처 엔터키 검색
-----------------------------------------------------------------------------------------------*/
function div_search_edt_sellCoCd_onkeydown(obj:Edit, e:KeyEventInfo)
{
	if (e.keycode == KEYCODE_ENTER) {
		div_search_btn_searchSell_onclick();
	}
}

/*----------------------------------------------------------------------------------------------
 * 설명   : 매출처 엔터키 검색
-----------------------------------------------------------------------------------------------*/
function div_search_edt_salePlc_onkeydown(obj:Edit, e:KeyEventInfo)
{
	if (e.keycode == KEYCODE_ENTER) {
		div_detail_btn_searchPlc_onclick();
	}
}

/*----------------------------------------------------------------------------------------------
 * 설명   : 사용자 엔터키 검색
-----------------------------------------------------------------------------------------------*/
function div_search_edt_user_no_onkeydown(obj:Edit, e:KeyEventInfo)
{
	if (e.keycode == KEYCODE_ENTER) {
		div_search_btn_searchUser_onclick();
	}
}

/*----------------------------------------------------------------------------------------------
 * 설명   : 대리점 검색
-----------------------------------------------------------------------------------------------*/
function div_search_btn_searchDeal_onclick(obj:Button,  e:ClickEventInfo)
{
	var sParam01 = div_search.edt_agnOrgNm.value;
	var sParam02 = div_search.edt_agnOrgCd.value;
	var sParam03 = "A1";
	var sParam04 = "";
	if ( e == null ) {
		sParam04 = "key";
	} else {
		sParam04 = "button";
	}

	var arrArgs = {argAutoSelect:true, argCallProgram:"FEP021M", argParam01:sParam01, argParam02:sParam02, argParam03:sParam03, argParam04:sParam04};
	var sRtnVal = gfn_dialog("FBI004P", arrArgs);

	//팝업에서 입력받은 값 리턴
	if ( gfn_isNull(sRtnVal) || sRtnVal == "cancel" ) {
		//취소시 값 제거
		div_search.edt_agnOrgCd.value = "";
		div_search.edt_agnOrgNm.value = "";
		div_search.edt_affilAgn.value = "";
	} else {	//Object이용시
		div_search.edt_agnOrgCd.value = sRtnVal["supAgnOrgCd"];
		div_search.edt_agnOrgNm.value = sRtnVal["supDealCoNm"];	
		div_search.edt_affilAgn.value = sRtnVal["supAffilAgn"];
	}
}

/*----------------------------------------------------------------------------------------------
 * 설명   : 판매처 검색
-----------------------------------------------------------------------------------------------*/
function div_search_btn_searchSell_onclick(obj:Button,  e:ClickEventInfo)
{
	if (!gfn_getValidateCompList(div_search)) {	
		return false;
	}

	var sParam01 = div_search.edt_sellCoNm.value;
	var sParam02 = div_search.edt_sellCoCd.value;
	var sParam03 = ""; //판매처로 변경 필요
	var sParam04 = "";
	var sParam05 = div_search.edt_affilAgn.value;
	if ( e == null ) {
		sParam04 = "key";
	} else {
		sParam04 = "button";
	}

	var arrArgs = {argAutoSelect:true, argCallProgram:"FEP021M", argParam01:sParam01, argParam02:sParam02, argParam03:sParam03, argParam04:sParam04, argParam05:sParam05};
	var sRtnVal = gfn_dialog("FBI004P", arrArgs);

	//팝업에서 입력받은 값 리턴
	if ( gfn_isNull(sRtnVal) || sRtnVal == "cancel" ) {
		//취소시 값 제거
		div_search.edt_sellCoCd.value = "";
		div_search.edt_sellCoNm.value = "";
	} else {	//Object이용시
		div_search.edt_sellCoCd.value = sRtnVal["supDealCoCd"];
		div_search.edt_sellCoNm.value = sRtnVal["supDealCoNm"];		
		
		//ds_search_user.setColumn(0, "DEALCO_CD", sRtnVal["supDealCoCd"]);
		//fn_searchUserList();
	}
}

/*----------------------------------------------------------------------------------------------
 * 설명   : 매출처 검색
-----------------------------------------------------------------------------------------------*/
function div_detail_btn_searchPlc_onclick(obj:Button,  e:ClickEventInfo)
{
	var sParam01 = div_detail.edt_salePlcNm.value;
	var sParam02 = div_detail.edt_salePlc.value;
	var sParam03 = "S1"; // 매출처
	var sParam04 = "";
	if ( e == null ) {
		sParam04 = "key";
	} else {
		sParam04 = "button";
	}

	var arrArgs = {argAutoSelect:true, argCallProgram:"FEP021M", argParam01:sParam01, argParam02:sParam02, argParam03:sParam03, argParam04:sParam04};
	var sRtnVal = gfn_dialog("FBI004P", arrArgs);

	//팝업에서 입력받은 값 리턴
	if ( gfn_isNull(sRtnVal) || sRtnVal == "cancel" ) {
		//취소시 값 제거
		div_detail.edt_salePlc.value = "";
		div_detail.edt_salePlcNm.value = "";
	} else {	//Object이용시
		div_detail.edt_salePlc.value = sRtnVal["supDealCoCd"];
		div_detail.edt_salePlcNm.value = sRtnVal["supDealCoNm"];	
	}
}

/*----------------------------------------------------------------------------------------------
 * 설명   : 사용자 검색
-----------------------------------------------------------------------------------------------*/
function div_search_btn_searchUser_onclick(obj:Button,  e:ClickEventInfo)
{
	
	if(gfn_isNull(div_search.edt_sellCoCd.value)){
		gfn_message("A","DMS00002","E","","판매처"); 
        div_search.edt_sellCoCd.setFocus();
        return false;
	}
	
	var sParam01 = div_search.edt_user_no.value;
	var sParam02 = div_search.edt_usernm.value;
	var sParam03 = "";
	var sParam04 = "";
	var sParam05 = div_search.edt_sellCoCd.value;
	if ( e == null ) {
		sParam03 = "key";
	} else {
		sParam03 = "button";
	}
	var arrArgs = {argAutoSelect:true, argCallProgram:"FEP021M", argParam01:sParam01, argParam02:sParam02, argParam03:sParam03, argParam04:sParam04, argParam05:sParam05};
	var sRtnVal = gfn_dialog("FSC011P", arrArgs);

	if ( gfn_isNull(sRtnVal) || sRtnVal == "cancel" ) {
		//취소시 값 제거
		div_search.edt_user_no.value = null;
		div_search.edt_usernm.value = null;
		
	} else {	//Object이용시
		
		div_search.edt_user_no.value = sRtnVal["value1"];
		div_search.edt_usernm.value = sRtnVal["value2"];
		
	}
}

/*----------------------------------------------------------------------------------------------
 * 설명   : reset
-----------------------------------------------------------------------------------------------*/
function div_btn_reset_onclick(obj:Button,  e:ClickEventInfo)
{
	switch(obj.name) 
	{	
		case "btn_resetAgnOrg" : //대리점리셋
			div_search.edt_agnOrgCd.value = null;
			div_search.edt_agnOrgNm.value = null;
			div_search.edt_affilAgn.value = null;
		break;
		
		case "btn_resetSell" : 	//판매처리셋
			div_search.edt_sellCoCd.value = null;
			div_search.edt_sellCoNm.value = null;
		break;
		
		case "btn_resetPlc" : 	//매출처처리셋
			div_detail.edt_salePlc.value = null;
			div_detail.edt_salePlcNm.value = null;
		break;
		
		case "btn_resetUser" : 	//사용자처리셋
			div_search.edt_user_no.value = null;
			div_search.edt_usernm.value = null;
		break;
		
	}
}

/*----------------------------------------------------------------------------------------------
 * 설명   : 파일 추가
-----------------------------------------------------------------------------------------------*/
function div_detail_btn_addFile_onclick(obj:Button,  e:ClickEventInfo)
{
	var objRtnDs = gfn_getFileInfo(true);
	               
	if ( !gfn_isNull(objRtnDs) ) {	//Dataset사용시
		for(var i=0; i<objRtnDs.rowcount; i++){
			var nRow = ds_upList.addRow();
			ds_upList.setColumn(nRow,"fullpath",objRtnDs.getColumn(i,"fullpath"));
			ds_upList.setColumn(nRow,"FILE_NM",objRtnDs.getColumn(i,"filename"));
			ds_upList.setColumn(nRow,"FILE_TYP_VAL",objRtnDs.getColumn(i,"filetype"));
			ds_upList.setColumn(nRow,"FILE_SIZE",objRtnDs.getColumn(i,"filesize"));
		}
	}
}

/*----------------------------------------------------------------------------------------------
 * 설명   : 파일 삭제
-----------------------------------------------------------------------------------------------*/
function div_detail_btn_deleteFile_onclick(obj:Button,  e:ClickEventInfo)
{
	ds_upList.deleteRow(ds_upList.rowposition);
}

/*----------------------------------------------------------------------------------------------
 * 설명   : 파일 다운로드
-----------------------------------------------------------------------------------------------*/
function div_detail_btn_fileDownload_onclick(obj:Button,  e:ClickEventInfo)
{
	//var nRow = ds_upList.rowposition;
	
	for(var i=0; i<ds_upList.getRowCount(); i++){
		if(!gfn_isNull(ds_upList.getColumn(i,"FILE_ID"))) {
			if(gfn_fileDownload(ds_upList.getColumn(i,"FILE_ID"), ds_upList.getColumn(i,"FILE_NM"))) {
				gfn_message("A","DMS00074");	//파일이 정상적으로 다운로드 되었습니다.
			} else {
				gfn_message("A","DMS00075");	//파일다운이 실패하였습니다.
			}
		}
	}
}

/*----------------------------------------------------------------------------------------------
 * 설명   : 인수증 출력
-----------------------------------------------------------------------------------------------*/
function btn_print_onclick(obj:Button,  e:ClickEventInfo)
{
	ds_print2.setColumn(0, "SALEPLC", ds_payment.getColumn(0,"SALEPLC"));
	ds_print2.setColumn(0, "SALEPLC_NM", ds_payment.getColumn(0,"SALEPLC_NM"));
	ds_print2.setColumn(0, "UKEY_AGN_CD", ds_payment.getColumn(0,"UKEY_AGN_CD"));

	//XML방식
 	var sReportTitle = "물품인수증";
 	var sReportUrl   = "/SALBBS00200.mrd";
 	var sDsList 	 = "ds_print1,ds_print2";
 	var sArgs 		 = "";
 	
	gfn_rdPrint(sReportTitle, sReportUrl, sDsList, sArgs, "false","","true", 30, "FX DocuCentre-III 3007 PCL 6", 1);
	
	if(!confirm( "출고 내역을 출력하시겠습니까?" )) return;
	
	btn_print2_onclick();
	
}

/*----------------------------------------------------------------------------------------------
 * 설명   : 출고내역 출력
-----------------------------------------------------------------------------------------------*/
function btn_print2_onclick(obj:Button,  e:ClickEventInfo)
{
	ds_print3.copyData(ds_main, true);
	
	//XML방식
 	var sReportTitle = "출고내역";
 	var sReportUrl   = "/SALBBS00210.mrd";
 	var sDsList 	 = "ds_print3,ds_print2";
 	var sArgs 		 = "";
 	
	gfn_rdPrint(sReportTitle, sReportUrl, sDsList, sArgs, "false","","true", 30, "FX DocuCentre-III 3007 PCL 6", 1);
	
}

/*----------------------------------------------------------------------------------------------
 * 설명   : 엑셀업로드
-----------------------------------------------------------------------------------------------*/
function btn_excel_upload_onclick(obj:Button,  e:ClickEventInfo)
{
	if(!fn_checkDefault()){
        return false;
    }
    
    var sRtnValDs = gfn_dialog("FEP044P");    
    ds_main.appendData(sRtnValDs,true);
    if(sRtnValDs != "cancel"){
		btn_delete.enable = true;
    }
}

/*===============================================================================================
 * [ PART 9 ] User Defined
================================================================================================*/

/*----------------------------------------------------------------------------------------------
 * 설명   : 저장 가능여부
-----------------------------------------------------------------------------------------------*/
function fn_validSavePosbility()
{
	//판매일마감 'Y'인 경우 수정불가
	if(ds_master.getColumn(0, "DCLS_YN") == "Y") {
		gfn_message("A","일마감완료된 건으로 수정 불가능합니다.");
		return false;
	}
	
	if(!gfn_isNull(pv_sDisable)){
		if(pv_sDisable == "01"){
			gfn_message("A","신용카드 정산 확정건으로 수정 불가능합니다.");
			return false;
		}else if(pv_sDisable == "02"){
			gfn_message("A","전표 발행건으로 수정 불가능합니다.");
			return false;
		}
	}
	return true;
}

/*----------------------------------------------------------------------------------------------
 * 설명   : 판매 추가시 유효성 검사 : 미정
-----------------------------------------------------------------------------------------------*/
/*
function fn_validProd(nRow)
{
	//  데이터 셋 값 변경 이벤트에서 이미 체크를 했을 경우 
	if(!gfn_isUpdated(ds_main)){ // 변경사항이 없을 경우 
		return false;
	}

	// 마스터 정보 유효성 검사 
	if(fn_checkDefault() == false) return false;
	
	// 그리드 정보 유효성 검사 
	var sProdCl     = ds_main.getColumn(nRow,"PROD_CL");
	var sSerNum     = ds_main.getColumn(nRow,"SER_NUM");
	var sSaleQty    = ds_main.getColumn(nRow,"SALE_QTY");
	var sSeq        = ds_main.getColumn(nRow,"GNRL_SALE_CHG_SEQ");
	var sMax        = ds_main.getColumn(nRow,"GNRL_SALE_CHG_SEQ");
	var sSaleQty    = ds_main.getColumn(nRow,"SALE_QTY");
	var sSaleUnitPrc= ds_main.getColumn(nRow,"SALE_UNIT_PRC");

	
	var sFields    = "PROD_CL,MFACT_ID,PROD_CD,COLOR_CD";
	var sFieldNms  = "상품구분,제조사,모델,색상";
	var sPosIndex  = "2,5,6,7";

	var arrFields    = Split(sFields  , ",");
	var arrFieldNm   = Split(sFieldNms, ",");	
	var arrPosIndex  = Split(sPosIndex, ",");	
	var nFields      = arrFields.length();
	
	for(var i=0; i<nFields; i++){
		var sValue = ds_list.GetColumn(nRow, arrFields[i]);

		if(uf_isNull(sValue) == true){	// MSG_00083 : 반드시 입력해야 합니다.
			alert(cf_getMessage(MSG_00083, arrFieldNm[i]));
			grd_list_OnCellClick(grd_list,nRow);
			grd_list.SetFocus();
			grd_list.SetCellPos(arrPosIndex[i]);
			return false;
		}
	}
	
	if (!gfn_getValidateCompList(grd_main)) {	
		return false;
	}
	
	// 일련번호 유효성 체크
	if(fn_searchSaleDtlTypChk() == false) return false;

	// 중복등록 상품 체크
	if(fn_chkDupDisItem(nRow) == true) return false;

	// 재고상품조회
	//if(f_validModedProd(nRow) == false) return false;
	
	return true;
}
*/

/*----------------------------------------------------------------------------------------------
 * 설명   : 일련번호 유효성 체크 : 미정
-----------------------------------------------------------------------------------------------*/
/*
function fn_searchSaleDtlTypChk()
{
	var nRow    = ds_main.rowposition;
	var prodCl  = ds_main.getColumn(nRow,"PROD_CL");
	var serNum  = ds_main.getColumn(nRow,"PROD_SER_NO");

	if(prodCl == "1" || prodCl == "2"){	// 상품구분에 따라 
		if(gfn_isNull(serNum)){
			alert("일련번호");
			grd_main.setFocus();
			grd_main.setCellPos(3);
			return false;				
		}
	}
	return true;
}
*/

/*----------------------------------------------------------------------------------------------
 * 설명   : 중복등록 상품 체크 : 미정
-----------------------------------------------------------------------------------------------*/
/*
function fn_chkDupDisItem(nRow)
{
	var nRows    = ds_main.getRowCount();
	var sProdCl  = ds_main.getColumn(nRow, "PROD_CL");
	var sSerNum  = ds_main.getColumn(nRow, "PROD_SER_NO");
	var sMdlCd   = ds_main.getColumn(nRow, "EQP_MDL_CD");
	var sColorCd = ds_main.getColumn(nRow, "EQP_COLOR_CD");

	for(var i=0; i < nRows; i++){
		var sSeq     = ds_main.getColumn(i, "GNRL_SELL_CHG_SEQ");
		var sMax     = ds_main.getColumn(i, "GNRL_SELL_CHG_SEQ");	
		// 비교대상항목은 제외
		if(nRow == i)    continue;
		if(sMax != sSeq) continue;
		
		var sDsSerNum  = ds_main.getColumn(i, "PROD_SER_NO");
		var sDsMdlCd   = ds_main.getColumn(i, "EQP_MDL_CD");
		var sDsColorCd = ds_main.getColumn(i, "EQP_COLOR_CD");
		
		if(sProdCl == "1" || sProdCl == "2"){
			if( sSerNum == sDsSerNum 
				&& sMdlCd == sDsMdlCd
				&& sColorCd == sDsColorCd)
			{
				alert("중복된 상품입니다.");
				grd_main.setFocus();
				grd_main.setCellPos(2);				
				return true;
			}
		}
	}

	return false;
}
*/

/*----------------------------------------------------------------------------------------------
 * 설명   : 수납정보 초기화
-----------------------------------------------------------------------------------------------*/
function fn_initPayment()
{
	div_detail.edt_sellPrcCashRecvAmt.value     = "0";
	div_detail.edt_sellPrcCcardRecvAmt1.value   = "0";
	//div_detail.edt_sellPrcCcardRecvAmt2.value   = "0";
	ds_payment.applyChange();
}

/*----------------------------------------------------------------------------------------------
 * 설명   : 디폴트 날짜 셋팅
-----------------------------------------------------------------------------------------------*/
function fn_getDate(objString)
{
	var result = "";
	
	var dt = eval("div_search.cal_"+objString+"_dt").value;
	var hh = eval("div_search.edt_"+objString+"_dt_hh").value;	
	var mm = eval("div_search.edt_"+objString+"_dt_mm").value;
	if(!gfn_isNull(dt)){
		result = dt + hh + mm + "00";
	}
	
    return result;
}

/*----------------------------------------------------------------------------------------------
 * 설명   : 필수항목 체크
-----------------------------------------------------------------------------------------------*/
function fn_checkDefault()
{   
	var sellDtm = fn_getDate("sell");
	var sellChgDtm = fn_getDate("chg");
	
	if(gfn_isNull(sellDtm)){
		gfn_message("A","DMS00002","E","","판매일자"); 
		div_search.cal_chg_dt.setFocus();
		return false;	
	}
	
	if(!gfn_isDateTime(sellDtm)){
		gfn_message("A","판매일자 입력 오류입니다. 입력 정보를 확인 하십시오.");
		return false;
	}
		
	if ((gfn_diffDate(sellDtm.substr(0,10), gfn_today())) <= -1 ) {
		gfn_message("A","현재일자 이전 날짜만 입력이 가능합니다.");
		div_search.cal_sell_dt.setFocus();
		return false;
	}	
	
	if(pv_job == "update"){
	
		if(gfn_isNull(sellChgDtm)){
			gfn_message("A","DMS00002","E","","변경일자"); 
			div_search.cal_chg_dt.setFocus();
			return false;	
		}
		
		if(!gfn_isDateTime(sellChgDtm)){
			gfn_message("A","변경일자 입력 오류입니다. 입력 정보를 확인 하십시오.");
			return false;
		}
			
		if ((gfn_diffDate(sellChgDtm.substr(0,10), gfn_today())) <= -1 ) {
			gfn_message("A","현재일자 이전 날짜만 입력이 가능합니다.");
			div_search.cal_chg_dt.setFocus();
			return false;
		}
		
		if ((gfn_diffDate(sellDtm.substr(0,10), sellChgDtm.substr(0,10))) <= -1 ) {
			gfn_message("A","판매일자 이후 날짜만 입력이 가능합니다.");
			div_search.cal_chg_dt.setFocus();
			return false;
		}
		
	}
	
	if(gfn_isNull(div_search.edt_affilAgn.value)){
		gfn_message("A","DMS00002","E","","대리점"); 
        div_search.edt_agnOrgCd.setFocus();
        return false;
	}
	
	if(gfn_isNull(div_search.edt_sellCoCd.value)){
		gfn_message("A","DMS00002","E","","판매처"); 
        div_search.edt_sellCoCd.setFocus();
        return false;
	}
	
	if(gfn_isNull(div_search.edt_user_no.value)){
		gfn_message("A","DMS00002","E","","판매담당자"); 
        div_search.edt_user_no.setFocus();
        return false;
	}
   
    return true;
}

/*----------------------------------------------------------------------------------------------
 * 설명   : 저장시 수납정보 유효성 검사
-----------------------------------------------------------------------------------------------*/
function fn_validPayment()
{
	var sCashPayAmt     = div_detail.edt_sellPrcCashRecvAmt.value;
	var sCrdtCrdPayAmt1 = div_detail.edt_sellPrcCcardRecvAmt1.value;
	//var sCrdtCrdPayAmt2 = div_detail.edt_sellPrcCcardRecvAmt2.value;
	
	var nCashPayAmt     = sCashPayAmt == "" ? 0 : parseInt(sCashPayAmt);
	var nCrdtCrdPayAmt1 = sCrdtCrdPayAmt1 == "" ? 0 : parseInt(sCrdtCrdPayAmt1);
	//var nCrdtCrdPayAmt2 = sCrdtCrdPayAmt2 == "" ? 0 : parseInt(sCrdtCrdPayAmt2);
	var nSaleTotalAmt   = fn_getSaleTotal();
	
	// 신용카드1 입력하고 금액1 입력 안했을 경우
	if(!gfn_isNull(div_detail.cbo_sellPrcCcardCo1.value) && !gfn_isNull(sCrdtCrdPayAmt1) && sCrdtCrdPayAmt1 == "0"){
		gfn_message("A","DMS00002","E","","신용카드1 금액");  //필수입력항목 {0}이/가 누락되었습니다.
		div_detail.edt_sellPrcCcardRecvAmt1.setFocus();
		return false;	
	}
	
	// 신용카드1 입력 안하고 금액1 입력 했을 경우
	if(gfn_isNull(div_detail.cbo_sellPrcCcardCo1.value) && !gfn_isNull(sCrdtCrdPayAmt1) && sCrdtCrdPayAmt1 != "0"){
		gfn_message("A","DMS00002","E","","신용카드사1");  //필수입력항목 {0}이/가 누락되었습니다.
		div_detail.cbo_sellPrcCcardCo1.setFocus();
		return false;
	}
	
	/*
	// 신용카드2 입력하고 금액2 입력 안했을 경우
	if(!gfn_isNull(div_detail.cbo_sellPrcCcardCo2.value) && !gfn_isNull(sCrdtCrdPayAmt2) && sCrdtCrdPayAmt2 == "0"){
		gfn_message("A","DMS00002","E","","신용카드2 금액");  //필수입력항목 {0}이/가 누락되었습니다.
		div_detail.edt_sellPrcCcardRecvAmt2.setFocus();
		return false;	
	}
	
	// 신용카드2 입력 안하고 금액2 입력 했을 경우
	if(gfn_isNull(div_detail.cbo_sellPrcCcardCo2.value) && !gfn_isNull(sCrdtCrdPayAmt2) && sCrdtCrdPayAmt2 != "0"){
		gfn_message("A","DMS00002","E","","신용카드사2");  //필수입력항목 {0}이/가 누락되었습니다.
		div_detail.cbo_sellPrcCcardCo2.setFocus();
		return false;
	}
	*/
	
	if(nSaleTotalAmt != (nCashPayAmt + nCrdtCrdPayAmt1)){
		gfn_message("A","판매가 총합계와 수납금액이 일치하지 않습니다.");
		return false;
	}
	
	return true;
}

/*----------------------------------------------------------------------------------------------
 * 설명   : 총 판매금액
-----------------------------------------------------------------------------------------------*/
function fn_getSaleTotal()
{
	var sSaleTotalAmt   = grd_main.getCellText(-2, 16);
	var nSaleTotalAmt   = Number(sSaleTotalAmt.replace(",",""));
	
	var sSaleDisAmt     = grd_main.getCellText(-2, 11);
	var nSaleDisAmt     = Number(sSaleDisAmt.replace(",",""));
	
	var sSaleCmmsAmt   	= grd_main.getCellText(-2, 12);
	var nSaleCmmsAmt   	= Number(sSaleCmmsAmt.replace(",",""));
	
	var sSaleMarmt   	= grd_main.getCellText(-2, 13);
	var nSaleMarmt   	= Number(sSaleMarmt.replace(",",""));
		
	var sSaleVatAmt   	= grd_main.getCellText(-2, 15);
	var nSaleVatAmt   	= Number(sSaleVatAmt.replace(",",""));

	if(pv_job == "new"){
		ds_payment.setColumn(0, "CHG_INVE_AMT", nSaleDisAmt);
		ds_payment.setColumn(0, "CHG_CMMS_AMT", nSaleCmmsAmt);
		ds_payment.setColumn(0, "CHG_MRGN_AMT", nSaleMarmt);
		ds_payment.setColumn(0, "CHG_SURTAX_AMT", nSaleVatAmt);
		ds_payment.setColumn(0, "CHG_SELL_AMT", nSaleTotalAmt);
	}
	
	return nSaleTotalAmt;
}

/*----------------------------------------------------------------------------------------------
 * 설명   : enable (true, false)
-----------------------------------------------------------------------------------------------*/
function fn_enable(objString, bEnable)
{
	var arrObject = objString.split(",");
	
	for(var i=0; i<arrObject.length; i++){
		var oObject = eval(arrObject[i]);
		oObject.enable = bEnable;
	}
}

/*----------------------------------------------------------------------------------------------
 * 설명   : fn_nextLoop
-----------------------------------------------------------------------------------------------*/
function fn_nextLoop()
{
	if ( total_record_cnt <=  page * page_size ) {
		page_size = 10000;
	} else {
		//다음페이지 조회
		page++;
		ds_mainTmp.clearData();
		fn_searchDtl();
	} 
}
]]></Script>
  </Form>
</FDL>
