<?xml version="1.0" encoding="utf-8"?>
<FDL version="1.5">
  <TypeDefinition url="..\default_typedef.xml"/>
  <Form id="FPASaleRgstM" classname="B2BSaleRgstM" inheritanceid="" position="absolute 0 0 1038 592" titletext="FPA상품판매등록" style="font:arial,11;" onload="Form_onload" class="frm_bg_popup">
    <Layouts>
      <Layout>
        <Div id="div_search" anchor="left top right" taborder="1" class="bg_detail" position="absolute 22 49 1014 113">
          <Layouts>
            <Layout>
              <Calendar id="cal_sell_dt" taborder="0" dateformat="yyyy-MM-dd" position="absolute 87 9 182 29" anchor="default"/>
              <Static id="Static00" text="w&#13;&#10;&#13;&#10;10" class="tip_guide" visible="false" position2="absolute l:338 w:10 t:10 h:42" positiontype="position2"/>
              <Edit id="edt_sell_dt_hh" taborder="1" inputtype="digit,alpha" maxlength="2" onkeydown="div_Search_onkeydown" class="Code" position="absolute 183 9 211 29" tooltiptext="판매시" anchor="default"/>
              <Static id="Static02" text="w&#13;&#10;30" class="tip_guide" visible="false" position2="absolute l:240 w:30 t:10 h:41" positiontype="position2"/>
              <Static id="Static17" text="v4" class="guideTip" visible="false" position2="absolute l:86 w:926 t:29 h:4" positiontype="position2"/>
              <Static id="Static03" text="w&#13;&#10;30" class="tip_guide" visible="false" position2="absolute l:594 w:30 t:9 h:41" positiontype="position2"/>
              <Calendar id="cal_chg_dt" taborder="8" dateformat="yyyy-MM-dd" position="absolute 87 33 182 53" anchor="default"/>
              <Static id="sta_hpNo00" text="변경일자" class="sta_WFDA_detail_Label_P" position="absolute 20 33 81 53" tooltiptype="hover" anchor="default"/>
              <Edit id="edt_sell_dt_mm" taborder="2" inputtype="digit,alpha" maxlength="2" onkeydown="div_Search_onkeydown" class="Code" position="absolute 212 9 240 29" tooltiptext="판매분" anchor="default"/>
              <Edit id="edt_chg_dt_hh" taborder="9" inputtype="digit,alpha" maxlength="2" onkeydown="div_Search_onkeydown" class="Code" position="absolute 183 33 211 53" tooltiptext="변경시" anchor="default"/>
              <Edit id="edt_chg_dt_mm" taborder="10" inputtype="digit,alpha" maxlength="2" onkeydown="div_Search_onkeydown" class="Code" position="absolute 212 33 240 53" tooltiptext="변경분" anchor="default"/>
              <Static id="sta_hpNo01" text="판매일자" class="sta_WFDA_detail_Label_P" position="absolute 20 9 81 29" tooltiptype="hover" anchor="default"/>
              <Static id="sta_hpNo02" text="판매담당자" class="sta_WFDA_detail_Label_P" position="absolute 269 9 346 29" tooltiptype="hover" anchor="default"/>
              <Static id="Static01" text="w&#13;&#10;&#13;&#10;10" class="tip_guide" visible="false" position2="absolute l:77 w:10 t:10 h:42" positiontype="position2"/>
              <Static id="Static04" text="w&#13;&#10;&#13;&#10;10" class="tip_guide" visible="false" position2="absolute l:681 w:10 t:10 h:42" positiontype="position2"/>
              <Edit id="edt_user_no" taborder="3" inputtype="digit,alpha" maxlength="10" class="Code" position="absolute 348 9 418 29" tooltiptext="판매담당자코드" onkeydown="div_search_edt_user_no_onkeydown"/>
              <Edit id="edt_usernm" taborder="4" imemode="hangul" maxlength="50" position="absolute 419 9 552 29" tooltiptext="판매담당자명" onkeydown="div_search_edt_user_no_onkeydown"/>
              <Button id="btn_searchUser" taborder="5" class="btn_WFSA_search" position="absolute 553 9 573 29" tooltiptype="hover" tooltiptext="사용자검색" userdata="GRP1:INQ_AUTR_YN" onclick="div_search_btn_searchUser_onclick"/>
              <Button id="btn_resetUser" taborder="6" onclick="div_btn_reset_onclick" class="btn_WFSA_reset" position="absolute 574 9 594 29" tooltiptext="초기화"/>
              <Static id="Static05" text="v4" class="guideTip" visible="false" position2="absolute l:94 w:926 t:325 h:4" positiontype="position2"/>
              <Static id="stc_01" text="판매구분" class="sta_WFDA_detail_Label" position="absolute 624 33 697 53" style="background:transparent URL('theme://Img/img_star.png') left top;"/>
              <Combo id="cbo_sellClCd" taborder="15" autoselect="true" innerdataset="@ds_DMS250" codecolumn="CM_CD_ID" datacolumn="CM_CD_NM" position="absolute 691 33 811 53" onitemchanged="div_search_cbo_sellClCd_onitemchanged" tooltiptext="판매구분"/>
              <Static id="stc_07" text="매출처" class="sta_WFDA_detail_Label" position="absolute 269 34 318 54" style="background:transparent URL('theme://Img/img_star.png') left top;"/>
              <Edit id="edt_salePlc" taborder="11" inputtype="digit,alpha" maxlength="10" onkeydown="div_search_edt_salePlc_onkeydown" class="Code" position="absolute 348 33 418 53" tooltiptext="매출처코드"/>
              <Edit id="edt_salePlcNm" taborder="12" maxlength="50" onkeydown="div_search_edt_salePlc_onkeydown" position="absolute 419 33 552 53" tooltiptext="매출처명"/>
              <Button id="btn_searchPlc" taborder="13" onclick="div_search_btn_searchPlc_onclick" class="btn_WFSA_search" position="absolute 553 33 573 53" tooltiptype="hover" tooltiptext="매출처 검색" userdata="GRP1:INQ_AUTR_YN"/>
              <Button id="btn_resetPlc" taborder="14" onclick="div_btn_reset_onclick" class="btn_WFSA_reset" position="absolute 574 33 594 53" tooltiptext="초기화"/>
              <CheckBox id="chk_mqYn" taborder="7" text="MQ 판매" value="N" truevalue="Y" position="absolute 624 8 768 28" falsevalue="N" onclick="div_search_chk_mqYn_onclick"/>
            </Layout>
          </Layouts>
          <InitValue>
            <Combo id="cbo_sellClCd" index="0"/>
          </InitValue>
        </Div>
        <Static id="Static00" text="h10" class="tip_guide" visible="false" position2="absolute l:132 w:42 t:49 h:10" positiontype="position2"/>
        <Static id="Static14" text="h10" class="tip_guide" visible="false" position2="absolute l:107 w:869 t:103 h:10" positiontype="position2"/>
        <Button id="btn_excel" taborder="6" class="btn_common_excel" position="absolute 992 122 1014 142" anchor="top right" tooltiptext="액셀출력" onclick="btn_excel_onclick"/>
        <Static id="Static03" text="h33" class="tip_guide" visible="false" position2="absolute l:169 w:42 t:113 h:33" positiontype="position2"/>
        <Static id="Static02" text="h14" class="tip_guide" visible="false" position2="absolute l:28 w:42 t:113 h:14" positiontype="position2"/>
        <Static id="Static07" text="h8" class="tip_guide" visible="false" position2="absolute l:28 w:42 t:138 h:8" positiontype="position2"/>
        <UserGrid id="grd_main" taborder="7" binddataset="ds_main" useinputpanel="false" autofittype="none" hideendline="col" position="absolute 22 145 1014 345" anchor="all" class="grd_subGrid" _number="false">
          <Formats>
            <Format id="default">
              <Columns>
                <Column size="50"/>
                <Column size="63"/>
                <Column size="103"/>
                <Column size="112"/>
                <Column size="119"/>
                <Column size="130"/>
                <Column size="98"/>
                <Column size="98"/>
                <Column size="80"/>
                <Column size="80"/>
                <Column size="101"/>
                <Column size="80"/>
                <Column size="100"/>
                <Column size="100"/>
              </Columns>
              <Rows>
                <Row size="24" band="head"/>
                <Row size="24" band="head"/>
                <Row size="24"/>
                <Row size="24" band="summ"/>
              </Rows>
              <Band id="head">
                <Cell rowspan="2" text="구분" taborder="undefined"/>
                <Cell col="1" rowspan="2" text="상품구분" taborder="undefined"/>
                <Cell col="2" rowspan="2" text="상품일련번호" taborder="undefined"/>
                <Cell col="3" rowspan="2" text="일련번호" taborder="undefined"/>
                <Cell col="4" rowspan="2" text="제조사" taborder="undefined"/>
                <Cell col="5" rowspan="2" text="모델" taborder="undefined"/>
                <Cell col="6" rowspan="2" text="색상" taborder="undefined"/>
                <Cell col="7" rowspan="2" text="접수번호" taborder="undefined"/>
                <Cell col="8" rowspan="2" text="판매수량" taborder="undefined"/>
                <Cell col="9" rowspan="2" text="매입원가" taborder="undefined"/>
                <Cell col="10" rowspan="2" text="공급가액" taborder="undefined"/>
                <Cell col="11" rowspan="2" text="부가세" taborder="undefined"/>
                <Cell col="12" rowspan="2" text="판매가(VAT포함)" taborder="undefined"/>
                <Cell col="13" rowspan="2" text="환율금액" taborder="undefined"/>
              </Band>
              <Band id="body">
                <Cell displaytype="combo" text="bind:SELL_CHG_HST_CL" combodataset="ds_DMS196" combocodecol="CM_CD_ID" combodatacol="CM_CD_NM"/>
                <Cell col="1" displaytype="combo" text="bind:PROD_CL" combodataset="ds_DMS160" combocodecol="CM_CD_ID" combodatacol="CM_CD_NM" validate="title:상품구분,required:true"/>
                <Cell col="2" displaytype="text" class="alignLeft" text="bind:PROD_SER_NO"/>
                <Cell col="3" displaytype="text" class="alignLeft" text="bind:EQP_SER_NO"/>
                <Cell col="4" displaytype="combo" class="alignLeft" text="bind:MFACT_CD" combodataset="ds_DMS101" combocodecol="CM_CD_ID" combodatacol="CM_CD_NM" validate="title:제조사,required:true"/>
                <Cell col="5" displaytype="text" class="alignLeft" text="bind:EQP_MDL_NM" validate="title:모델,required:true"/>
                <Cell col="6" displaytype="combo" class="alignLeft" text="bind:EQP_COLOR_CD" combodataset="ds_DMS100" combocodecol="CM_CD_ID" combodatacol="CM_CD_NM" validate="title:색상,required:true"/>
                <Cell col="7" displaytype="normal" class="alignLeft" text="bind:CNSL_MGMT_NO"/>
                <Cell col="8" displaytype="number" class="alignRight" text="bind:SALE_QTY"/>
                <Cell col="9" displaytype="number" class="alignRight" text="bind:SELL_PCOST"/>
                <Cell col="10" displaytype="number" edittype="none" class="alignRight" text="expr:Math.round(SELL_UPRC,3)" mask="###,###.####"/>
                <Cell col="11" displaytype="number" class="alignRight" text="expr:Math.round(SURTAX,3)" mask="###,###.####"/>
                <Cell col="12" displaytype="number" class="alignRight" text="expr:Math.round(SELL_AMT,3)" mask="###,###.####"/>
                <Cell col="13" displaytype="number" edittype="masknumber" class="alignRight" text="bind:XRATE_APPLY_AMT" mask="###,###.####"/>
              </Band>
              <Band id="summary">
                <Cell displaytype="number" class="alignRight"/>
                <Cell col="1" displaytype="number" class="alignRight"/>
                <Cell col="2" displaytype="number" class="alignRight"/>
                <Cell col="3" displaytype="number" class="alignRight"/>
                <Cell col="4" displaytype="number" class="alignRight"/>
                <Cell col="5" displaytype="number" class="alignRight"/>
                <Cell col="6" displaytype="number" class="alignRight"/>
                <Cell col="7" displaytype="normal" class="alignRight" text="합계"/>
                <Cell col="8" displaytype="number" class="alignRight" text="expr: getSum(&quot;parseInt(SALE_QTY)&quot;)"/>
                <Cell col="9" displaytype="number" class="alignRight" text="expr: getSum(&quot;Number(SELL_PCOST)&quot;)"/>
                <Cell col="10" displaytype="number" class="alignRight"/>
                <Cell col="11" displaytype="number" class="alignRight" text="expr: Math.round(getSum(&quot;Number(SURTAX)&quot;))"/>
                <Cell col="12" displaytype="number" class="alignRight" text="expr: Math.round(getSum(&quot;Number(SELL_AMT)&quot;))"/>
                <Cell col="13" displaytype="number" class="alignRight" text="expr: Math.round(getSum(&quot;Number(XRATE_APPLY_AMT)&quot;),3)"/>
              </Band>
            </Format>
          </Formats>
        </UserGrid>
        <Button id="btn_prod_select" taborder="3" text="재고선택" class="btn_common" position="absolute 789 122 858 142" anchor="top right" tooltiptext="재고선택" onclick="btn_prod_select_onclick"/>
        <Div id="div_detail" anchor="left right bottom" taborder="8" class="bg_detail" position="absolute 22 378 1014 537">
          <Layouts>
            <Layout>
              <Static id="stc_11" text="금액" class="sta_WFDA_detail_Label" position="absolute 10 9 51 29" anchor="default"/>
              <Static id="Static02" text="W10" class="guideTip" visible="false" position2="absolute l:42 w:10 t:6 h:83" positiontype="position2"/>
              <Static id="stc_00" text="비고" class="sta_WFDA_detail_Label" position="absolute 9 57 50 77" anchor="default"/>
              <Static id="stc_02" text="첨부파일" class="sta_WFDA_detail_Label" position="absolute 485 57 566 77" anchor="default"/>
              <MaskEdit id="edt_sellAmt" taborder="0" mask="###,###,####.####" position="absolute 52 9 164 29" anchor="default" displaynulltext="0"/>
              <Static id="stc_17" text="원" class="sta_WF_Unit" position="absolute 168 9 188 29" anchor="default"/>
              <Static id="Static00" text="W20" class="guideTip" visible="false" position2="absolute l:996 w:20 t:2 h:107" positiontype="position2"/>
              <Static id="Static01" text="W30" class="guideTip" visible="false" position2="absolute l:178 w:30 t:5 h:51" positiontype="position2"/>
              <Static id="Static09" text="h10" class="tip_guide" visible="false" position2="absolute l:612 w:42 t:365 h:10" positiontype="position2"/>
              <Static id="Static10" text="h10" class="tip_guide" visible="false" position2="absolute l:612 w:42 t:467 h:10" positiontype="position2"/>
              <Static id="Static16" text="w20" class="guideTip" visible="false" position2="absolute l:481 w:20 t:368 h:107" positiontype="position2"/>
              <Static id="Static03" text="W10" class="guideTip" visible="false" position2="absolute l:461 w:10 t:9 h:43" positiontype="position2"/>
              <Static id="Static04" text="W5" class="guideTip" visible="false" position2="absolute l:164 w:5 t:12 h:19" positiontype="position2"/>
              <Static id="Static06" text="W10" class="guideTip" visible="false" position2="absolute l:278 w:10 t:9 h:58" positiontype="position2"/>
              <TextArea id="txa_rmk" taborder="7" scrollbars="none" imemode="hangul" wordwrap="word" oneditclick="Div01_TextArea00_oneditclick" position="absolute 20 79 442 148" anchor="all" validate="title:내용,required:true,maxlengthB:4000"/>
              <UserGrid id="grd_upList" taborder="8" binddataset="ds_upList" autoenter="select" useinputpanel="false" cellsizingtype="col" cellmovingtype="col" hideendline="col" position="absolute 496 79 970 148" anchor="left top" _number="true" _status="false" _check="false" _checkColumnName="_checkcol" _checkedallevent="false" _nodataimage="true" _sort="false" _tooltip="true" class="grd_subGrid">
                <Formats>
                  <Format id="default">
                    <Columns>
                      <Column size="275"/>
                      <Column size="70"/>
                    </Columns>
                    <Rows>
                      <Row size="24" band="head"/>
                      <Row size="24"/>
                    </Rows>
                    <Band id="head">
                      <Cell text="파일명"/>
                      <Cell col="1" text="크기"/>
                    </Band>
                    <Band id="body">
                      <Cell text="bind:FILE_NM"/>
                      <Cell col="1" text="bind:FILE_SIZE"/>
                    </Band>
                  </Format>
                </Formats>
              </UserGrid>
              <Button id="btn_fileDownload" taborder="4" text="파일전체다운로드" position="absolute 751 56 868 76" onclick="div_detail_btn_fileDownload_onclick" anchor="default" class="btn_common" tooltiptext="전체다운로드"/>
              <Button id="btn_deleteFile" taborder="6" text="삭제" position="absolute 920 56 970 76" tooltiptext="파일삭제" onclick="div_detail_btn_deleteFile_onclick" anchor="default" class="btn_common_delTxt"/>
              <Button id="btn_addFile" taborder="5" text="추가" position="absolute 869 56 919 76" tooltiptext="파일추가" onclick="div_detail_btn_addFile_onclick" anchor="default" class="btn_common_addTxt"/>
              <Static id="Static17" text="v4" class="guideTip" visible="false" position2="absolute l:14 w:966 t:53 h:4" positiontype="position2"/>
              <Calendar id="cal_xrateApplyDt" taborder="1" dateformat="yyyy-MM-dd" position="absolute 288 9 383 29" visible="false"/>
              <Static id="stc_xrateApplyDt" text="invoice날짜" class="sta_WFDA_detail_Label" position="absolute 198 9 284 29" visible="false"/>
              <Static id="stc_xrateApplyAmt" text="환율금액" class="sta_WFDA_detail_Label" position="absolute 563 9 628 29" visible="false"/>
              <MaskEdit id="edt_xrateApplyAmt" taborder="3" displaynulltext="0" mask="###,###.####.####" position="absolute 629 9 741 29" visible="false"/>
              <Static id="stc_curClCd" text="화폐구분" class="sta_WFDA_detail_Label" position="absolute 404 9 469 29" visible="false"/>
              <Combo id="cbo_curClCd" taborder="2" autoselect="true" innerdataset="@ds_DMS262" codecolumn="CM_CD_ID" datacolumn="CM_CD_NM" onkeydown="div_Search_mbr_onkeydown" position="absolute 471 9 543 29" visible="false"/>
              <Static id="Static05" text="W10" class="guideTip" visible="false" position2="absolute l:619 w:10 t:5 h:35" positiontype="position2"/>
            </Layout>
          </Layouts>
          <InitValue>
            <Combo id="cbo_curClCd" index="0"/>
          </InitValue>
        </Div>
        <Static id="Static16" text="w20" class="guideTip" visible="false" position2="absolute l:23 w:20 t:382 h:107" positiontype="position2"/>
        <Static id="Static09" text="h10" class="tip_guide" visible="false" position2="absolute l:119 w:42 t:378 h:10" positiontype="position2"/>
        <Button id="btn_cancel" taborder="2" text="판매취소" class="btn_common" position="absolute 719 122 788 142" anchor="top right" tooltiptext="판매취소" onclick="btn_cancel_onclick"/>
        <Static id="Static24" text="판매등록" usedecorate="true" class="sub_title" position="absolute 22 123 175 143"/>
        <Static id="Static01" text="h14" class="tip_guide" visible="false" position2="absolute l:24 w:42 t:345 h:14" positiontype="position2"/>
        <Static id="Static27" text="수납정보-매출" usedecorate="true" class="sub_title" position="absolute 22 355 175 375" anchor="left bottom"/>
        <Static id="Static28" text="h8" class="tip_guide" visible="false" position2="absolute l:32 w:42 t:370 h:8" positiontype="position2"/>
        <Static id="Static04" text="h10" class="tip_guide" visible="false" position2="absolute l:147 w:42 t:527 h:10" positiontype="position2"/>
        <Button id="btn_delete" taborder="5" text="삭제" onclick="btn_delete_onclick" class="btn_common_delTxt" position="absolute 941 122 991 142" anchor="top right" tooltiptext="삭제"/>
        <Button id="btn_save" taborder="9" text="저장" class="btn_popup_save" position="absolute 461 547 516 567" anchor="top right" tooltiptext="저장" onclick="btn_save_onclick"/>
        <Button id="btn_excel_upload" taborder="4" text="Excel 업로드" class="btn_common" position="absolute 859 122 940 142" anchor="top right" tooltiptext="Excel업로드" onclick="btn_excel_upload_onclick"/>
        <Static id="Static26" text="w&#13;&#10;&#13;&#10;15" class="tip_guide" visible="false" position2="absolute l:7 w:15 t:10 h:558" positiontype="position2"/>
        <Static id="Static20" text="h10" class="tip_guide" visible="false" position2="absolute l:29 w:42 t:39 h:10" positiontype="position2"/>
        <Div id="Div01" taborder="0" text="FPA상품판매등록" class="popUp_title_bg" transparenthittest="true" position="absolute 21 12 575 40"/>
        <Static id="Static23" text="h10" class="tip_guide" visible="false" position2="absolute l:483 w:74 t:537 h:10" positiontype="position2"/>
        <Button id="btn_close" taborder="10" text="닫기" class="btn_popup_cancel" position="absolute 521 547 576 567" onclick="btn_close_onclick" tooltiptext="닫기"/>
        <Static id="Static29" text="h15" class="tip_guide" visible="false" position2="absolute l:487 w:42 t:567 h:15" positiontype="position2"/>
        <Static id="Static06" text="w&#13;&#10;&#13;&#10;15" class="tip_guide" visible="false" position2="absolute l:1014 w:15 t:10 h:646" positiontype="position2"/>
        <Static id="Static05" text="h33" class="tip_guide" visible="false" position2="absolute l:137 w:42 t:345 h:33" positiontype="position2"/>
        <Button id="btn_close2" taborder="11" onclick="btn_close_onclick" class="popUp_close" position="absolute 996 13 1014 31" anchor="top right"/>
        <Static id="Static08" text="w&#13;&#10;&#13;&#10;20" class="tip_guide" visible="false" position2="absolute l:23 w:20 t:58 h:42" positiontype="position2"/>
        <Static id="Static10" text="W30" class="guideTip" visible="false" position2="absolute l:406 w:30 t:376 h:59" positiontype="position2"/>
        <Static id="Static12" text="W20" class="guideTip" visible="false" position2="absolute l:993 w:20 t:397 h:115" positiontype="position2"/>
        <Static id="Static11" text="h8" class="tip_guide" visible="false" position2="absolute l:40 w:42 t:450 h:8" positiontype="position2"/>
        <Static id="Static13" text="W30" class="guideTip" visible="false" position2="absolute l:566 w:30 t:376 h:59" positiontype="position2"/>
      </Layout>
    </Layouts>
    <Objects>
      <Dataset id="ds_main" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="GNRL_SELL_NO" type="STRING" size="256"/>
          <Column id="GNRL_SELL_CHG_SEQ" type="STRING" size="256"/>
          <Column id="SELL_DTM" type="STRING" size="256"/>
          <Column id="SELL_CHG_HST_CL" type="STRING" size="256"/>
          <Column id="PROD_CL" type="STRING" size="256"/>
          <Column id="SELL_SEQ" type="STRING" size="256"/>
          <Column id="CNSL_MGMT_NO" type="STRING" size="256"/>
          <Column id="PROD_SER_NO" type="STRING" size="256"/>
          <Column id="EQP_MDL_CD" type="STRING" size="256"/>
          <Column id="EQP_SER_NO" type="STRING" size="256"/>
          <Column id="EQP_COLOR_CD" type="STRING" size="256"/>
          <Column id="SELL_UPRC" type="STRING" size="256"/>
          <Column id="SELL_PCOST" type="STRING" size="256"/>
          <Column id="SURTAX" type="STRING" size="256"/>
          <Column id="SELL_AMT" type="STRING" size="256"/>
          <Column id="XRATE_APPLY_AMT" type="STRING" size="256"/>
          <Column id="SALE_QTY" type="STRING" size="256"/>
          <Column id="EQP_MDL_NM" type="STRING" size="256"/>
          <Column id="MFACT_CD" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_master" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="GNRL_SELL_NO" type="STRING" size="256"/>
          <Column id="GNRL_SELL_CHG_SEQ" type="STRING" size="256"/>
          <Column id="SELL_DTM" type="STRING" size="256"/>
          <Column id="SELL_CHRGR_ID" type="STRING" size="256"/>
          <Column id="SELL_CHG_HST_CL" type="STRING" size="256"/>
          <Column id="SELL_CHG_DTM" type="STRING" size="256"/>
          <Column id="SELL_CHGR_ID" type="STRING" size="256"/>
          <Column id="RMK" type="STRING" size="256"/>
          <Column id="SALEPLC" type="STRING" size="256"/>
          <Column id="SALEPLC_NM" type="STRING" size="256"/>
          <Column id="ATFIL_ID" type="STRING" size="256"/>
          <Column id="SELL_CL_CD" type="STRING" size="256"/>
          <Column id="SELL_AMT" type="STRING" size="256"/>
          <Column id="CUR_CL_CD" type="STRING" size="256"/>
          <Column id="XRATE_APPLY_AMT" type="STRING" size="256"/>
          <Column id="XRATE_APPLY_DT" type="STRING" size="256"/>
          <Column id="MQ_YN" type="STRING" size="256"/>
          <Column id="XCL_SLIP_NO" type="STRING" size="256"/>
          <Column id="XCL_SLIP_ST" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows>
          <Row>
            <Col id="MQ_YN">N</Col>
          </Row>
        </Rows>
      </Dataset>
      <Dataset id="ds_search_dtl" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="GNRL_SELL_NO" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows>
          <Row/>
        </Rows>
      </Dataset>
      <Dataset id="ds_DMS160" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="CM_GRP_CD_ID" type="STRING" size="256"/>
          <Column id="CM_GRP_CD_NM" type="STRING" size="256"/>
          <Column id="CM_CD_ID" type="STRING" size="256"/>
          <Column id="CHG_DTM" type="STRING" size="256"/>
          <Column id="CM_CD_NM" type="STRING" size="256"/>
          <Column id="CM_CD_DESC" type="STRING" size="256"/>
          <Column id="CM_CD_SORT_ORD" type="STRING" size="256"/>
          <Column id="USE_YN" type="STRING" size="256"/>
          <Column id="SUP_CM_GRP_CD_ID" type="STRING" size="256"/>
          <Column id="SUP_CM_CD_ID" type="STRING" size="256"/>
          <Column id="MGMT_ITEM_CD1" type="STRING" size="256"/>
          <Column id="MGMT_ITEM_CD2" type="STRING" size="256"/>
          <Column id="MGMT_ITEM_CD3" type="STRING" size="256"/>
          <Column id="MGMT_ITEM_CD4" type="STRING" size="256"/>
          <Column id="MGMT_ITEM_CD5" type="STRING" size="256"/>
          <Column id="MGMT_ITEM_CD6" type="STRING" size="256"/>
          <Column id="MGMT_ITEM_CD7" type="STRING" size="256"/>
          <Column id="MGMT_ITEM_CD8" type="STRING" size="256"/>
          <Column id="MGMT_ITEM_CD9" type="STRING" size="256"/>
          <Column id="MGMT_ITEM_CD10" type="STRING" size="256"/>
          <Column id="FS_REG_USER_ID" type="STRING" size="256"/>
          <Column id="FS_REG_DTM" type="STRING" size="256"/>
          <Column id="LS_CHG_USER_ID" type="STRING" size="256"/>
          <Column id="LS_CHG_DTM" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_DMS100" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="CM_GRP_CD_ID" type="STRING" size="256"/>
          <Column id="CM_GRP_CD_NM" type="STRING" size="256"/>
          <Column id="CM_CD_ID" type="STRING" size="256"/>
          <Column id="CHG_DTM" type="STRING" size="256"/>
          <Column id="CM_CD_NM" type="STRING" size="256"/>
          <Column id="CM_CD_DESC" type="STRING" size="256"/>
          <Column id="CM_CD_SORT_ORD" type="STRING" size="256"/>
          <Column id="USE_YN" type="STRING" size="256"/>
          <Column id="SUP_CM_GRP_CD_ID" type="STRING" size="256"/>
          <Column id="SUP_CM_CD_ID" type="STRING" size="256"/>
          <Column id="MGMT_ITEM_CD1" type="STRING" size="256"/>
          <Column id="MGMT_ITEM_CD2" type="STRING" size="256"/>
          <Column id="MGMT_ITEM_CD3" type="STRING" size="256"/>
          <Column id="MGMT_ITEM_CD4" type="STRING" size="256"/>
          <Column id="MGMT_ITEM_CD5" type="STRING" size="256"/>
          <Column id="MGMT_ITEM_CD6" type="STRING" size="256"/>
          <Column id="MGMT_ITEM_CD7" type="STRING" size="256"/>
          <Column id="MGMT_ITEM_CD8" type="STRING" size="256"/>
          <Column id="MGMT_ITEM_CD9" type="STRING" size="256"/>
          <Column id="MGMT_ITEM_CD10" type="STRING" size="256"/>
          <Column id="FS_REG_USER_ID" type="STRING" size="256"/>
          <Column id="FS_REG_DTM" type="STRING" size="256"/>
          <Column id="LS_CHG_USER_ID" type="STRING" size="256"/>
          <Column id="LS_CHG_DTM" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_sellchrgrid" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="USER_NO" type="STRING" size="256"/>
          <Column id="USER_NM" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows>
          <Row/>
        </Rows>
      </Dataset>
      <Dataset id="ds_DMS101" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="CM_GRP_CD_ID" type="STRING" size="256"/>
          <Column id="CM_GRP_CD_NM" type="STRING" size="256"/>
          <Column id="CM_CD_ID" type="STRING" size="256"/>
          <Column id="CHG_DTM" type="STRING" size="256"/>
          <Column id="CM_CD_NM" type="STRING" size="256"/>
          <Column id="CM_CD_DESC" type="STRING" size="256"/>
          <Column id="CM_CD_SORT_ORD" type="STRING" size="256"/>
          <Column id="USE_YN" type="STRING" size="256"/>
          <Column id="SUP_CM_GRP_CD_ID" type="STRING" size="256"/>
          <Column id="SUP_CM_CD_ID" type="STRING" size="256"/>
          <Column id="MGMT_ITEM_CD1" type="STRING" size="256"/>
          <Column id="MGMT_ITEM_CD2" type="STRING" size="256"/>
          <Column id="MGMT_ITEM_CD3" type="STRING" size="256"/>
          <Column id="MGMT_ITEM_CD4" type="STRING" size="256"/>
          <Column id="MGMT_ITEM_CD5" type="STRING" size="256"/>
          <Column id="MGMT_ITEM_CD6" type="STRING" size="256"/>
          <Column id="MGMT_ITEM_CD7" type="STRING" size="256"/>
          <Column id="MGMT_ITEM_CD8" type="STRING" size="256"/>
          <Column id="MGMT_ITEM_CD9" type="STRING" size="256"/>
          <Column id="MGMT_ITEM_CD10" type="STRING" size="256"/>
          <Column id="FS_REG_USER_ID" type="STRING" size="256"/>
          <Column id="FS_REG_DTM" type="STRING" size="256"/>
          <Column id="LS_CHG_USER_ID" type="STRING" size="256"/>
          <Column id="LS_CHG_DTM" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_upList" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="fullpath" type="STRING" size="256"/>
          <Column id="UPLD_FILE_NO" type="STRING" size="256"/>
          <Column id="FILE_ID" type="STRING" size="256"/>
          <Column id="FILE_NM" type="STRING" size="256"/>
          <Column id="FILE_TYP_VAL" type="STRING" size="256"/>
          <Column id="FILE_SIZE" type="STRING" size="256"/>
          <Column id="FS_REG_USER_ID" type="STRING" size="256"/>
          <Column id="FS_REG_DTM" type="STRING" size="256"/>
          <Column id="LS_CHG_USER_ID" type="STRING" size="256"/>
          <Column id="LS_CHG_DTM" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_delList" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="GNRL_SELL_NO" type="STRING" size="256"/>
          <Column id="GNRL_SELL_CHG_SEQ" type="STRING" size="256"/>
          <Column id="SELL_DTM" type="STRING" size="256"/>
          <Column id="SELL_CHG_HST_CL" type="STRING" size="256"/>
          <Column id="PROD_CL" type="STRING" size="256"/>
          <Column id="SELL_SEQ" type="STRING" size="256"/>
          <Column id="CNSL_MGMT_NO" type="STRING" size="256"/>
          <Column id="PROD_SER_NO" type="STRING" size="256"/>
          <Column id="EQP_MDL_CD" type="STRING" size="256"/>
          <Column id="EQP_SER_NO" type="STRING" size="256"/>
          <Column id="EQP_COLOR_CD" type="STRING" size="256"/>
          <Column id="SELL_UPRC" type="STRING" size="256"/>
          <Column id="SELL_PCOST" type="STRING" size="256"/>
          <Column id="SURTAX" type="STRING" size="256"/>
          <Column id="SELL_AMT" type="STRING" size="256"/>
          <Column id="XRATE_APPLY_AMT" type="STRING" size="256"/>
          <Column id="SALE_QTY" type="STRING" size="256"/>
          <Column id="EQP_MDL_NM" type="STRING" size="256"/>
          <Column id="MFACT_CD" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_search_user" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="DEALCO_CD" type="STRING" size="256"/>
          <Column id="USER_NO" type="STRING" size="256"/>
          <Column id="DUTYP_CD" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows>
          <Row/>
        </Rows>
      </Dataset>
      <Dataset id="ds_DMS250" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="CM_GRP_CD_ID" type="STRING" size="256"/>
          <Column id="CM_GRP_CD_NM" type="STRING" size="256"/>
          <Column id="CM_CD_ID" type="STRING" size="256"/>
          <Column id="CHG_DTM" type="STRING" size="256"/>
          <Column id="CM_CD_NM" type="STRING" size="256"/>
          <Column id="CM_CD_DESC" type="STRING" size="256"/>
          <Column id="CM_CD_SORT_ORD" type="STRING" size="256"/>
          <Column id="USE_YN" type="STRING" size="256"/>
          <Column id="SUP_CM_GRP_CD_ID" type="STRING" size="256"/>
          <Column id="SUP_CM_CD_ID" type="STRING" size="256"/>
          <Column id="MGMT_ITEM_CD1" type="STRING" size="256"/>
          <Column id="MGMT_ITEM_CD2" type="STRING" size="256"/>
          <Column id="MGMT_ITEM_CD3" type="STRING" size="256"/>
          <Column id="MGMT_ITEM_CD4" type="STRING" size="256"/>
          <Column id="MGMT_ITEM_CD5" type="STRING" size="256"/>
          <Column id="MGMT_ITEM_CD6" type="STRING" size="256"/>
          <Column id="MGMT_ITEM_CD7" type="STRING" size="256"/>
          <Column id="MGMT_ITEM_CD8" type="STRING" size="256"/>
          <Column id="MGMT_ITEM_CD9" type="STRING" size="256"/>
          <Column id="MGMT_ITEM_CD10" type="STRING" size="256"/>
          <Column id="FS_REG_USER_ID" type="STRING" size="256"/>
          <Column id="FS_REG_DTM" type="STRING" size="256"/>
          <Column id="LS_CHG_USER_ID" type="STRING" size="256"/>
          <Column id="LS_CHG_DTM" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_DMS262" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="CM_GRP_CD_ID" type="STRING" size="256"/>
          <Column id="CM_GRP_CD_NM" type="STRING" size="256"/>
          <Column id="CM_CD_ID" type="STRING" size="256"/>
          <Column id="CHG_DTM" type="STRING" size="256"/>
          <Column id="CM_CD_NM" type="STRING" size="256"/>
          <Column id="CM_CD_DESC" type="STRING" size="256"/>
          <Column id="CM_CD_SORT_ORD" type="STRING" size="256"/>
          <Column id="USE_YN" type="STRING" size="256"/>
          <Column id="SUP_CM_GRP_CD_ID" type="STRING" size="256"/>
          <Column id="SUP_CM_CD_ID" type="STRING" size="256"/>
          <Column id="MGMT_ITEM_CD1" type="STRING" size="256"/>
          <Column id="MGMT_ITEM_CD2" type="STRING" size="256"/>
          <Column id="MGMT_ITEM_CD3" type="STRING" size="256"/>
          <Column id="MGMT_ITEM_CD4" type="STRING" size="256"/>
          <Column id="MGMT_ITEM_CD5" type="STRING" size="256"/>
          <Column id="MGMT_ITEM_CD6" type="STRING" size="256"/>
          <Column id="MGMT_ITEM_CD7" type="STRING" size="256"/>
          <Column id="MGMT_ITEM_CD8" type="STRING" size="256"/>
          <Column id="MGMT_ITEM_CD9" type="STRING" size="256"/>
          <Column id="MGMT_ITEM_CD10" type="STRING" size="256"/>
          <Column id="FS_REG_USER_ID" type="STRING" size="256"/>
          <Column id="FS_REG_DTM" type="STRING" size="256"/>
          <Column id="LS_CHG_USER_ID" type="STRING" size="256"/>
          <Column id="LS_CHG_DTM" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_DMS196" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="CM_GRP_CD_ID" type="STRING" size="256"/>
          <Column id="CM_GRP_CD_NM" type="STRING" size="256"/>
          <Column id="CM_CD_ID" type="STRING" size="256"/>
          <Column id="CHG_DTM" type="STRING" size="256"/>
          <Column id="CM_CD_NM" type="STRING" size="256"/>
          <Column id="CM_CD_DESC" type="STRING" size="256"/>
          <Column id="CM_CD_SORT_ORD" type="STRING" size="256"/>
          <Column id="USE_YN" type="STRING" size="256"/>
          <Column id="SUP_CM_GRP_CD_ID" type="STRING" size="256"/>
          <Column id="SUP_CM_CD_ID" type="STRING" size="256"/>
          <Column id="MGMT_ITEM_CD1" type="STRING" size="256"/>
          <Column id="MGMT_ITEM_CD2" type="STRING" size="256"/>
          <Column id="MGMT_ITEM_CD3" type="STRING" size="256"/>
          <Column id="MGMT_ITEM_CD4" type="STRING" size="256"/>
          <Column id="MGMT_ITEM_CD5" type="STRING" size="256"/>
          <Column id="MGMT_ITEM_CD6" type="STRING" size="256"/>
          <Column id="MGMT_ITEM_CD7" type="STRING" size="256"/>
          <Column id="MGMT_ITEM_CD8" type="STRING" size="256"/>
          <Column id="MGMT_ITEM_CD9" type="STRING" size="256"/>
          <Column id="MGMT_ITEM_CD10" type="STRING" size="256"/>
          <Column id="FS_REG_USER_ID" type="STRING" size="256"/>
          <Column id="FS_REG_DTM" type="STRING" size="256"/>
          <Column id="LS_CHG_USER_ID" type="STRING" size="256"/>
          <Column id="LS_CHG_DTM" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
    </Objects>
    <InitValue/>
    <Bind>
      <BindItem id="item1" compid="div_detail.txa_rmk" propid="value" datasetid="ds_master" columnid="RMK"/>
      <BindItem id="item8" compid="div_detail.edt_sellAmt" propid="value" datasetid="ds_master" columnid="SELL_AMT"/>
      <BindItem id="item4" compid="div_search.edt_user_no" propid="value" datasetid="ds_master" columnid="SELL_CHRGR_ID"/>
      <BindItem id="item5" compid="div_search.edt_usernm" propid="value" datasetid="ds_sellchrgrid" columnid="USER_NM"/>
      <BindItem id="item11" compid="div_search.cbo_sellClCd" propid="value" datasetid="ds_master" columnid="SELL_CL_CD"/>
      <BindItem id="item12" compid="div_detail.edt_xrateApplyAmt" propid="value" datasetid="ds_master" columnid="XRATE_APPLY_AMT"/>
      <BindItem id="item16" compid="div_detail.cbo_curClCd" propid="value" datasetid="ds_master" columnid="CUR_CL_CD"/>
      <BindItem id="item17" compid="div_detail.cal_xrateApplyDt" propid="value" datasetid="ds_master" columnid="XRATE_APPLY_DT"/>
      <BindItem id="item18" compid="div_search.cal_sell_dt" propid="value" datasetid="ds_master" columnid="SELL_DTM"/>
      <BindItem id="item19" compid="div_search.cal_chg_dt" propid="value" datasetid="ds_master" columnid="SELL_CHG_DTM"/>
      <BindItem id="item7" compid="div_search.edt_salePlc" propid="value" datasetid="ds_master" columnid="SALEPLC"/>
      <BindItem id="item13" compid="div_search.edt_salePlcNm" propid="value" datasetid="ds_master" columnid="SALEPLC_NM"/>
      <BindItem id="item3" compid="div_search.chk_mqYn" propid="value" datasetid="ds_master" columnid="MQ_YN"/>
    </Bind>
    <Script type="xscript4.0"><![CDATA[/*
 * 01. 업무구분 : 중고폰
 * 02. 화면 : FPASaleRgstM.xfdl
 * 03. 화면 설명 : FPA상품판매등록
 * 04. 관련 화면/서비스 : 
 * 05. 작성자 : Leeminjae
 * 05. 작성일 : 2016-02-15
 * 07. 수정이력 :
 ************************************************************************************************
 *     수정일        이  름    사유
 ************************************************************************************************
 *     2015.09.01    Leeminjae    최초 작성
 ************************************************************************************************
 */
 
/*===============================================================================================
 * [ PART 1 ] Form에서 Include 할 라이브러리(xjs)파일 정의
================================================================================================*/
include "LIB::common.xjs"; //공통함수 호출
include "LIB::comFile.xjs"; //공통함수 호출

/*===============================================================================================
 * [ PART 2 ] Form에서 사용될 전역변수를 선언
================================================================================================*/

 var pv_sPtrn = "";
 var pv_job = ""; // 신규/수정 구분
 var pv_sDisable = ""; // 저장/삭제 불가일 경우 02: 전표처리상태
/*===============================================================================================
 * [ PART 3 ] Form Event 처리
================================================================================================*/
/*----------------------------------------------------------------------------------------------
 * 설명   : Form Load Event
-----------------------------------------------------------------------------------------------*/
function Form_onload(obj:Form, e:LoadEventInfo)
{
	//공통 Form 초기화
	gfn_setInitPop(obj, e, "FEP082P");
 	//Form 초기 개발자 셋팅
 	//공통코드 초기화
 	fn_setInitCode(obj, e);
 	//그리드 초기화
 	fn_setInitGrid(obj, e);
 	//기본값 초기화
 	fn_setInitForm(obj, e);
 	
}

/*----------------------------------------------------------------------------------------------
 * 설명   : Form 종료전 Check 함수(공통)
-----------------------------------------------------------------------------------------------*/
function Form_checkBeforeClose()
{
	//변경된 Dataset검증
	if ( gfn_formBeforeOnClose(this, "ds_main") ) {
		return true;
	} else {
		return false;
	}
}
/*===============================================================================================
 * [ PART 4 ] Load 후 초기설정
================================================================================================*/
/*----------------------------------------------------------------------------------------------
 * 설명   : 공통코드 초기화
-----------------------------------------------------------------------------------------------*/
function fn_setInitCode(obj:Form, e:LoadEventInfo)
{

	var strCode =  "DMS100=ds_DMS100=N";	//색상
	    strCode += ",DMS160=ds_DMS160=N"; 	//상품구분
	    strCode += ",DMS101=ds_DMS101=N";	//제조사
	    strCode += ",DMS262=ds_DMS262=N";	//통화구분
	    strCode += ",DMS250=ds_DMS250=N";	//판매구분
	    strCode += ",DMS196=ds_DMS196=N";	//판매구분
						
	gfn_getCodeDs( this
				  , strCode
				  ,"fn_afterCodeCallBack");
}

/*----------------------------------------------------------------------------------------------
 * 설명   : 공통코드 호출 후 처리
-----------------------------------------------------------------------------------------------*/
function fn_afterCodeCallBack()
{		 
	div_search.cbo_sellClCd.index=1;
	div_detail.cbo_curClCd.index=0;
}
/*----------------------------------------------------------------------------------------------
 * 설명   : 그리드 초기화
-----------------------------------------------------------------------------------------------*/
function fn_setInitGrid(obj:Form, e:LoadEventInfo)
{	
	gfn_initGrid(grd_main, false, true, true, "row", null);
}


/*----------------------------------------------------------------------------------------------
 * 설명   : 기본값 설정
-----------------------------------------------------------------------------------------------*/
function fn_setInitForm(obj:Form, e:LoadEventInfo)
{	
	if(mode == "new"){	
	
		pv_job = "new";
	
		fn_enable("div_search.cal_chg_dt,div_search.edt_chg_dt_hh,div_search.edt_chg_dt_mm,btn_cancel", false);
	
		div_search.cal_sell_dt.value = gfn_todayTime().substr(0,8);
		div_search.edt_sell_dt_hh.value = gfn_todayTime().substr(8,2);
		div_search.edt_sell_dt_mm.value = gfn_todayTime().substr(10,2);
				
		btn_delete.enable = false;
		
	}else if(mode == "update"){
	
		fn_enable("div_search.edt_salePlc,div_search.edt_salePlcNm,div_search.btn_searchPlc,div_search.btn_resetPlc,div_search.chk_mqYn,div_search.cbo_sellClCd", false);
		btn_prod_select.enable = false;
		btn_excel_upload.enable = false;
	
		ds_search_dtl.setColumn(0, "GNRL_SELL_NO", opener.ds_main.getColumn(opener.ds_main.rowposition, "GNRL_SELL_NO"));
		fn_searchDtl();		
	}	
}

/*===============================================================================================
 * [ PART 5 ] Transaction 처리
================================================================================================*/
/*----------------------------------------------------------------------------------------------
 * 설명   : 상세조회
 * param   : 
 * return  : void
-----------------------------------------------------------------------------------------------*/
function fn_searchDtl()
{
	var sSvcID		 = "searchDtl";
	var sTrID		 = "PEPFPASaleMgmt_pInqFpaSaleSaveDtl";
	var sPtrn		 = "R";  //입력C,조회R,수정U,삭제D,복합M
	var sInputDs	 = "ncFieldMap=ds_search_dtl";
	var sOutputDs	 = "ds_master=RS_FPA_MASTER_DTL ds_main=RS_FPA_ITEM_DTL ds_upList=NC_FILE_LIST";
	var sArgs		 = "";
	var sCallBackFnc = "fn_callBack";

	gfn_transaction(sSvcID, sTrID, sPtrn, sInputDs, sOutputDs, sArgs, sCallBackFnc);
}

/*----------------------------------------------------------------------------------------------
 * 설명   : 메인저장 (insert, update)
 * param   : 
 * return  : void
-----------------------------------------------------------------------------------------------*/
function fn_saveMain(prtn)
{	
	var sSvcID		 = "saveMain";
	var sTrID		 = "PEPFPASaleMgmt_pSaveFpaSale";
	var sPtrn		 = prtn;  //입력C,조회R,수정U,삭제D,복합M
	var sInputDs	 = "RS_SALE_LIST=ds_main RS_MASTER_LIST=ds_master RS_DEL_LIST=ds_delList NC_FILE_LIST=ds_upList";
	var sOutputDs	 = "";
	var sArgs		 = "";
	var sCallBackFnc = "fn_callBack";
	
	gfn_transaction(sSvcID, sTrID, sPtrn, sInputDs, sOutputDs, sArgs, sCallBackFnc);
}

/*----------------------------------------------------------------------------------------------
 * 설명   : 사용자 조회
 * param   : 
 * return  : void
-----------------------------------------------------------------------------------------------*/
function fn_searchUserList()
{
	var sSvcID		 = "searchUserList";
	var sTrID		 = "PEPUserMgmt_pInqUserMgmtLst";
	var sPtrn		 = "R";  //입력C,조회R,수정U,삭제D,복합M
	var sInputDs	 = "ncFieldMap=ds_search_user";
	var sOutputDs	 = "ds_sellchrgrid=RS_USER_LIST";
	var sArgs		 = "";
	var sCallBackFnc = "fn_callBack";

	gfn_transaction(sSvcID, sTrID, sPtrn, sInputDs, sOutputDs, sArgs, sCallBackFnc);
}

/*----------------------------------------------------------------------------------------------
 * 설명   : 파일업로드
-----------------------------------------------------------------------------------------------*/
function fn_fileUpload()
{
	var sFileSvcId       = "uploadFile";
	var sCallBackFnc     = "fn_callBackFile";
	var objFileDS        = ds_upList;
	var sFullPathCol     = "fullpath";
	var objButton        = "";
	gfn_fileUpload(sFileSvcId, sCallBackFnc, objFileDS, sFullPathCol, objButton);
}


/*===============================================================================================
 * [ PART 6 ] CallBack 처리
================================================================================================*/
/*----------------------------------------------------------------------------------------------
 * 설명   : Transaction CallBack
 * param   : sSvcID, iErrorCode, sErrorMsg(ncMsgId,ncMsg)
 * return  : void
-----------------------------------------------------------------------------------------------*/
function fn_callBack(sSvcID, iErrorCode, sErrorMsg, ncMsgId, ncMsg)
{
 	switch(sSvcID) {
		case "searchDtl": 
			if ( iErrorCode == 0 ) {
			
				if(ds_master.getRowCount() > 0){
					
					pv_job = "update";
										
					if(ds_master.getColumn(0, "SELL_CL_CD") == "20"){
						div_detail.stc_xrateApplyDt.visible = true;
						div_detail.cal_xrateApplyDt.visible = true;
						div_detail.stc_curClCd.visible = true;
						div_detail.cbo_curClCd.visible = true;
						div_detail.stc_xrateApplyAmt.visible = true;
						div_detail.edt_xrateApplyAmt.visible = true;
					}
									
					var sellDtm = ds_master.getColumn(0, "SELL_DTM");
					div_search.cal_sell_dt.value = sellDtm.substr(0,8);
					div_search.edt_sell_dt_hh.value = sellDtm.substr(8,2);
					div_search.edt_sell_dt_mm.value = sellDtm.substr(10,2);
					
					div_search.cal_chg_dt.value = gfn_todayTime().substr(0,8);
					div_search.edt_chg_dt_hh.value = gfn_todayTime().substr(8,2);
					div_search.edt_chg_dt_mm.value = gfn_todayTime().substr(10,2);
					
					ds_search_user.setColumn(0, "DUTYP_CD", "11010");
					ds_search_user.setColumn(0, "USER_NO", ds_master.getColumn(0, "SELL_CHRGR_ID"));
					fn_searchUserList();
												
					if(!gfn_isNull(ds_master.getColumn(0, "XCL_SLIP_NO")) && ds_master.getColumn(0, "XCL_SLIP_ST") != "05" ){ // 전표발행시 수정 불가
						gfn_message("A","전표 발행건으로 수정 불가능합니다.");
						div_search.enable = false;
						pv_sDisable = "02";
					}
										
					ds_upList.addColumn("fullpath","string");
					
					var sellUprc = Number(grd_main.getCellValue(-2, 12)) - Number(grd_main.getCellValue(-2, 11));
					grd_main.setCellProperty("Summ", 10, "text", sellUprc);
					
				}else{				
					pv_job = "new";
				}
			}
		break;				
		
		case "saveMain":
			if ( iErrorCode == 0 ) {
				gfn_message("A","DMS00000","I");	//DMS00000 : 정상 처리되었습니다.
				opener.btn_search_onclick();
				close(true);
			}
		break;
				
		default:
		break;
		
	}
}

/*----------------------------------------------------------------------------------------------
 * 설명   : FileUpload CallBack
 * param   : sSvcID, iErrorCode, sErrorMsg, objRtnDs
 * return  : void
-----------------------------------------------------------------------------------------------*/
function fn_callBackFile(sSvcID, iErrorCode, sErrorMsg, objRtnDs)
{
 	switch(sSvcID) {
		case "uploadFile":
			for(i=0;i<ds_upList.rowcount;i++) {
				ds_upList.setColumn(i,"FILE_ID",objRtnDs.getColumn(i,"ncUploadedFileId"));
			}
			ds_upList.filter("");
			fn_saveMain(pv_sPtrn);
		break;
		
		default :
		break;
	}
}

/*===============================================================================================
 * [ PART 7 ] Main Button Event
================================================================================================*/
/*----------------------------------------------------------------------------------------------
 * 설명   : Save
-----------------------------------------------------------------------------------------------*/
function btn_save_onclick(obj:Button,  e:ClickEventInfo)
{
	if( !fn_checkDefault() ){
        return false;
    }
    
    if( pv_job == "new" ){
		if(ds_main.getRowCount() == 0){
			gfn_message("A","상품정보가 없습니다.");
			return false;
		}
    }
    
    if((!gfn_isUpdated(ds_master)&&!gfn_isUpdated(ds_upList)))
	{
		gfn_message("A","DMS00022","I");	//변경된 정보가 없습니다.
		return false;
	}
	
	if(div_search.cbo_sellClCd.value == "20"){
		if(gfn_isNull(div_detail.cal_xrateApplyDt.value)){
			gfn_message("A","DMS00002","E","","환율일자"); 
			div_detail.cal_xrateApplyDt.setFocus();
			return;
		}
		
		if(gfn_isNull(div_detail.cbo_curClCd.value)){
			gfn_message("A","DMS00002","E","","화폐구분"); 
			div_detail.cbo_curClCd.setFocus();
			return;
		}
		
		if(gfn_isNull(div_detail.edt_xrateApplyAmt.value)){
			gfn_message("A","DMS00002","E","","환율금액"); 
			div_detail.edt_xrateApplyAmt.setFocus();
			return;
		}
		
		var sXrateTotalAmt   = grd_main.getCellText(-2, 13);
		var nXrateTotalAmt   = Number(sXrateTotalAmt.replace(",",""));		
		var xRateAmt         = parseFloat(div_detail.edt_xrateApplyAmt.value);
		
		if(nXrateTotalAmt != xRateAmt){
			gfn_message("A","환율금액 총합계와 환율금액이 일치하지 않습니다.");
			return;
		}
	}
    
	if( fn_validSavePosbility() == false ) return;		
	if( fn_validPayment() == false ) return;
	
	// 저장
	if(!confirm( "저장하시겠습니까?" )) return;
			
	// MQ 판매여부		
	if (div_search.chk_mqYn.value != undefined && div_search.chk_mqYn.value == "Y") {
		ds_master.setColumn(0, "MQ_YN", "Y");
	} else {
		ds_master.setColumn(0, "MQ_YN", "N");
	}
	
	if(pv_job == "new"){	// 신규모드
	
		pv_sPtrn = "I";
		ds_master.setColumn(0, "SELL_DTM"    , fn_getDate("sell"));
		ds_master.setColumn(0, "SELL_CHG_DTM", fn_getDate("sell"));
				
	}else{	// 수정모드 
		
		if(ds_main.getRowCount() == 0){ // 상품정보 없으면 판매취소
			pv_sPtrn = "D";
		}else{
			pv_sPtrn = "U";
		}
		
		ds_master.setColumn(0, "SELL_CHGR_ID", div_search.edt_user_no.value);
		ds_master.setColumn(0, "SELL_DTM"    , fn_getDate("sell"));
		ds_master.setColumn(0, "SELL_CHG_DTM", fn_getDate("chg"));		
	}
	
	if(ds_upList.rowcount == 0){
		fn_saveMain(pv_sPtrn);
	} else {
		ds_upList.filter("UPLD_FILE_NO==undefined||UPLD_FILE_NO==''||UPLD_FILE_NO==null");
		if(ds_upList.rowcount == 0) {
			ds_upList.filter("");
			fn_saveMain(pv_sPtrn);
		} else {
			fn_fileUpload();
		}
	}
}

/*----------------------------------------------------------------------------------------------
 * 설명   : Close
-----------------------------------------------------------------------------------------------*/
function btn_close_onclick(obj:Button,  e:ClickEventInfo)
{
	switch(obj.name) 
	{	
		case "btn_close" : 	  //닫기
			close("cancel");
		break;
			
		case "btn_close2" :   //버튼X
			close("cancel");
		break;	
	}
}

/*----------------------------------------------------------------------------------------------
 * 설명   : 재고선택
-----------------------------------------------------------------------------------------------*/
function btn_prod_select_onclick(obj:Button,  e:ClickEventInfo)
{
	if(!fn_checkDefault()){
        return false;
    }
    // 재고상품검색 팝업
    var chk_mqYn = div_search.chk_mqYn.value;
    var sRtnValDs = gfn_dialog("FEP084P", {mqYn:chk_mqYn});  
    ds_main.appendData(sRtnValDs,true);
    
    var sellUprc = Number(grd_main.getCellValue(-2, 12)) - Number(grd_main.getCellValue(-2, 11));
	grd_main.setCellProperty("Summ", 10, "text", sellUprc);
    
    if(sRtnValDs != "cancel"){
		btn_delete.enable = true;
    }
}

/*----------------------------------------------------------------------------------------------
 * 설명   : ROW 삭제
-----------------------------------------------------------------------------------------------*/
function btn_delete_onclick(obj:Button,  e:ClickEventInfo)
{
	if(fn_validSavePosbility() == false) return;
	
	var nRow = ds_main.rowposition;
	var nRows = ds_main.getRowCount();
	
	if(pv_job == "new"){ // 신규
		ds_main.deleteRow(nRow);
	}else{	// 수정
		if(nRows == 0) return;
		
		if(!confirm( "선택된 판매건을 취소하시겠습니까?" )) return;
		
		ds_delList.copyRow(ds_delList.addRow(), ds_main, nRow);
				
		ds_main.deleteRow(nRow);
		
	}
	
	var sellUprc = Number(grd_main.getCellValue(-2, 12)) - Number(grd_main.getCellValue(-2, 11));
	grd_main.setCellProperty("Summ", 10, "text", sellUprc);
	
}

/*----------------------------------------------------------------------------------------------
 * 설명   : 판매취소
-----------------------------------------------------------------------------------------------*/
function btn_cancel_onclick(obj:Button,  e:ClickEventInfo)
{
	if(fn_validSavePosbility() == false) return;
		
	if(!confirm( "전체 판매건을 취소하시겠습니까?" )) return;
	
	var nRows = ds_main.getRowCount();
	
	ds_delList.clearData();
	for(var i=0; i<nRows; i++){
		ds_delList.copyRow(ds_delList.addRow(), ds_main, i);
	}
	
	ds_master.setColumn(0, "SELL_CHGR_ID", div_search.edt_user_no.value);
	ds_master.setColumn(0, "SELL_DTM"    , fn_getDate("sell"));
	ds_master.setColumn(0, "SELL_CHG_DTM", fn_getDate("chg"));
			
	fn_saveMain("D");
}

/*----------------------------------------------------------------------------------------------
 * 설명   : grid excel
-----------------------------------------------------------------------------------------------*/
function btn_excel_onclick(obj:Button,  e:ClickEventInfo)
{
	if (grd_main.rowcount == 0){
		gfn_message("A","DMS00021","I"); //조회된 정보가 없습니다.
	} else {
		gfn_baseExcelExpert(grd_main,"FPA상품판매등록목록","FPA상품판매등록목록");
	}
}

/*===============================================================================================
 * [ PART 8 ] Event
================================================================================================*/

/*----------------------------------------------------------------------------------------------
 * 설명   : 매출처 엔터키 검색
-----------------------------------------------------------------------------------------------*/
function div_search_edt_salePlc_onkeydown(obj:Edit, e:KeyEventInfo)
{
	if (e.keycode == KEYCODE_ENTER) {
		div_search_btn_searchPlc_onclick();
	}
}

/*----------------------------------------------------------------------------------------------
 * 설명   : 사용자 엔터키 검색
-----------------------------------------------------------------------------------------------*/
function div_search_edt_user_no_onkeydown(obj:Edit, e:KeyEventInfo)
{
	if (e.keycode == KEYCODE_ENTER) {
		div_search_btn_searchUser_onclick();
	}
}

/*----------------------------------------------------------------------------------------------
 * 설명   : 매출처 검색
-----------------------------------------------------------------------------------------------*/
function div_search_btn_searchPlc_onclick(obj:Button,  e:ClickEventInfo)
{
	var sParam01 = div_search.edt_salePlcNm.value;
	var sParam02 = div_search.edt_salePlc.value;
	var sParam03 = "S1"; // 매출처
	var sParam04 = "";
	if ( e == null ) {
		sParam04 = "key";
	} else {
		sParam04 = "button";
	}

	var arrArgs = {argAutoSelect:true, argCallProgram:"FEP081M", argParam01:sParam01, argParam02:sParam02, argParam03:sParam03, argParam04:sParam04};
	var sRtnVal = gfn_dialog("FBI004P", arrArgs);

	//팝업에서 입력받은 값 리턴
	if ( gfn_isNull(sRtnVal) || sRtnVal == "cancel" ) {
		//취소시 값 제거
		div_search.edt_salePlc.value = "";
		div_search.edt_salePlcNm.value = "";
	} else {	//Object이용시
		div_search.edt_salePlc.value = sRtnVal["supDealCoCd"];
		div_search.edt_salePlcNm.value = sRtnVal["supDealCoNm"];	
	}
}

/*----------------------------------------------------------------------------------------------
 * 설명   : 사용자 검색
-----------------------------------------------------------------------------------------------*/
function div_search_btn_searchUser_onclick(obj:Button,  e:ClickEventInfo)
{	
	var sParam01 = div_search.edt_user_no.value;
	var sParam02 = div_search.edt_usernm.value;
	var sParam03 = "";
	var sParam04 = "";
	var sParam05 = "11010";
	if ( e == null ) {
		sParam03 = "key";
	} else {
		sParam03 = "button";
	}
	var arrArgs = {argAutoSelect:true, argCallProgram:"FEP081M", argParam01:sParam01, argParam02:sParam02, argParam03:sParam03, argParam04:sParam04, argParam05:sParam05};
	var sRtnVal = gfn_dialog("FSC011P", arrArgs);

	if ( gfn_isNull(sRtnVal) || sRtnVal == "cancel" ) {
		//취소시 값 제거
		div_search.edt_user_no.value = null;
		div_search.edt_usernm.value = null;
		
	} else {	//Object이용시
		
		div_search.edt_user_no.value = sRtnVal["value1"];
		div_search.edt_usernm.value = sRtnVal["value2"];
		
	}
}

/*----------------------------------------------------------------------------------------------
 * 설명   : reset
-----------------------------------------------------------------------------------------------*/
function div_btn_reset_onclick(obj:Button,  e:ClickEventInfo)
{
	switch(obj.name) 
	{			
		case "btn_resetPlc" : 	//매출처리셋
			div_search.edt_salePlc.value = null;
			div_search.edt_salePlcNm.value = null;
		break;
		
		case "btn_resetUser" : 	//사용자리셋
			div_search.edt_user_no.value = null;
			div_search.edt_usernm.value = null;
		break;
		
	}
}

/*----------------------------------------------------------------------------------------------
 * 설명   : 파일 추가
-----------------------------------------------------------------------------------------------*/
function div_detail_btn_addFile_onclick(obj:Button,  e:ClickEventInfo)
{
	var objRtnDs = gfn_getFileInfo(true);
	               
	if ( !gfn_isNull(objRtnDs) ) {	//Dataset사용시
		for(var i=0; i<objRtnDs.rowcount; i++){
			var nRow = ds_upList.addRow();
			ds_upList.setColumn(nRow,"fullpath",objRtnDs.getColumn(i,"fullpath"));
			ds_upList.setColumn(nRow,"FILE_NM",objRtnDs.getColumn(i,"filename"));
			ds_upList.setColumn(nRow,"FILE_TYP_VAL",objRtnDs.getColumn(i,"filetype"));
			ds_upList.setColumn(nRow,"FILE_SIZE",objRtnDs.getColumn(i,"filesize"));
		}
	}
}

/*----------------------------------------------------------------------------------------------
 * 설명   : 파일 삭제
-----------------------------------------------------------------------------------------------*/
function div_detail_btn_deleteFile_onclick(obj:Button,  e:ClickEventInfo)
{
	ds_upList.deleteRow(ds_upList.rowposition);
}

/*----------------------------------------------------------------------------------------------
 * 설명   : 파일 다운로드
-----------------------------------------------------------------------------------------------*/
function div_detail_btn_fileDownload_onclick(obj:Button,  e:ClickEventInfo)
{
	//var nRow = ds_upList.rowposition;
	
	for(var i=0; i<ds_upList.getRowCount(); i++){
		if(!gfn_isNull(ds_upList.getColumn(i,"FILE_ID"))) {
			if(gfn_fileDownload(ds_upList.getColumn(i,"FILE_ID"), ds_upList.getColumn(i,"FILE_NM"))) {
				gfn_message("A","DMS00074");	//파일이 정상적으로 다운로드 되었습니다.
			} else {
				gfn_message("A","DMS00075");	//파일다운이 실패하였습니다.
			}
		}
	}
}

/*----------------------------------------------------------------------------------------------
 * 설명   : 엑셀업로드
-----------------------------------------------------------------------------------------------*/
function btn_excel_upload_onclick(obj:Button,  e:ClickEventInfo)
{
	if(!fn_checkDefault()){
        return false;
    }
    
    var cbo_sellClCd = div_search.cbo_sellClCd.value;
    var chk_mqYn = div_search.chk_mqYn.value;
    
    var sRtnValDs = gfn_dialog("FEP083P",{sellClCd : cbo_sellClCd, mqYn : chk_mqYn});    
    ds_main.appendData(sRtnValDs,true);
    
    var sellUprc = Number(grd_main.getCellValue(-2, 12)) - Number(grd_main.getCellValue(-2, 11));
	grd_main.setCellProperty("Summ", 10, "text", sellUprc);
    
    if(sRtnValDs != "cancel"){
		btn_delete.enable = true;
    }
}


/*----------------------------------------------------------------------------------------------
 * 설명   : 판매구분 변경 이벤트
-----------------------------------------------------------------------------------------------*/
function div_search_cbo_sellClCd_onitemchanged(obj:Combo, e:ItemChangeEventInfo)
{
	if(obj.value == "20"){
		div_detail.stc_xrateApplyDt.visible = true;
		div_detail.cal_xrateApplyDt.visible = true;
		div_detail.stc_curClCd.visible = true;
		div_detail.cbo_curClCd.visible = true;
		div_detail.cbo_curClCd.value = "USD";
		div_detail.stc_xrateApplyAmt.visible = true;
		div_detail.edt_xrateApplyAmt.visible = true;
	}else{
		div_detail.stc_xrateApplyDt.visible = false
		div_detail.cal_xrateApplyDt.visible = false;
		div_detail.cal_xrateApplyDt.value = "";
		div_detail.stc_curClCd.visible = false;
		div_detail.cbo_curClCd.visible = false;
		div_detail.cbo_curClCd.value = "KRW";
		div_detail.stc_xrateApplyAmt.visible = false;
		div_detail.edt_xrateApplyAmt.visible = false;
		div_detail.edt_xrateApplyAmt.value = "";
	}
	
	ds_main.clearData();
}

/*----------------------------------------------------------------------------------------------
 * 설명   : MQ여부 변경 이벤트
-----------------------------------------------------------------------------------------------*/
function div_search_chk_mqYn_onclick(obj:CheckBox,  e:ClickEventInfo)
{
	ds_main.clearData();
}

/*===============================================================================================
 * [ PART 9 ] User Defined
================================================================================================*/

/*----------------------------------------------------------------------------------------------
 * 설명   : 저장 가능여부
-----------------------------------------------------------------------------------------------*/
function fn_validSavePosbility()
{	
	if(!gfn_isNull(pv_sDisable)){
		if(pv_sDisable == "02"){
			gfn_message("A","전표 발행건으로 수정 불가능합니다.");
			return false;
		}
	}
	return true;
}

/*----------------------------------------------------------------------------------------------
 * 설명   : 디폴트 날짜 셋팅
-----------------------------------------------------------------------------------------------*/
function fn_getDate(objString)
{
	var result = "";
	
	var dt = eval("div_search.cal_"+objString+"_dt").value;
	var hh = eval("div_search.edt_"+objString+"_dt_hh").value;	
	var mm = eval("div_search.edt_"+objString+"_dt_mm").value;
	if(!gfn_isNull(dt)){
		result = dt + hh + mm + "00";
	}
	
    return result;
}

/*----------------------------------------------------------------------------------------------
 * 설명   : 필수항목 체크
-----------------------------------------------------------------------------------------------*/
function fn_checkDefault()
{   
	var sellDtm = fn_getDate("sell");
	var sellChgDtm = fn_getDate("chg");
	
	if(gfn_isNull(sellDtm)){
		gfn_message("A","DMS00002","E","","판매일자"); 
		div_search.cal_chg_dt.setFocus();
		return false;	
	}
	
	if(!gfn_isDateTime(sellDtm)){
		gfn_message("A","판매일자 입력 오류입니다. 입력 정보를 확인 하십시오.");
		return false;
	}
		
	if ((gfn_diffDate(sellDtm.substr(0,10), gfn_today())) <= -1 ) {
		gfn_message("A","현재일자 이전 날짜만 입력이 가능합니다.");
		div_search.cal_sell_dt.setFocus();
		return false;
	}	
	
	if(pv_job == "update"){
	
		if(gfn_isNull(sellChgDtm)){
			gfn_message("A","DMS00002","E","","변경일자"); 
			div_search.cal_chg_dt.setFocus();
			return false;	
		}
		
		if(!gfn_isDateTime(sellChgDtm)){
			gfn_message("A","변경일자 입력 오류입니다. 입력 정보를 확인 하십시오.");
			return false;
		}
			
		if ((gfn_diffDate(sellChgDtm.substr(0,10), gfn_today())) <= -1 ) {
			gfn_message("A","현재일자 이전 날짜만 입력이 가능합니다.");
			div_search.cal_chg_dt.setFocus();
			return false;
		}
		
		if ((gfn_diffDate(sellDtm.substr(0,10), sellChgDtm.substr(0,10))) <= -1 ) {
			gfn_message("A","판매일자 이후 날짜만 입력이 가능합니다.");
			div_search.cal_chg_dt.setFocus();
			return false;
		}
		
	}
	
	if(gfn_isNull(div_search.edt_salePlc.value)){
		gfn_message("A","DMS00002","E","","매출처"); 
        div_search.edt_salePlc.setFocus();
        return false;
	}
		
	if(gfn_isNull(div_search.edt_user_no.value)){
		gfn_message("A","DMS00002","E","","판매담당자"); 
        div_search.edt_user_no.setFocus();
        return false;
	}
   
    return true;
}

/*----------------------------------------------------------------------------------------------
 * 설명   : 저장시 수납정보 유효성 검사
-----------------------------------------------------------------------------------------------*/
function fn_validPayment()
{
	var sCashPayAmt     = div_detail.edt_sellAmt.value;
	var nCashPayAmt     = sCashPayAmt == "" ? 0 : parseFloat(sCashPayAmt);
	
	var sSaleTotalAmt   = grd_main.getCellText(-2, 12);
	var nSaleTotalAmt   = Number(sSaleTotalAmt.replace(",",""));
				
	if(nSaleTotalAmt != nCashPayAmt){
		gfn_message("A","판매가 총합계와 수납금액이 일치하지 않습니다.");
		return false;
	}
	
	return true;
}

/*----------------------------------------------------------------------------------------------
 * 설명   : enable (true, false)
-----------------------------------------------------------------------------------------------*/
function fn_enable(objString, bEnable)
{
	var arrObject = objString.split(",");
	
	for(var i=0; i<arrObject.length; i++){
		var oObject = eval(arrObject[i]);
		oObject.enable = bEnable;
	}
}


]]></Script>
  </Form>
</FDL>
